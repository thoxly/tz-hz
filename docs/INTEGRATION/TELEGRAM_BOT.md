# Telegram –ë–æ—Ç - UI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¢–ó

Telegram –±–æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `.env`:

```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_BOT_ENABLED=true
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install python-telegram-bot
```

–ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

## –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python run_telegram_bot.py
```

–ë–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å API —Å–µ—Ä–≤–µ—Ä–æ–º.

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### `/start` - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥.

### `/help` - –°–ø—Ä–∞–≤–∫–∞
–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞.

### `/new` - –ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞.

### `/generate_ts` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¢–ó
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è.

### `/history` - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤–∞—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:

```
–ù—É–∂–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤ —Å —ç—Ç–∞–ø–∞–º–∏:
1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
2. –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
3. –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–º
4. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞—Å—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- –ü–æ–∫–∞–∂–µ—Ç —Ç–∏–ø—ã —Ä–µ—à–µ–Ω–∏–π, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, –¥–µ—Ç–∞–ª–∏
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç –∫–Ω–æ–ø–∫—É "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¢–ó"

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¢–ó

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üìÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¢–ó"
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/generate_ts`

–ë–æ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¢–ó –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –≤—ã–±—Ä–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞.

### 3. –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¢–ó –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç:
- **üìÑ DOCX** - Microsoft Word –¥–æ–∫—É–º–µ–Ω—Ç
- **üìÑ PDF** - PDF –¥–æ–∫—É–º–µ–Ω—Ç (—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
- **üåê HTML** - HTML —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- **üìù Markdown** - Markdown —Ñ–∞–π–ª

–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ñ–∞–π–ª –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ü–µ—Å—Å

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤
```

**–ë–æ—Ç:**
```
‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ!

üìä –¢–∏–ø—ã —Ä–µ—à–µ–Ω–∏–π: process
üéØ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 75.0%

üîÑ –ü—Ä–æ—Ü–µ—Å—Å: –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–æ–≤
   ‚Ä¢ –®–∞–≥–æ–≤: 3
   ‚Ä¢ –†–æ–ª–∏: –ú–µ–Ω–µ–¥–∂–µ—Ä, –î–∏—Ä–µ–∫—Ç–æ—Ä

üí° –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¢–ó
[üìÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¢–ó]
```

### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
–ù—É–∂–µ–Ω —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ —Å –ø–æ–ª—è–º–∏:
- –ù–∞–∑–≤–∞–Ω–∏–µ
- –ò–ù–ù
- –ê–¥—Ä–µ—Å
- –¢–µ–ª–µ—Ñ–æ–Ω
```

**–ë–æ—Ç:**
```
‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ!

üìä –¢–∏–ø—ã —Ä–µ—à–µ–Ω–∏–π: app, widget
üéØ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 65.0%

üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
   ‚Ä¢ –ü–æ–ª–µ–π: 5
   ‚Ä¢ –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π: 2

üí° –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¢–ó
[üìÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¢–ó]
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ API endpoints, —á—Ç–æ –∏ n8n:

- `/api/decision-engine/design` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `/api/ts/generate/deterministic` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¢–ó
- `/api/ts/export/*` - —ç–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

## –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–æ—Ç —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –≤ –ø–∞–º—è—Ç–∏ (–≤ —Å–ª–æ–≤–∞—Ä–µ `user_sessions`). –î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL** - —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –¢–ó –≤ –ë–î
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis** - –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Å—Å–∏–π
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É** - —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ JSON —Ñ–∞–π–ª—ã

–ü—Ä–∏–º–µ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ PostgreSQL:

```python
# –í –º–µ—Ç–æ–¥–µ _handle_message –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è architecture
async with session_factory() as session:
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
    stmt = insert(Architecture).values(
        user_id=user_id,
        architecture_json=architecture.model_dump(),
        created_at=datetime.now()
    )
    await session.execute(stmt)
    await session.commit()
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥

–í —Ñ–∞–π–ª–µ `app/telegram_bot/bot.py`:

```python
application.add_handler(self.CommandHandler("my_command", self._cmd_my_command))

async def _cmd_my_command(self, update, context):
    await update.message.reply_text("–ú–æ—è –∫–æ–º–∞–Ω–¥–∞!")
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ inline –∫–Ω–æ–ø–æ–∫

```python
from telegram import InlineKeyboardButton, InlineKeyboardMarkup

keyboard = [
    [InlineKeyboardButton("–ö–Ω–æ–ø–∫–∞ 1", callback_data="action_1")],
    [InlineKeyboardButton("–ö–Ω–æ–ø–∫–∞ 2", callback_data="action_2")]
]
reply_markup = InlineKeyboardMarkup(keyboard)
await update.message.reply_text("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=reply_markup)
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ callback

```python
async def _handle_callback(self, update, context):
    query = update.callback_query
    data = query.data
    
    if data == "action_1":
        await query.answer("–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ 1")
        # –í–∞—à –∫–æ–¥
```

## Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω: `python run_telegram_bot.py`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞ "python-telegram-bot –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
```bash
pip install python-telegram-bot
```

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ API —Å–µ—Ä–≤–µ—Ä–∞

### –§–∞–π–ª—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (Telegram –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ 50MB)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Ç–æ–∫–µ–Ω** - —Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ `.env` —Ñ–∞–π–ª–µ
2. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** - –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É user_id –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–æ—Ç—É
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–ª–∏–Ω—É –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
4. **Rate limiting** - –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –°—Ç–∞—Ç—É—Å

‚úÖ Telegram –±–æ—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã:
- –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¢–ó
- –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

