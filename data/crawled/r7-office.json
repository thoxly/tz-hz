{
  "doc_id": "r7-office",
  "url": "https://elma365.com/ru/help/crm/ru/help/business_solutions/r7-office.html",
  "title": "Интеграция с Р7-Офис",
  "breadcrumbs": [],
  "section": "[crm]",
  "html": "<!DOCTYPE html>\n<html lang=\"ru\">\n<head>\n<title>Интеграция с Р7-Офис</title>\n<meta content=\"Help+Manual\" name=\"generator\"/>\n<meta content=\"ELMA365 Store,официальный сайт\" name=\"keywords\"/>\n<meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>\n<meta content=\"IE=edge\" http-equiv=\"X-UA-Compatible\"/>\n<meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"/>\n<meta content=\"Решение для просмотра и редактирования документов онлайн в интерфейсе ELMA365 с помощью сервера Р7‑Офис.\" name=\"description\"/>\n<meta content=\"\" name=\"picture\"/>\n<meta content=\"website\" property=\"og:type\"/>\n<meta content=\"Cправка по Low-code платформе ELMA365\" property=\"og:title\"/>\n<meta content=\"https://elma365.com/ru/help\" property=\"og:url\"/>\n<meta content=\"\" property=\"og:image\"/>\n<meta content=\"ELMA365\" property=\"og:site_name\"/>\n<link href=\"favicon.png\" rel=\"icon\" type=\"image/png\"/>\n<link href=\"https://elma365.com/ru/help/business_solutions/r7-office.html\" rel=\"canonical\"/>\n<link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap\" rel=\"stylesheet\"/>\n<link href=\"./jquery-ui.min.css\" rel=\"stylesheet\"/>\n<link href=\"default.css\" rel=\"stylesheet\"/>\n<link href=\"./search-yandex.css\" rel=\"stylesheet\"/>\n<link href=\"./article.css\" rel=\"stylesheet\"/>\n<link href=\"./glossary.css\" rel=\"stylesheet\"/>\n<link href=\"./theme.css\" rel=\"stylesheet\"/>\n<link href=\"./tooltipster.bundle.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n<script src=\"jquery.js\" type=\"text/javascript\"></script>\n<script src=\"./tooltipster.bundle.min.js\" type=\"text/javascript\"></script>\n<script type=\"text/javascript\">\n        $(document).ready($('.tooltip').tooltipster({\n            contentCloning: true,\n            theme: 'tooltipster-borderless',\n        }));\n    </script>\n<script src=\"helpman_settings.js\" type=\"text/javascript\"></script>\n<script src=\"helpman_topicinit.js\" type=\"text/javascript\"></script>\n<script src=\"highlight.js\" type=\"text/javascript\"></script>\n<script type=\"text/javascript\">\n     $(document).ready(function(){highlight();});\n   </script>\n</head>\n<body>\n<script async=\"\" src=\"https://www.googletagmanager.com/gtag/js?id=G-M6ETBEC1R9\"></script><script>window.dataLayer=window.dataLayer || []; function gtag(){dataLayer.push(arguments);}gtag('js', new Date()); gtag('config', 'G-M6ETBEC1R9');</script>\n<script>!function(e,t,c,n,r,a,m){e.ym=e.ym||function(){(e.ym.a=e.ym.a||[]).push(arguments)},e.ym.l=1*new Date;for(var s=0;s<document.scripts.length;s++)if(document.scripts[s].src===n)return;a=t.createElement(c),m=t.getElementsByTagName(c)[0],a.async=1,a.src=n,m.parentNode.insertBefore(a,m)}(window,document,\"script\",\"https://mc.yandex.ru/metrika/tag.js\"),ym(83179930,\"init\",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})</script><noscript><div><img alt=\"\" src=\"https://mc.yandex.ru/watch/83179930\" style=\"position:absolute;left:-9999px\"/></div></noscript> \n    \n    ﻿<header class=\"header elma-365\">\n<div class=\"container\">\n<div class=\"nav-container\">\n<div class=\"nav-wrap\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img alt=\"header logo\" src=\"./logo.svg\"/>\n</a>\n<div class=\"header__navi\">\n<ul class=\"header__list\"><li><span class=\"solution-select\"><span class=\"solution-select__selected\"></span><svg fill=\"none\" height=\"4\" viewbox=\"0 0 7 4\" width=\"7\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1 1L3.5 3.5L6 1\" stroke=\"white\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg><ul class=\"solution-select__list\"><li class=\"header__list-item\"><a class=\"project-link\" href=\"https://elma365.com/ru/help/platform/get-trial.html\">Платформа</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/ecm/ecm-functions.html\">CSP</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/crm/crm-functions.html\">CRM+CX</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/projects/projects-functions.html\">Проекты</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/service/service-functions.html\">Service</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/kedo/kedo.html\">КЭДО</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/business_solutions/-elma365-store.html\">Бизнес-решения</a></li><ul class=\"social-links-header\"><li class=\"social-link-header\"><a class=\"project-link\" href=\"https://elma-academy.com/ru/\" target=\"_blank\">Academy</a></li><li class=\"social-link-header\"><a class=\"project-link\" href=\"https://community.elma365.com/ru/\" target=\"_blank\">Community</a></li><li></li></ul></ul></span></li><li class=\"header__list-item\"><a class=\"header__list-item-url\" href=\"https://api.elma365.com/ru/\" target=\"_blank\">API</a></li><li class=\"header__list-item\"><a class=\"header__list-item-url\" href=\"https://tssdk.elma365.com/latest/\" target=\"_blank\">SDK</a></li><li class=\"header__list-item header__list-item-latest\"><a class=\"header__list-item-url header__list-item-last\" href=\"https://elma365.com/ru/\" target=\"_blank\">Сайт ELMA365</a></li></ul>\n<div class=\"hero-wrap\" style=\"display: flex; align-items: center;\">\n<div class=\"hero__search\" style=\"display: flex; justify-content: space-between; width: 100%; padding-left: 0;\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img alt=\"header logo\" src=\"./logo.svg\"/>\n</a>\n<button class=\"hero__search-icon\" id=\"search-icon\">\n<img alt=\"search string\" src=\"search-icon-white.svg\"/>\n</button>\n<div class=\"hero__search-form\" id=\"search-panel\"><form class=\"search-form\"><label class=\"search-form__label\"><span class=\"search__icon\" id=\"reset-search\" src=\"Union.svg\"></span><input class=\"search-form__input\" type=\"text\"/></label><input class=\"search-form__submit\" type=\"submit\" value=\"Submit\"/></form></div>\n</div>\n</div>\n</div>\n</div>\n<a class=\"hero__side-icon\" href=\"#\" id=\"side-menu-icon\">\n<img alt=\"side menu\" src=\"side_menu.svg\"/>\n</a>\n</div>\n</div>\n</header>\n<main class=\"main container\">\n<aside class=\"sidebar\" id=\"sidebar\">\n<div class=\"sidebar__header\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img src=\"./logo-light.svg\"/>\n</a>\n<span class=\"sidebar__close elma-365-close\" id=\"close\"></span>\n</div>\n<div class=\"sidebar__wrapper\" id=\"side-menu\">\n</div>\n</aside>\n<article class=\"article\" id=\"article\">\n<div class=\"article-inner\">\n<div class=\"content\">\n<header class=\"article__header\">\n<div class=\"article__bread\" style=\"display:flex; gap:8px;\">\n<span class=\"search-res__item-category search-res__item-category_subcategory subcategory article__badge\" id=\"subcategory\"></span>\n</div>\n<div class=\"topic__title\"><h1 class=\"p_Heading1\"><span class=\"f_Heading1\">Интеграция с Р7-Офис</span></h1>\n</div>\n</header>\n<section class=\"article__content\">\n<div class=\"scroll-top-inner\">\n<a class=\"scroll-top\" href=\"#h1-article\"></a>\n</div>\n<!-- Placeholder for topic body. -->\n<p class=\"p_Normal\">Решение для просмотра и редактирования документов онлайн в интерфейсе ELMA365 с помощью сервера Р7‑Офис.</p>\n<p class=\"p_CodeExample\" style=\"page-break-inside: avoid;\"><span class=\"f_CodeExample\">начало внимание </span></p>\n<p class=\"p_Normal\">Для корректной работы рекомендуем <span style=\"font-family: Inter;\">использовать сервер Р7‑Офис версии 7.4</span>. </p>\n<p class=\"p_CodeExample\" style=\"page-break-inside: avoid;\"><span class=\"f_CodeExample\">конец внимание</span></p>\n<p class=\"p_Normal\">Интеграция с сервером Р7-Офис осуществляется в несколько этапов:</p>\n<ol style=\"list-style-type:decimal\">\n<li class=\"p_Normal\" value=\"1\">Установка сервера Р7-Офис.</li><li class=\"p_Normal\" value=\"2\"><a class=\"topiclink\" href=\"r7-office.html#r7-office-install-solution\">Установка решения Интеграция Р7-Офис в систему ELMA365</a>.</li><li class=\"p_Normal\" value=\"3\"><a class=\"topiclink\" href=\"r7-office.html#configure-module\">Настройка модуля интеграции с Р7-Офис</a>, входящего в состав решения. </li></ol>\n<h2 class=\"p_Heading2\"><a class=\"hmanchor\" id=\"r7-office-install-server\"></a><span class=\"f_Heading2\">Установка сервера Р7-Офис</span></h2>\n<p>Для работы требуется установленный <a class=\"weblink\" href=\"/ru/help/platform/install-r7-office.html\" target=\"_blank\">Сервер документов Р7-Офис</a>. Перейдите на <a class=\"weblink\" href=\"https://r7-office.ru/\" target=\"_blank\">официальный сайт</a>, чтобы загрузить и приобрести решение. На сайте производителя вы также можете ознакомиться с <a class=\"weblink\" href=\"https://support.r7-office.ru/hc/ru/categories/4650763337116-%D0%94%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D1%8F-%D0%B4%D0%BB%D1%8F-%D1%81%D0%BA%D0%B0%D1%87%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F\" target=\"_blank\">инструкциями по установке Р7-Офис</a>.</p>\n<h3 class=\"p_Heading3\"><a class=\"hmanchor\" id=\"enable-jwt\"></a><span class=\"f_Heading3\">Настройка поддержки JWT</span></h3>\n<p style=\"margin: 7px 0 7px 0;\"><span style=\"font-family: Inter;\">В ELMA365 поддерживается работа с JWT‑токенами, которые используются для обеспечения дополнительного уровня безопасности при аутентификации. </span></p>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-family: Inter;\">Начиная с версии 7.2, валидация JWT включена по умолчанию. Для более ранних версий её необходимо включить.</span></p>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-family: Inter;\"><a class=\"dropdown-toggle\" href=\"javascript:HMToggle('toggle','TOGGLE0186A1')\" style=\"font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;\">Включение валидации JWT-токенов на стороне Р7-Офис</a></span></p>\n<div class=\"dropdown-toggle-body\" id=\"TOGGLE0186A1\" style=\"text-align: left; text-indent: 0; line-height: 1.28; padding: 0 0 0 0; margin: 0 0 11px 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><ol style=\"list-style-type:upper-roman\">\n<li style=\"margin-top: 7px; margin-right: 0; margin-bottom: 7px;\" value=\"1\"><span style=\"font-family: Inter;\">Откройте конфигурационный файл </span><code><b>local.json</b></code><span style=\"font-family: Inter;\"> по следующему пути:</span></li></ol>\n<ul style=\"list-style-type:disc\">\n<li style=\"margin-top: 7px; margin-right: 0; margin-bottom: 7px;\"><span style=\"font-family: Inter;\">для Linux:</span><span style=\"font-family: Inter; font-weight: bold;\"> </span><code><b>/etc/Р7/documentserver/local.json</b></code><span style=\"font-family: Inter;\">;</span></li><li style=\"margin-top: 7px; margin-right: 0; margin-bottom: 7px;\"><span style=\"font-family: Inter;\">для Windows:</span><span style=\"font-family: Inter; font-weight: bold;\"> </span><code><b>%ProgramFiles%\\Р7\\DocumentServer\\config\\local.json</b></code><span style=\"font-family: Inter;\">.</span></li></ul>\n<ol style=\"list-style-type:upper-roman\">\n<li style=\"margin-top: 7px; margin-right: 0; margin-bottom: 7px;\" value=\"2\"><span style=\"font-family: Inter;\">Отредактируйте файл согласно инструкциям на </span><span style=\"font-family: Inter; color: #0563c1;\"><a class=\"weblink\" href=\"https://support.r7-office.ru/document_server/api-document_server/more_api/%D0%BF%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D1%8C-%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5-api/signature-2/\" target=\"_blank\">официальном сайте</a></span><span style=\"font-family: Inter;\">.</span></li><li style=\"margin-top: 7px; margin-right: 0; margin-bottom: 7px;\" value=\"3\"><span style=\"font-family: Inter;\">Убедитесь, что в файле в поле </span><code><b>token</b></code><span style=\"font-family: Inter;\"> добавлены следующие заголовки:</span></li></ol>\n<p class=\"p_CodeExample\" style=\"page-break-inside: avoid;\"><span class=\"f_CodeExample\">    \"inbox\": {</span><br/>\n<span class=\"f_CodeExample\">     \"header\": \"AuthorizationJWT\"</span><br/>\n<span class=\"f_CodeExample\">    },</span><br/>\n<span class=\"f_CodeExample\">    \"outbox\": {</span><br/>\n<span class=\"f_CodeExample\">     \"header\": \"AuthorizationJWT\"</span><br/>\n<span class=\"f_CodeExample\">    }</span></p>\n<ol style=\"list-style-type:upper-roman\">\n<li style=\"margin-top: 7px; margin-right: 0; margin-bottom: 7px;\" value=\"4\"><span style=\"font-family: Inter;\">Скопируйте секретный ключ, указанный в поле </span><code><b>secret</b></code><span style=\"font-family: Inter;\">.</span></li><li style=\"margin-top: 7px; margin-right: 0; margin-bottom: 7px;\" value=\"5\"><span style=\"font-family: Inter;\">Сохраните файл.</span></li><li style=\"margin-top: 7px; margin-right: 0; margin-bottom: 7px;\" value=\"6\"><span style=\"font-family: Inter;\">Перезапустите службы, чтобы изменения вступили в силу.</span></li></ol>\n<p style=\"margin: 7px 0 7px 34px;\"><span style=\"font-family: Inter;\">Если Р7-Офис установлен в Docker-контейнер, для перезапуска используйте команду:</span></p>\n<p class=\"p_CodeExample\" style=\"page-break-inside: avoid;\"><span class=\"f_CodeExample\">systemctl restart ds-converter ds-docservice ds-example ds-metrics</span></p>\n<p style=\"margin: 7px 0 7px 34px;\"><span style=\"font-family: Inter;\">В случае установки напрямую на сервер используйте команду:</span></p>\n<p class=\"p_CodeExample\" style=\"page-break-inside: avoid;\"><span class=\"f_CodeExample\">supervisorctl restart all</span></p>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-family: Inter;\">После этого необходимо указать секретный ключ при </span><span style=\"font-family: Inter; color: #0000ff;\"><a class=\"topiclink\" href=\"r7-office.html#configure-module\">настройке модуля</a></span><span style=\"font-family: Inter;\"> в ELMA365.</span></p>\n</td>\n</tr>\n</table>\n</div>\n<p class=\"p_Normal\">Если вы не используете JWT, для корректной работы модуля отключите проверку токенов в настройках Р7‑Офис.</p>\n<p class=\"p_Normal\"><a class=\"dropdown-toggle\" href=\"javascript:HMToggle('toggle','TOGGLE0186A2')\" style=\"font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;\">Отключение валидации JWT-токенов на стороне Р7-Офис</a></p>\n<div class=\"dropdown-toggle-body\" id=\"TOGGLE0186A2\" style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><ol style=\"list-style-type:upper-roman\">\n<li class=\"p_Normal\" value=\"1\">Откройте <span style=\"font-family: Inter;\">конфигурационный файл </span><code><b>local.json</b></code><span style=\"font-family: Inter;\"> по следующему пути:</span><ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\"><span style=\"font-family: Inter;\">для Linux:</span><span style=\"font-family: Inter; font-weight: bold;\"> </span><code><b>/etc/Р7/documentserver/local.json</b></code><span style=\"font-family: Inter;\">;</span></li><li class=\"p_Normal\"><span style=\"font-family: Inter;\">для Windows:</span><span style=\"font-family: Inter; font-weight: bold;\"> </span><code><b>%ProgramFiles%\\Р7\\DocumentServer\\config\\local.json</b></code><span style=\"font-family: Inter;\">.</span></li></ul>\n</li><li class=\"p_Normal\" value=\"2\">Для полей <code><b>browser</b></code>, <code><b>inbox</b></code> и <code><b>outbox</b></code> установите значение <code><b>false</b></code>. </li><li class=\"p_Normal\" value=\"3\">Сохраните изменения. </li><li class=\"p_Normal\" value=\"4\">Перезапустите службы, чтобы изменения вступили в силу.</li></ol>\n<p style=\"margin: 7px 0 7px 34px;\"><span style=\"font-family: Inter;\">Если Р7-Офис установлен в Docker-контейнер, для перезапуска используйте команду:</span></p>\n<p class=\"p_CodeExample\" style=\"page-break-inside: avoid;\"><span class=\"f_CodeExample\">systemctl restart ds-converter ds-docservice ds-example ds-metrics</span></p>\n<p style=\"margin: 7px 0 7px 34px;\"><span style=\"font-family: Inter;\">В случае установки напрямую на сервер используйте команду:</span></p>\n<p class=\"p_CodeExample\" style=\"page-break-inside: avoid;\"><span class=\"f_CodeExample\">supervisorctl restart all</span></p>\n</td>\n</tr>\n</table>\n</div>\n<h3 class=\"p_Heading3\"><span class=\"f_Heading3\">Настройка поддержки самоподписанного сертификата и приватного адреса</span></h3>\n<p class=\"p_Normal\">По умолчанию в Р7‑Офис блокируется получение файлов из хранилища, в котором настроены самоподписанный сертификат или приватный адрес. Если в ELMA365 вы используете такие настройки, измените параметры на сервере Р7‑Офис. Порядок внесения изменений зависит от способа установки сервера.</p>\n<p class=\"p_Normal\"><a class=\"dropdown-toggle\" href=\"javascript:HMToggle('toggle','TOGGLE0186A3')\" style=\"font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;\">Для сервера Р7‑Офис, установленного на локальном компьютере</a></p>\n<div class=\"dropdown-toggle-body\" id=\"TOGGLE0186A3\" style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><ol style=\"list-style-type:upper-roman\">\n<li class=\"p_Normal\" value=\"1\">Откройте <span style=\"font-family: Inter;\">конфигурационный файл </span><code><b>local.json</b></code><span style=\"font-family: Inter;\"> по пути:</span><ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\"><span style=\"font-family: Inter;\">для Linux:</span><span style=\"font-family: Inter; font-weight: bold;\"> </span><code><b>/etc/r7-office/documentserver/local.json</b></code><span style=\"font-family: Inter;\">;</span></li><li class=\"p_Normal\"><span style=\"font-family: Inter;\">для Windows:</span><span style=\"font-family: Inter; font-weight: bold;\"> </span><code><b>%ProgramFiles%\\R7-OFFICE\\DocumentServer\\config\\local.json</b></code><span style=\"font-family: Inter;\">.</span></li></ul></li></ol>\n<ol start=\"2\" style=\"list-style-type:upper-roman\">\n<li value=\"2\"><span style=\"font-size: 15px; font-family: inherit;\">Если в ELMA365 вы используете самоподписанные сертификаты, добавьте параметры:</span></li></ol>\n<p class=\"p_CodeExample\" style=\"white-space: normal; page-break-inside: avoid;\"><span class=\"f_CodeExample\">        \"inbox\": {</span><br/>\n<span class=\"f_CodeExample\">            \"header\": \"AuthorizationJWT\",</span><br/>\n<span class=\"f_CodeExample\">            \"inBody\": true</span><br/>\n<span class=\"f_CodeExample\">        },</span><br/>\n<span class=\"f_CodeExample\">        \"outbox\": {</span><br/>\n<span class=\"f_CodeExample\">            \"header\": \"AuthorizationJWT\",</span><br/>\n<span class=\"f_CodeExample\">            \"inBody\": true</span><br/>\n<span class=\"f_CodeExample\">        }</span><br/>\n<span class=\"f_CodeExample\">        …</span><br/>\n<span class=\"f_CodeExample\">        \"requestDefaults\": {</span><br/>\n<span class=\"f_CodeExample\">            \"headers\": {</span><br/>\n<span class=\"f_CodeExample\">                \"User-Agent\": \"Node.js/6.13\",</span><br/>\n<span class=\"f_CodeExample\">                \"Connection\": \"Keep-Alive\"</span><br/>\n<span class=\"f_CodeExample\">        },</span><br/>\n<span class=\"f_CodeExample\">        \"gzip\": true,</span><br/>\n<span class=\"f_CodeExample\">        \"rejectUnauthorized\": false</span><br/>\n<span class=\"f_CodeExample\">        },</span></p>\n<ol start=\"3\" style=\"list-style-type:upper-roman\">\n<li class=\"p_CodeExample\" style=\"page-break-inside: avoid;\" value=\"3\"><span style=\"font-size: 15px; font-family: inherit;\">Если в ELMA365 вы используете приватный адрес, добавьте параметры</span><span style=\"font-family: 'Times New Roman',Times,Georgia,serif;\">:</span></li></ol>\n<p class=\"p_CodeExample\" style=\"white-space: normal; page-break-inside: avoid;\"><span class=\"f_CodeExample\">        \"request-filtering-agent\" : {</span><br/>\n<span class=\"f_CodeExample\">            \"allowPrivateIPAddress\": true,</span><br/>\n<span class=\"f_CodeExample\">            \"allowMetaIPAddress\": true</span><br/>\n<span class=\"f_CodeExample\">        },</span></p>\n<p class=\"p_Normal\"> <br/>\nПодробнее про параметры читайте в <a class=\"weblink\" href=\"https://support.r7-office.ru/document_server/settings-ds/nastrojka-servera-dokumentov-dlja-razrabotchikov/\" target=\"_blank\">официальной документации Р7‑Офис</a>.</p>\n<ol start=\"4\" style=\"list-style-type:upper-roman\">\n<li class=\"p_CodeExample\" style=\"white-space: normal; page-break-inside: avoid;\" value=\"4\">Сохраните файл и примените изменённые настройки с помощью команды:</li></ol>\n<p class=\"p_CodeExample\" style=\"white-space: normal; page-break-inside: avoid;\"><span class=\"f_CodeExample\">systemctl restart ds-converter ds-docservice ds-example ds-metrics</span></p>\n</td>\n</tr>\n</table>\n</div>\n<p class=\"p_Normal\"><a class=\"dropdown-toggle\" href=\"javascript:HMToggle('toggle','TOGGLE0186A4')\" style=\"font-style: normal; font-weight: normal; color: #000000; background-color: transparent; text-decoration: none;\">Для сервера Р7‑Офис, установленного в Docker-контейнер</a></p>\n<div class=\"dropdown-toggle-body\" id=\"TOGGLE0186A4\" style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p style=\"margin: 0 0 0 100px;\"><span style=\"font-size: 13px; color: #000000;\"> </span><br/>\n<span style=\"font-size: 15px; font-family: inherit;\">Параметры можно изменить следующими способами:</span></p>\n<ul style=\"list-style-type:disc\">\n<li style=\"margin-top: 0; margin-right: 0; margin-bottom: 0;\">с помощью Docker — в команде запуска контейнера добавьте:</li></ul>\n<ul style=\"list-style-type:disc\"><ul style=\"list-style-type:circle\">\n<li style=\"margin-top: 0; margin-right: 0; margin-bottom: 0;\"><code><b>ALLOW_PRIVATE_IP_ADDRESS=true</b></code><span style=\"font-size: 15px; font-family: inherit;\"> </span>—<span style=\"font-size: 15px; font-family: inherit;\"> </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">е</span><span style=\"font-size: 15px; font-family: inherit;\">сли в ELMA365 вы используете приватный адрес;</span></li><li style=\"margin-top: 0; margin-right: 0; margin-bottom: 0;\"><code><b>USE_UNAUTHORIZED_STORAGE=true</b></code><span style=\"font-size: 15px; font-family: inherit;\"> и </span><code><b>JWT_IN_BODY=true</b></code><span style=\"font-size: 15px; font-family: inherit;\"> </span>—<span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; color: #394149;\"> </span><span style=\"font-size: 15px; font-family: inherit;\"> если в ELMA365 вы используете самоподписанные сертификаты.</span></li></ul></ul>\n<p class=\"p_Normal\">Пример команды:</p>\n<p class=\"p_CodeExample\" style=\"white-space: normal; page-break-inside: avoid;\"><span class=\"f_CodeExample\">sudo docker run -i -t -d -p 80:80 --restart=always \\</span><br/>\n<span class=\"f_CodeExample\">…</span><br/>\n<span class=\"f_CodeExample\">-e ALLOW_PRIVATE_IP_ADDRESS=true \\</span><br/>\n<span class=\"f_CodeExample\">-e USE_UNAUTHORIZED_STORAGE=true \\</span><br/>\n<span class=\"f_CodeExample\">-e JWT_IN_BODY=true r7-office/documentserver:8.3.3.1</span></p>\n<ul style=\"list-style-type:disc\">\n<li style=\"margin-top: 0; margin-right: 0; margin-bottom: 0;\">с помощью Docker Compose — выполните шаги:</li></ul>\n<ol style=\"list-style-type:decimal\">\n<li style=\"margin-top: 0; margin-right: 0; margin-bottom: 0;\" value=\"1\"><span style=\"font-size: 15px; font-family: inherit;\">Остановите приложение </span>Р7‑Офис<span style=\"font-size: 15px; font-family: inherit;\">, используя команду:</span></li></ol>\n<p class=\"p_CodeExample\" style=\"white-space: normal; page-break-inside: avoid;\"><span class=\"f_CodeExample\">docker compose down</span></p>\n<ol style=\"list-style-type:decimal\">\n<li style=\"margin-top: 0; margin-right: 0; margin-bottom: 0;\" value=\"2\"><span style=\"font-size: 15px; font-family: inherit;\">Откройте файл с параметрами, которые описывают приложение </span>Р7‑Офис<span style=\"font-size: 15px; font-family: inherit;\">. Обычно для него используется название </span><code><b>docker-compose.yml</b></code><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">.</span></li><li style=\"margin-top: 0; margin-right: 0; margin-bottom: 0;\" value=\"3\"><span style=\"font-size: 15px; font-family: inherit;\">В файле перейдите к секции </span><code><b>environment</b></code><span style=\"font-size: 15px; font-family: inherit;\"> и задайте следующие значения для параметров:</span></li></ol>\n<ul style=\"list-style-type:disc\">\n<li style=\"margin-top: 0; margin-right: 0; margin-bottom: 0;\"><code><b>USE_UNAUTHORIZED_STORAGE=true</b></code><span style=\"font-size: 15px; font-family: inherit;\"> и </span><code><b>JWT_IN_BODY=true</b></code><span style=\"font-size: 13px;\"> </span>—<span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; color: #394149;\"> е</span><span style=\"font-size: 15px; font-family: inherit;\">сли в ELMA365 вы используете самоподписанные сертификаты;</span></li><li style=\"margin-top: 0; margin-right: 0; margin-bottom: 0;\"><code><b>ALLOW_PRIVATE_IP_ADDRESS=true</b></code><span style=\"font-size: 15px; font-family: inherit;\"> </span>—<span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; color: #394149;\"> </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">е</span><span style=\"font-size: 15px; font-family: inherit;\">сли в ELMA365 вы используете приватный адрес.</span></li></ul>\n<ol style=\"list-style-type:decimal\">\n<li style=\"margin-top: 0; margin-right: 0; margin-bottom: 0;\" value=\"4\"><span style=\"font-size: 15px; font-family: inherit;\">Сохраните файл и запустите </span>Р7‑Офис<span style=\"font-size: 15px; font-family: inherit;\"> c обновлёнными параметрами с помощью команды:</span></li></ol>\n<p class=\"p_CodeExample\" style=\"white-space: normal; page-break-inside: avoid;\"><span class=\"f_CodeExample\">docker compose up</span></p>\n</td>\n</tr>\n</table>\n</div>\n<h2 class=\"p_Heading2\"><a class=\"hmanchor\" id=\"r7-office-install-solution\"></a><span class=\"f_Heading2\">Установка решения «Интеграция с Р7-Офис» в ELMA365</span></h2>\n<p style=\"margin: 0 0 11px 0;\">Решение <span style=\"font-weight: bold;\">Интеграция с Р7-Офис</span> можно <a class=\"weblink\" href=\"https://store.elma365.ru/component/ext_00e82811_87d6_4d46_a5d4_e444ed8a857a-136\" target=\"_blank\">импортировать из каталога ELMA365 Store</a> или <a class=\"weblink\" href=\"/ru/help/platform/upload-solution-file.html\" target=\"_blank\">загрузить в виде файла формата .e365</a>.</p>\n<p style=\"margin: 0 0 11px 0;\">Для этого выполните следующие действия:</p>\n<ol style=\"list-style-type:upper-roman\">\n<li style=\"margin-top: 0; margin-right: 0; margin-bottom: 11px;\" value=\"1\">В ELMA365 перейдите в раздел <span style=\"font-weight: bold;\">Администрирование &gt; Решения </span>и нажмите кнопку <span style=\"font-weight: bold;\">+ Решение </span>в правом верхнем углу.</li><li style=\"margin-top: 0; margin-right: 0; margin-bottom: 11px;\" value=\"2\">В открывшемся окне перейдите в каталог ELMA365 Store или выберите <span style=\"font-weight: bold;\">Загрузить файл</span> и добавьте файл формата <span style=\"font-weight: bold;\">.e365</span>.</li><li value=\"3\">Дождитесь окончания проверки и установки. После этого в систему добавится модуль, обеспечивающий интеграцию с Р7-Офис. </li></ol>\n<h2 class=\"p_Heading2\"><a class=\"hmanchor\" id=\"configure-module\"></a><span class=\"f_Heading2\">Настройка модуля интеграции с Р7-Офис</span></h2>\n<p class=\"p_Normal\">После установки решения перейдите к настройке модуля интеграции с Р7-Офис. На странице <span style=\"font-weight: bold;\">Администрирование &gt; Модули</span> откройте карточку модуля и заполните основные поля:</p>\n<p style=\"margin: 0 0 11px 0;\"><img alt=\"r7-office-3\" height=\"515\" src=\"r7-office-3.png\" style=\"margin:0;width:573px;height:515px;border:none\" width=\"573\"/><span class=\"f_ImageCaption\"> </span></p>\n<ul style=\"list-style-type:disc\">\n<li><span style=\"font-weight: bold;\">Адрес сервера Р7-Офис</span><span style=\"font-weight: bold; color: #ff0000;\">* </span>— адрес до сервера документов Р7-Офис в формате <code><b>https://name.domain.ru/</b></code>;</li><li><span style=\"font-weight: bold;\">Поддерживаемые форматы</span><span style=\"font-weight: bold; color: #ff0000;\">* </span>— отметьте форматы файлов, с которыми вы хотите работать в Р7-Офис. Можно отметить сразу все опции.</li></ul>\n<p>Затем перейдите к дополнительным настройкам:</p>\n<p><img alt=\"r7-office-3-1\" height=\"630\" src=\"r7-office-3-1.png\" style=\"margin:0;width:696px;height:630px;border:none\" width=\"696\"/></p>\n<ul style=\"list-style-type:disc\">\n<li><span style=\"font-family: Inter; font-weight: bold;\">Секрет для формирования JWT</span><span style=\"font-family: Inter;\"> — если на сервере Р7‑Офис </span><span style=\"font-family: Inter; color: #0000ff;\"><a class=\"topiclink\" href=\"r7-office.html#enable-jwt\">включена поддержка JWT</a></span><span style=\"font-family: Inter;\">, укажите в этом поле секретный ключ. Его можно скопировать в конфигурационном файле </span><code><b>local.json</b></code><span style=\"font-family: Inter;\"> в поле </span><code><b>secret</b></code><span style=\"font-family: Inter;\">;</span></li><li><span style=\"font-weight: bold;\">Режим совместимости</span><span style=\"font-weight: bold; color: #ff0000;\">* </span>— отметьте <span style=\"font-weight: bold;\">Да</span>. Эта опция позволяет открывать редактирование файлов из приложений типа <span style=\"font-weight: bold;\">Документ</span> версий системы ELMA365 от 0.9.х;</li><li><span style=\"font-weight: bold;\">Чат</span><span style=\"font-weight: bold; color: #ff0000;\">* </span>— отключает возможности внутреннего чата Р7-Офис в режиме редактирования. Установите <span style=\"font-weight: bold;\">Нет</span>. Эта настройка относится именно к внутренней функции Р7‑Офис;</li><li><span style=\"font-weight: bold;\">Комментарии</span><span style=\"font-weight: bold; color: #ff0000;\">* </span>— опция включает и отключает возможности внутренних комментариев Р7‑Офис в режиме редактирования. Установите <span style=\"font-weight: bold;\">Нет</span>. Эта настройка относится именно к внутренней функции Р7‑Офис;</li><li><span style=\"font-weight: bold;\">Запуск макросов</span><span style=\"font-weight: bold; color: #ff0000;\">*</span> — установите <span style=\"font-weight: bold;\">Да</span>, чтобы включить выполнение макросов в документе;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Плагины</span><span style=\"font-weight: bold; color: #ff0000;\">*</span> — установите <span style=\"font-weight: bold;\">Да</span>, чтобы включить поддержку плагинов Р7‑Офис;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Рецензирование</span> — установите <span style=\"font-weight: bold;\">Да</span>, чтобы при редактировании файла автоматически включался режим отслеживания изменений. <span style=\"font-family: Inter;\">Все изменения, внесённые в этом режиме, фиксируются как правки и выделяются цветом. Их можно принять или отклонить. Пользователи могут индивидуально включать и отключать отслеживание изменений при редактировании определённого документа на вкладке </span><span style=\"font-family: Inter; font-weight: bold;\">Совместная работа</span><span style=\"font-family: Inter;\">;</span></li><li class=\"p_Normal\"><span style=\"font-family: Inter; font-weight: bold;\">Отображение изменений</span><span style=\"font-family: Inter;\"> — выберите, как отображаются изменения, внесённые в документ в режиме рецензирования. Опция доступна для сервера Р7‑Офис версии 7.0 и выше:</span></li></ul>\n<ul style=\"list-style-type:disc\"><ul style=\"list-style-type:circle\">\n<li><span style=\"font-family: Inter; font-weight: bold;\">Подсветка </span><span style=\"font-family: Inter;\">— опция используется по умолчанию. Во время просмотра документа правки, добавленные в режиме отслеживания изменений, выделены цветом. При нажатии на отредактированный текст можно посмотреть автора, дату и детали исправлений. Все вносимые изменения отображаются для пользователя в реальном времени.</span></li></ul></ul>\n<p style=\"margin: 0 0 0 58px;\"><span style=\"font-family: Inter;\">В режиме редактирования можно принять или отклонить правки, нажав на выделенный цветом текст;</span></p>\n<ul style=\"list-style-type:disc\"><ul style=\"list-style-type:circle\">\n<li><span style=\"font-family: Inter; font-weight: bold;\">Не показывать </span><span style=\"font-family: Inter;\">— в режиме просмотра правки не видны, пока их не одобрят. Чтобы увидеть последние принятые правки, а также изменения, внесённые с отключённым рецензированием, нужно обновить страницу. Как только все пользователи заканчивают редактирование, и новая версия документа добавляется в систему, страница обновляется автоматически.</span></li></ul></ul>\n<p style=\"margin: 0 0 0 58px;\"><span style=\"font-family: Inter;\">В режиме редактирования все ещё не принятые исправления выделены цветом. Их можно принять или отклонить, нажав на них;</span></p>\n<ul style=\"list-style-type:disc\"><ul style=\"list-style-type:circle\">\n<li><span style=\"font-family: Inter; font-weight: bold;\">Показывать с изменениями</span><span style=\"font-family: Inter;\"> — исправления, внесённые в режиме рецензирования, при просмотре документа отображаются без выделения, как если бы они уже были приняты. Если рецензирование отключено, в режиме просмотра можно увидеть изменение текста в моменте.</span></li></ul></ul>\n<p class=\"p_Normal\" style=\"text-indent: -1px; margin: 0 0 0 60px;\"><span style=\"font-family: Inter;\">При редактировании документа правки, которые ещё не приняты, выделены цветом. Их можно принять или отклонить, </span>нажав на них.</p>\n<ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\"><span style=\"font-weight: bold;\">Показывать кнопку \"Печать\"</span> — по умолчанию печать документов доступна только с боковой панели формы просмотра. Вы можете дополнительно включить отображение кнопки <img alt=\"onlyoffice-5\" height=\"22\" src=\"onlyoffice-5.png\" style=\"margin:0;width:26px;height:22px;border:none\" width=\"26\"/> в правом верхнем углу редактора модуля, выбрав <span style=\"font-weight: bold;\">Да</span>. </li></ul>\n<p class=\"p_Normal\">После заполнения полей сохраните настройки.</p>\n<h2 class=\"p_Heading2\"><a class=\"hmanchor\" id=\"r7-office-widget\"></a><span class=\"f_Heading2\">Настройка виджета «Просмотр и редактирование в Р7-Офис»</span></h2>\n<p class=\"p_Normal\">Чтобы в элементе приложения открывать файл сразу на редактирование, разместите на форме виджет <span style=\"font-weight: bold;\">Просмотр и редактирование в Р7-Офис</span>. </p>\n<p class=\"p_Normal\">Для настройки виджета заполните поля:</p>\n<p style=\"margin: 0 0 11px 0;\"><img alt=\"r7-office-6\" height=\"308\" src=\"r7-office-6.png\" style=\"margin:0;width:651px;height:308px;border:none\" width=\"651\"/></p>\n<ul style=\"list-style-type:disc\">\n<li style=\"margin-top: 0; margin-right: 0; margin-bottom: 11px;\"><span style=\"font-weight: bold;\">File</span> — нажмите на значок <img alt=\"chain_icon\" height=\"17\" src=\"chain_icon.png\" style=\"margin:0;width:17px;height:17px;border:none\" width=\"17\"/>  и выберите свойство типа <span style=\"font-weight: bold;\">Файлы</span> из контекста приложения или бизнес‑процесса;</li><li style=\"margin-top: 0; margin-right: 0; margin-bottom: 11px;\"><span style=\"font-weight: bold;\">Отображать в режиме редактирования</span> — выберите <span style=\"font-weight: bold;\">Да</span>, чтобы после загрузки файл по умолчанию был открыт для внесения изменений. </li></ul>\n<p class=\"p_Normal\">Виджет <span style=\"font-weight: bold;\">Просмотр и редактирование в Р7-Офис</span> доступен только после включения модуля интеграции с Р7-Офис. При отключении модуля на формах, где был размещён виджет, появится сообщение об ошибке.</p>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Использование Р7-Офис</span></h2>\n<p class=\"p_Normal\">Сервис Р7-Офис по умолчанию используется для просмотра и редактирования файлов на форме <a class=\"topiclink\" href=\"r7-office.html#r7-in-docs\">приложения типа Документ</a> и в разделе <a class=\"topiclink\" href=\"r7-office.html#r7-in-files\">Файлы</a>. </p>\n<p class=\"p_Normal\">Для работы с файлами в приложениях других типов разместите на их формах <a class=\"topiclink\" href=\"r7-office.html#r7-on-forms\">специальные виджеты</a>. </p>\n<h3 class=\"p_Heading3\"><a class=\"hmanchor\" id=\"r7-in-docs\"></a><span class=\"f_Heading3\">Р7-Офис для работы с приложением типа «Документ»</span></h3>\n<p class=\"p_Normal\">В <a class=\"weblink\" href=\"/ru/help/ecm/360009923631.html\" target=\"_blank\">приложении типа Документ</a> вы можете добавлять файл при создании элемента. После этого документ отобразится на форме с помощью Р7-Офис. </p>\n<p style=\"margin: 0 0 11px 0;\"><img alt=\"r7-office-7\" height=\"692\" src=\"r7-office-7.png\" style=\"margin:0;width:1139px;height:692px;border:none\" width=\"1139\"/></p>\n<p class=\"p_Normal\">Чтобы внести правки в документ, нажмите кнопку <span style=\"font-weight: bold;\">Редактировать</span>.</p>\n<p class=\"p_Normal\">По умолчанию в Р7-Офис включён режим быстрого редактирования. Все изменения сохраняются каждые несколько секунд. Если вы редактируете или просматриваете документ в то же время, когда другой пользователь его редактирует, вы увидите исправления сразу.</p>\n<p class=\"p_Normal\">При необходимости вы можете выбрать другой режим совместной работы в Р7-Офис или переключать режим для определённого документа.</p>\n<p style=\"margin: 0 0 11px 0;\"><img alt=\"r7-office-9\" height=\"661\" src=\"r7-office-9.png\" style=\"margin:0;width:1026px;height:661px;border:none\" width=\"1026\"/></p>\n<p class=\"p_Normal\">После того как все пользователи отредактировали документ, новая версия появится в системе в течение 5–10 секунд. </p>\n<h3 class=\"p_Heading3\"><a class=\"hmanchor\" id=\"r7-in-files\"></a><span class=\"f_Heading3\">Р7-Офис для работы в разделе «Файлы»</span></h3>\n<p class=\"p_Normal\">В разделе <a class=\"weblink\" href=\"/ru/help/platform/360014164452.html\" target=\"_blank\">Файлы</a> при открытии документа предпросмотр происходит с помощью Р7-Офис.</p>\n<p style=\"margin: 0 0 11px 0;\"><img alt=\"r7-office-8\" height=\"642\" src=\"r7-office-8.png\" style=\"margin:0;width:953px;height:642px;border:none\" width=\"953\"/></p>\n<p class=\"p_Normal\">Чтобы перейти в режим редактирования и внести правки в документ, нажмите кнопку <span style=\"font-weight: bold;\">Редактировать</span> на верхней панели страницы просмотра файла. </p>\n<p class=\"p_Normal\">Возле аватара пользователя, который редактирует файл, отображается значок карандаша.</p>\n<p class=\"p_Normal\">После внесения изменений можно:</p>\n<ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\">вернуться в режим просмотра, нажав на значок <img alt=\"onlyoffice-17\" height=\"29\" src=\"onlyoffice-17.png\" style=\"margin:0;width:22px;height:29px;border:none\" width=\"22\"/> в правом верхнем углу окна;</li><li class=\"p_Normal\">закрыть файл, нажав на крестик. </li></ul>\n<p class=\"p_Normal\">В систему будет добавлена <a class=\"topiclink\" href=\"360014353991.html#versions\">новая версия файла</a>, которая станет текущей.</p>\n<h3 class=\"p_Heading3\"><a class=\"hmanchor\" id=\"r7-on-forms\"></a><span class=\"f_Heading3\">Р7-Офис для работы в приложениях типа «Стандартное» и «Событие»</span></h3>\n<p class=\"p_Normal\">Для просмотра файлов на формах приложений типа <span style=\"font-weight: bold;\">Стандартное</span> и <span style=\"font-weight: bold;\">Событие</span> вы можете воспользоваться виджетом <a class=\"weblink\" href=\"/ru/help/platform/view_file_widget.html\" target=\"_blank\">Просмотр файла</a>.</p>\n<p class=\"p_Normal\">Чтобы открывать файл на редактирование, разместите на форме приложения виджет <a class=\"topiclink\" href=\"r7-office.html#r7-office-widget\">Просмотр и редактирование в Р7‑Офис</a>.</p>\n<div class=\"bottom-nav\">\n<a class=\"topic__navi_prev\" href=\"onlyoffice.html\" id=\"prev-link\">\n<span class=\"bottom-nav__arrow bottom-nav__arrow--prev\"></span> <span class=\"bottom-nav__link\">onlyoffice.html</span>\n</a>\n<a class=\"topic__navi_next\" href=\"wopi.html\" id=\"next-link\">\n<span class=\"bottom-nav__link\">wopi.html</span> <span class=\"bottom-nav__arrow bottom-nav__arrow--next\"></span>\n</a>\n</div>\n<!-- добавляет на страницу строку блок Была ли статья полезной?  -->\n<div class=\"feedback-wrap\"><div class=\"feedback\" id=\"feedback\"><span><b>Была ли статья полезной?</b></span><form action=\"\" class=\"feedback-form\" id=\"feedback-form\" method=\"POST\"><div class=\"feedback__popup feedback__popup-response\" id=\"feedback__popup_thx\">Спасибо за ваш отзыв!</div><div id=\"feedback-success-popup\"><div class=\"wrap\"><button class=\"feedback-popup-close\" type=\"button\">×</button><svg fill=\"none\" height=\"44\" viewbox=\"0 0 44 44\" width=\"44\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#clip0_212_2187)\"><path d=\"M22 0.6875C10.2294 0.6875 0.6875 10.2294 0.6875 22C0.6875 33.7706 10.2294 43.3125 22 43.3125C33.7706 43.3125 43.3125 33.7706 43.3125 22C43.3125 10.2294 33.7706 0.6875 22 0.6875ZM22 40.5625C11.8023 40.5625 3.4375 32.3078 3.4375 22C3.4375 11.8024 11.6922 3.4375 22 3.4375C32.1977 3.4375 40.5625 11.6922 40.5625 22C40.5625 32.1976 32.3078 40.5625 22 40.5625ZM34.1713 16.933L18.6613 32.3186C18.257 32.7197 17.604 32.7171 17.203 32.3128L9.82283 24.873C9.42176 24.4686 9.42434 23.8157 9.82867 23.4146L10.5609 22.6884C10.9652 22.2873 11.6181 22.2899 12.0192 22.6942L17.9468 28.6697L31.9926 14.7366C32.3969 14.3356 33.0498 14.3382 33.4509 14.7425L34.1772 15.4747C34.5783 15.879 34.5757 16.532 34.1713 16.933Z\" fill=\"#27AE60\"></path></g><defs><clippath id=\"clip0_212_2187\"><rect fill=\"white\" height=\"44\" width=\"44\"></rect></clippath></defs></svg><p>Ваш отзыв успешно отправлен!</p><span>Спасибо за обратную связь.</span></div></div><div class=\"feedback__popup\" id=\"feedback__popup_why\"><button class=\"feedback-popup-close\" type=\"button\">×</button><div class=\"feedback__popup-header\">Уточните, почему:</div><input id=\"bad_recommendation\" name=\"category\" type=\"radio\" value=\"bad_recommendation\"/><label for=\"bad_recommendation\">Рекомендации не помогли</label><input id=\"difficult_text\" name=\"category\" type=\"radio\" value=\"difficult_text\"/><label for=\"difficult_text\">Текст трудно понять</label><input id=\"no_answer\" name=\"category\" type=\"radio\" value=\"no_answer\"/><label for=\"no_answer\">Нет ответа на мой вопрос</label><input id=\"bad_header\" name=\"category\" type=\"radio\" value=\"bad_header\"/><label for=\"bad_header\">Содержание статьи не соответствует заголовку</label><input id=\"other_reason\" name=\"category\" type=\"radio\" value=\"other_reason\"/><label for=\"other_reason\">Другая причина</label></div><div class=\"feedback__popup\" id=\"feedback__popup-other\"><button class=\"feedback-popup-close\" type=\"button\">×</button> <div class=\"feedback__popup-header\">Расскажите, что вам не понравилось в статье:</div><textarea class=\"feedback__textarea\" id=\"\" name=\"other\"></textarea><input class=\"feedback__other-btn\" type=\"submit\" value=\"Отправить\"/></div><div class=\"feedback-form__btn-group\"><input id=\"feedback__useful_yes\" name=\"useful\" type=\"radio\" value=\"true\"/><label for=\"feedback__useful_yes\"><img src=\"like.svg\"/><span class=\"feedback-form__btn-group_yes-btn\">Да</span></label><input id=\"feedback__useful_no\" name=\"useful\" type=\"radio\" value=\"false\"/><label for=\"feedback__useful_no\"><img src=\"dislike.svg\"/><span class=\"feedback-form__btn-group_no-btn\">Нет</span></label></div><select name=\"category\"><option disabled=\"\">Выберите вариант</option><option selected=\"\" value=\"bad_recommendation\">Рекомендации не помогли</option><option value=\"difficult_text\">Текст трудно понять</option><option value=\"no_answer\">Нет ответа на мой вопрос</option><option value=\"bad_header\">Содержание статьи не соответствует заголовку</option><option value=\"other_reason\">Другая причина</option></select><input type=\"submit\"/></form></div></div>\n</section>\n</div>\n<aside class=\"article__sidebar\" style=\"display:none\">\n<input type=\"checkbox\"/>\n<div class=\"article__arrow\"></div>\n<div class=\"table-of-contents elma365-right\" id=\"toc2Content\">\n<h3 class=\"h3-toc\">В этой статье</h3>\n<nav id=\"toc2\"></nav>\n</div>\n</aside>\n</div>\n</article>\n</main>\n<footer class=\"footer\">\n<div class=\"footer-container\">\n<div class=\"footer-mobile\">\n<ul class=\"footer-mobile__list\"><li><a href=\"https://api.elma365.com/ru/\" target=\"_blank\">API</a></li><li><a href=\"https://tssdk.elma365.com/\" target=\"_blank\">TS SDK</a></li><li><a href=\"https://community.elma365.com/\" target=\"_blank\">Community</a></li><li><a href=\"https://elma-academy.com/ru/elma365\" target=\"_blank\">Академия</a></li></ul><ul class=\"footer-mobile__list\"><li><a href=\"https://elma365.com/ru/help/platform/get-trial.html\">Платформа</a></li><li><a href=\"https://elma365.com/ru/help/ecm/ecm-functions.html\">ECM</a></li><li><a href=\"https://elma365.com/ru/help/service/service-functions.html\">Service</a></li><li><a href=\"https://elma365.com/ru/help/projects/projects-functions.html\">Проекты</a></li></ul>\n</div>\n<div class=\"container\">\n<div class=\"footer-wrap\">\n<div><span class=\"mobile-question-popup\">Отправить фидбэк</span><form action=\"\" class=\"question__popup question-xs\" id=\"question__popup\" method=\"POST\"><div class=\"question-wrap\"><span class=\"close\"></span><span class=\"title\">Задать вопрос</span><label for=\"help_question\" style=\"display: none;\"></label><textarea id=\"help_question\" name=\"help_question\"></textarea><input type=\"submit\" value=\"Отправить\"/></div></form><div class=\"hidden fade-in question-success-xs\">Ваш фидбэк отправлен.</div></div>\n<div class=\"footer-flex-b\">\n<div class=\"footer-top\">\n<span class=\"footer-copy\">© 2025 \n              ELMA365\n            \n            \n          </span>\n<a class=\"sk-img\" href=\"https://navigator.sk.ru/orn/1122971\" target=\"_blank\">\n<img alt=\"sk icon\" class=\"footer-img\" height=\"34\" src=\"sk-resident.svg\" width=\"117\"/>\n</a>\n</div>\n<div class=\"footer-line\">\n<div class=\"footer-line-copy\">\n<span class=\"footer-copy\">© 2025 \n                  ELMA365\n                \n                \n              </span>\n</div>\n<ul class=\"footer-list\">\n<li class=\"footer-item footer-url-elma\"><a class=\"footer-link footer-url-link-elma\" href=\"https://elma365.com/ru/\" style=\"color: #0D4A75;\" target=\"_blank\"><img alt=\"browse icon\" class=\"footer-img footer-img-elma-url\" src=\"browse.svg\"/>elma365.com</a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://vkvideo.ru/@elma_bpm\" target=\"_blank\"><img alt=\"vk-video icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"vk-video.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://vk.com/elma_bpm\" target=\"_blank\"><img alt=\"vk icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"vk.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://t.me/elmaday\" target=\"_blank\"><img alt=\"telegram icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"telegram.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://dzen.ru/elma\" target=\"_blank\"><img alt=\"dzen icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"social_dzen.svg\" width=\"20\"/></a></li>\n<li class=\"footer-item sk-footer-img\">\n<a class=\"sk-img\" href=\"https://navigator.sk.ru/orn/1122971\" target=\"_blank\">\n<img alt=\"sk icon\" class=\"footer-img\" height=\"34\" src=\"sk-resident.svg\" width=\"117\"/>\n</a>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<a class=\"arrow-top\" href=\"#\"></a>\n</div>\n</footer>\n<!--    <script type=\"text/javascript\" src=\"jquery1.min.js\"></script>-->\n<iframe name=\"hmnavigation\" style=\"display:none!important\"></iframe>\n<!--<script src=\"./jquery-ui.js\"></script> -->\n<script src=\"./jquery-ui.min.js\"></script>\n<!--script src=\"//cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script-->\n<script src=\"./jquery.tocify.min.js\"></script>\n<script src=\"./TypoReporter.min.js\"></script>\n<script src=\"./google-search.js\"></script>\n<script src=\"./main.js\"></script>\n<script type=\"text/javascript\">\nHMInitToggle('TOGGLE0186A1','hm.type','dropdown','hm.state','0');\nHMInitToggle('TOGGLE0186A2','hm.type','dropdown','hm.state','0');\nHMInitToggle('TOGGLE0186A3','hm.type','dropdown','hm.state','0');\nHMInitToggle('TOGGLE0186A4','hm.type','dropdown','hm.state','0');\n</script>\n</body>\n</html>\n",
  "plain_text": "Интеграция с Р7-Офис ﻿ Платформа CSP CRM+CX Проекты Service КЭДО Бизнес-решения Academy Community API SDK Сайт ELMA365 Интеграция с Р7-Офис Решение для просмотра и редактирования документов онлайн в интерфейсе ELMA365 с помощью сервера Р7‑Офис. начало внимание Для корректной работы рекомендуем использовать сервер Р7‑Офис версии 7.4 . конец внимание Интеграция с сервером Р7-Офис осуществляется в несколько этапов: Установка сервера Р7-Офис. Установка решения Интеграция Р7-Офис в систему ELMA365 . Настройка модуля интеграции с Р7-Офис , входящего в состав решения. Установка сервера Р7-Офис Для работы требуется установленный Сервер документов Р7-Офис . Перейдите на официальный сайт , чтобы загрузить и приобрести решение. На сайте производителя вы также можете ознакомиться с инструкциями по установке Р7-Офис . Настройка поддержки JWT В ELMA365 поддерживается работа с JWT‑токенами, которые используются для обеспечения дополнительного уровня безопасности при аутентификации. Начиная с версии 7.2, валидация JWT включена по умолчанию. Для более ранних версий её необходимо включить. Включение валидации JWT-токенов на стороне Р7-Офис Откройте конфигурационный файл local.json по следующему пути: для Linux: /etc/Р7/documentserver/local.json ; для Windows: %ProgramFiles%\\Р7\\DocumentServer\\config\\local.json . Отредактируйте файл согласно инструкциям на официальном сайте . Убедитесь, что в файле в поле token добавлены следующие заголовки: \"inbox\": { \"header\": \"AuthorizationJWT\" }, \"outbox\": { \"header\": \"AuthorizationJWT\" } Скопируйте секретный ключ, указанный в поле secret . Сохраните файл. Перезапустите службы, чтобы изменения вступили в силу. Если Р7-Офис установлен в Docker-контейнер, для перезапуска используйте команду: systemctl restart ds-converter ds-docservice ds-example ds-metrics В случае установки напрямую на сервер используйте команду: supervisorctl restart all После этого необходимо указать секретный ключ при настройке модуля в ELMA365. Если вы не используете JWT, для корректной работы модуля отключите проверку токенов в настройках Р7‑Офис. Отключение валидации JWT-токенов на стороне Р7-Офис Откройте конфигурационный файл local.json по следующему пути: для Linux: /etc/Р7/documentserver/local.json ; для Windows: %ProgramFiles%\\Р7\\DocumentServer\\config\\local.json . Для полей browser , inbox и outbox установите значение false . Сохраните изменения. Перезапустите службы, чтобы изменения вступили в силу. Если Р7-Офис установлен в Docker-контейнер, для перезапуска используйте команду: systemctl restart ds-converter ds-docservice ds-example ds-metrics В случае установки напрямую на сервер используйте команду: supervisorctl restart all Настройка поддержки самоподписанного сертификата и приватного адреса По умолчанию в Р7‑Офис блокируется получение файлов из хранилища, в котором настроены самоподписанный сертификат или приватный адрес. Если в ELMA365 вы используете такие настройки, измените параметры на сервере Р7‑Офис. Порядок внесения изменений зависит от способа установки сервера. Для сервера Р7‑Офис, установленного на локальном компьютере Откройте конфигурационный файл local.json по пути: для Linux: /etc/r7-office/documentserver/local.json ; для Windows: %ProgramFiles%\\R7-OFFICE\\DocumentServer\\config\\local.json . Если в ELMA365 вы используете самоподписанные сертификаты, добавьте параметры: \"inbox\": { \"header\": \"AuthorizationJWT\", \"inBody\": true }, \"outbox\": { \"header\": \"AuthorizationJWT\", \"inBody\": true } … \"requestDefaults\": { \"headers\": { \"User-Agent\": \"Node.js/6.13\", \"Connection\": \"Keep-Alive\" }, \"gzip\": true, \"rejectUnauthorized\": false }, Если в ELMA365 вы используете приватный адрес, добавьте параметры : \"request-filtering-agent\" : { \"allowPrivateIPAddress\": true, \"allowMetaIPAddress\": true }, Подробнее про параметры читайте в официальной документации Р7‑Офис . Сохраните файл и примените изменённые настройки с помощью команды: systemctl restart ds-converter ds-docservice ds-example ds-metrics Для сервера Р7‑Офис, установленного в Docker-контейнер Параметры можно изменить следующими способами: с помощью Docker — в команде запуска контейнера добавьте: ALLOW_PRIVATE_IP_ADDRESS=true — е сли в ELMA365 вы используете приватный адрес; USE_UNAUTHORIZED_STORAGE=true и JWT_IN_BODY=true — если в ELMA365 вы используете самоподписанные сертификаты. Пример команды: sudo docker run -i -t -d -p 80:80 --restart=always \\ … -e ALLOW_PRIVATE_IP_ADDRESS=true \\ -e USE_UNAUTHORIZED_STORAGE=true \\ -e JWT_IN_BODY=true r7-office/documentserver:8.3.3.1 с помощью Docker Compose — выполните шаги: Остановите приложение Р7‑Офис , используя команду: docker compose down Откройте файл с параметрами, которые описывают приложение Р7‑Офис . Обычно для него используется название docker-compose.yml . В файле перейдите к секции environment и задайте следующие значения для параметров: USE_UNAUTHORIZED_STORAGE=true и JWT_IN_BODY=true — е сли в ELMA365 вы используете самоподписанные сертификаты; ALLOW_PRIVATE_IP_ADDRESS=true — е сли в ELMA365 вы используете приватный адрес. Сохраните файл и запустите Р7‑Офис c обновлёнными параметрами с помощью команды: docker compose up Установка решения «Интеграция с Р7-Офис» в ELMA365 Решение Интеграция с Р7-Офис можно импортировать из каталога ELMA365 Store или загрузить в виде файла формата .e365 . Для этого выполните следующие действия: В ELMA365 перейдите в раздел Администрирование > Решения и нажмите кнопку + Решение в правом верхнем углу. В открывшемся окне перейдите в каталог ELMA365 Store или выберите Загрузить файл и добавьте файл формата .e365 . Дождитесь окончания проверки и установки. После этого в систему добавится модуль, обеспечивающий интеграцию с Р7-Офис. Настройка модуля интеграции с Р7-Офис После установки решения перейдите к настройке модуля интеграции с Р7-Офис. На странице Администрирование > Модули откройте карточку модуля и заполните основные поля: Адрес сервера Р7-Офис * — адрес до сервера документов Р7-Офис в формате https://name.domain.ru/ ; Поддерживаемые форматы * — отметьте форматы файлов, с которыми вы хотите работать в Р7-Офис. Можно отметить сразу все опции. Затем перейдите к дополнительным настройкам: Секрет для формирования JWT — если на сервере Р7‑Офис включена поддержка JWT , укажите в этом поле секретный ключ. Его можно скопировать в конфигурационном файле local.json в поле secret ; Режим совместимости * — отметьте Да . Эта опция позволяет открывать редактирование файлов из приложений типа Документ версий системы ELMA365 от 0.9.х; Чат * — отключает возможности внутреннего чата Р7-Офис в режиме редактирования. Установите Нет . Эта настройка относится именно к внутренней функции Р7‑Офис; Комментарии * — опция включает и отключает возможности внутренних комментариев Р7‑Офис в режиме редактирования. Установите Нет . Эта настройка относится именно к внутренней функции Р7‑Офис; Запуск макросов * — установите Да , чтобы включить выполнение макросов в документе; Плагины * — установите Да , чтобы включить поддержку плагинов Р7‑Офис; Рецензирование — установите Да , чтобы при редактировании файла автоматически включался режим отслеживания изменений. Все изменения, внесённые в этом режиме, фиксируются как правки и выделяются цветом. Их можно принять или отклонить. Пользователи могут индивидуально включать и отключать отслеживание изменений при редактировании определённого документа на вкладке Совместная работа ; Отображение изменений — выберите, как отображаются изменения, внесённые в документ в режиме рецензирования. Опция доступна для сервера Р7‑Офис версии 7.0 и выше: Подсветка — опция используется по умолчанию. Во время просмотра документа правки, добавленные в режиме отслеживания изменений, выделены цветом. При нажатии на отредактированный текст можно посмотреть автора, дату и детали исправлений. Все вносимые изменения отображаются для пользователя в реальном времени. В режиме редактирования можно принять или отклонить правки, нажав на выделенный цветом текст; Не показывать — в режиме просмотра правки не видны, пока их не одобрят. Чтобы увидеть последние принятые правки, а также изменения, внесённые с отключённым рецензированием, нужно обновить страницу. Как только все пользователи заканчивают редактирование, и новая версия документа добавляется в систему, страница обновляется автоматически. В режиме редактирования все ещё не принятые исправления выделены цветом. Их можно принять или отклонить, нажав на них; Показывать с изменениями — исправления, внесённые в режиме рецензирования, при просмотре документа отображаются без выделения, как если бы они уже были приняты. Если рецензирование отключено, в режиме просмотра можно увидеть изменение текста в моменте. При редактировании документа правки, которые ещё не приняты, выделены цветом. Их можно принять или отклонить, нажав на них. Показывать кнопку \"Печать\" — по умолчанию печать документов доступна только с боковой панели формы просмотра. Вы можете дополнительно включить отображение кнопки в правом верхнем углу редактора модуля, выбрав Да . После заполнения полей сохраните настройки. Настройка виджета «Просмотр и редактирование в Р7-Офис» Чтобы в элементе приложения открывать файл сразу на редактирование, разместите на форме виджет Просмотр и редактирование в Р7-Офис . Для настройки виджета заполните поля: File — нажмите на значок и выберите свойство типа Файлы из контекста приложения или бизнес‑процесса; Отображать в режиме редактирования — выберите Да , чтобы после загрузки файл по умолчанию был открыт для внесения изменений. Виджет Просмотр и редактирование в Р7-Офис доступен только после включения модуля интеграции с Р7-Офис. При отключении модуля на формах, где был размещён виджет, появится сообщение об ошибке. Использование Р7-Офис Сервис Р7-Офис по умолчанию используется для просмотра и редактирования файлов на форме приложения типа Документ и в разделе Файлы . Для работы с файлами в приложениях других типов разместите на их формах специальные виджеты . Р7-Офис для работы с приложением типа «Документ» В приложении типа Документ вы можете добавлять файл при создании элемента. После этого документ отобразится на форме с помощью Р7-Офис. Чтобы внести правки в документ, нажмите кнопку Редактировать . По умолчанию в Р7-Офис включён режим быстрого редактирования. Все изменения сохраняются каждые несколько секунд. Если вы редактируете или просматриваете документ в то же время, когда другой пользователь его редактирует, вы увидите исправления сразу. При необходимости вы можете выбрать другой режим совместной работы в Р7-Офис или переключать режим для определённого документа. После того как все пользователи отредактировали документ, новая версия появится в системе в течение 5–10 секунд. Р7-Офис для работы в разделе «Файлы» В разделе Файлы при открытии документа предпросмотр происходит с помощью Р7-Офис. Чтобы перейти в режим редактирования и внести правки в документ, нажмите кнопку Редактировать на верхней панели страницы просмотра файла. Возле аватара пользователя, который редактирует файл, отображается значок карандаша. После внесения изменений можно: вернуться в режим просмотра, нажав на значок в правом верхнем углу окна; закрыть файл, нажав на крестик. В систему будет добавлена новая версия файла , которая станет текущей. Р7-Офис для работы в приложениях типа «Стандартное» и «Событие» Для просмотра файлов на формах приложений типа Стандартное и Событие вы можете воспользоваться виджетом Просмотр файла . Чтобы открывать файл на редактирование, разместите на форме приложения виджет Просмотр и редактирование в Р7‑Офис . onlyoffice.html wopi.html Была ли статья полезной? Спасибо за ваш отзыв! × Ваш отзыв успешно отправлен! Спасибо за обратную связь. × Уточните, почему: Рекомендации не помогли Текст трудно понять Нет ответа на мой вопрос Содержание статьи не соответствует заголовку Другая причина × Расскажите, что вам не понравилось в статье: Да Нет Выберите вариант Рекомендации не помогли Текст трудно понять Нет ответа на мой вопрос Содержание статьи не соответствует заголовку Другая причина В этой статье API TS SDK Community Академия Платформа ECM Service Проекты Отправить фидбэк Задать вопрос Ваш фидбэк отправлен. © 2025 ELMA365 © 2025 ELMA365 elma365.com",
  "links": [
    "https://elma365.com/ru/help",
    "https://elma365.com/ru/help/platform/get-trial.html",
    "https://elma365.com/ru/help/ecm/ecm-functions.html",
    "https://elma365.com/ru/help/crm/crm-functions.html",
    "https://elma365.com/ru/help/projects/projects-functions.html",
    "https://elma365.com/ru/help/service/service-functions.html",
    "https://elma365.com/ru/help/kedo/kedo.html",
    "https://elma365.com/ru/help/business_solutions/-elma365-store.html",
    "https://elma-academy.com/ru/",
    "https://community.elma365.com/ru/",
    "https://api.elma365.com/ru/",
    "https://tssdk.elma365.com/latest/",
    "https://elma365.com/ru/",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/r7-office.html",
    "https://elma365.com/ru/help/platform/install-r7-office.html",
    "https://r7-office.ru/",
    "https://support.r7-office.ru/hc/ru/categories/4650763337116-%D0%94%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D1%8F-%D0%B4%D0%BB%D1%8F-%D1%81%D0%BA%D0%B0%D1%87%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F",
    "https://support.r7-office.ru/document_server/api-document_server/more_api/%D0%BF%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D1%8C-%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5-api/signature-2/",
    "https://support.r7-office.ru/document_server/settings-ds/nastrojka-servera-dokumentov-dlja-razrabotchikov/",
    "https://store.elma365.ru/component/ext_00e82811_87d6_4d46_a5d4_e444ed8a857a-136",
    "https://elma365.com/ru/help/platform/upload-solution-file.html",
    "https://elma365.com/ru/help/ecm/360009923631.html",
    "https://elma365.com/ru/help/platform/360014164452.html",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/360014353991.html",
    "https://elma365.com/ru/help/platform/view_file_widget.html",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/onlyoffice.html",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/wopi.html",
    "https://tssdk.elma365.com/",
    "https://community.elma365.com/",
    "https://elma-academy.com/ru/elma365",
    "https://navigator.sk.ru/orn/1122971",
    "https://vkvideo.ru/@elma_bpm",
    "https://vk.com/elma_bpm",
    "https://t.me/elmaday",
    "https://dzen.ru/elma"
  ],
  "last_crawled": "2025-11-29T21:58:07.823688",
  "metadata": {
    "depth": 10,
    "saved_at": "2025-11-29T21:58:07.879423"
  }
}