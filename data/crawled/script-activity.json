{
  "doc_id": "script-activity",
  "url": "https://elma365.com/ru/help/business_solutions/ru/help/crm/script-activity.html",
  "title": "Скрипт",
  "breadcrumbs": [
    "Модули расширения системы",
    "Пользовательские модули",
    "Действия в бизнес-процессах"
  ],
  "section": "Модули расширения системы > Пользовательские модули > Действия в бизнес-процессах | [business_solutions]",
  "html": "<!DOCTYPE html>\n<html lang=\"ru\">\n<head>\n<title>Скрипт</title>\n<meta content=\"Help+Manual\" name=\"generator\"/>\n<meta content=\"\" name=\"keywords\"/>\n<meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>\n<meta content=\"IE=edge\" http-equiv=\"X-UA-Compatible\"/>\n<meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"/>\n<meta content=\"Действие типа Скрипт можно использовать для создания интеграций, например, для отправки запросов во внешнюю систему. Настройки действия выполняются на трёх вкладках: Настройки,...\" name=\"description\"/>\n<meta content=\"\" name=\"picture\"/>\n<meta content=\"website\" property=\"og:type\"/>\n<meta content=\"Cправка по Low-code платформе ELMA365\" property=\"og:title\"/>\n<meta content=\"https://elma365.com/ru/help\" property=\"og:url\"/>\n<meta content=\"\" property=\"og:image\"/>\n<meta content=\"ELMA365\" property=\"og:site_name\"/>\n<link href=\"favicon.png\" rel=\"icon\" type=\"image/png\"/>\n<link href=\"https://elma365.com/ru/help/platform/script-activity.html\" rel=\"canonical\"/>\n<link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap\" rel=\"stylesheet\"/>\n<link href=\"./jquery-ui.min.css\" rel=\"stylesheet\"/>\n<link href=\"default.css\" rel=\"stylesheet\"/>\n<link href=\"./search-yandex.css\" rel=\"stylesheet\"/>\n<link href=\"./article.css\" rel=\"stylesheet\"/>\n<link href=\"./glossary.css\" rel=\"stylesheet\"/>\n<link href=\"./theme.css\" rel=\"stylesheet\"/>\n<link href=\"./tooltipster.bundle.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n<script src=\"jquery.js\" type=\"text/javascript\"></script>\n<script src=\"./tooltipster.bundle.min.js\" type=\"text/javascript\"></script>\n<script type=\"text/javascript\">\n        $(document).ready($('.tooltip').tooltipster({\n            contentCloning: true,\n            theme: 'tooltipster-borderless',\n        }));\n    </script>\n<script src=\"helpman_settings.js\" type=\"text/javascript\"></script>\n<script src=\"helpman_topicinit.js\" type=\"text/javascript\"></script>\n<script src=\"highlight.js\" type=\"text/javascript\"></script>\n<script type=\"text/javascript\">\n     $(document).ready(function(){highlight();});\n   </script>\n</head>\n<body>\n<script async=\"\" src=\"https://www.googletagmanager.com/gtag/js?id=G-M6ETBEC1R9\"></script><script>window.dataLayer=window.dataLayer || []; function gtag(){dataLayer.push(arguments);}gtag('js', new Date()); gtag('config', 'G-M6ETBEC1R9');</script>\n<script>!function(e,t,c,n,r,a,m){e.ym=e.ym||function(){(e.ym.a=e.ym.a||[]).push(arguments)},e.ym.l=1*new Date;for(var s=0;s<document.scripts.length;s++)if(document.scripts[s].src===n)return;a=t.createElement(c),m=t.getElementsByTagName(c)[0],a.async=1,a.src=n,m.parentNode.insertBefore(a,m)}(window,document,\"script\",\"https://mc.yandex.ru/metrika/tag.js\"),ym(83179930,\"init\",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})</script><noscript><div><img alt=\"\" src=\"https://mc.yandex.ru/watch/83179930\" style=\"position:absolute;left:-9999px\"/></div></noscript> \n    \n    ﻿<header class=\"header elma-365\">\n<div class=\"container\">\n<div class=\"nav-container\">\n<div class=\"nav-wrap\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img alt=\"header logo\" src=\"./logo.svg\"/>\n</a>\n<div class=\"header__navi\">\n<ul class=\"header__list\"><li><span class=\"solution-select\"><span class=\"solution-select__selected\"></span><svg fill=\"none\" height=\"4\" viewbox=\"0 0 7 4\" width=\"7\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1 1L3.5 3.5L6 1\" stroke=\"white\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg><ul class=\"solution-select__list\"><li class=\"header__list-item\"><a class=\"project-link\" href=\"https://elma365.com/ru/help/platform/get-trial.html\">Платформа</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/ecm/ecm-functions.html\">CSP</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/crm/crm-functions.html\">CRM+CX</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/projects/projects-functions.html\">Проекты</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/service/service-functions.html\">Service</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/kedo/kedo.html\">КЭДО</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/business_solutions/-elma365-store.html\">Бизнес-решения</a></li><ul class=\"social-links-header\"><li class=\"social-link-header\"><a class=\"project-link\" href=\"https://elma-academy.com/ru/\" target=\"_blank\">Academy</a></li><li class=\"social-link-header\"><a class=\"project-link\" href=\"https://community.elma365.com/ru/\" target=\"_blank\">Community</a></li><li></li></ul></ul></span></li><li class=\"header__list-item\"><a class=\"header__list-item-url\" href=\"https://api.elma365.com/ru/\" target=\"_blank\">API</a></li><li class=\"header__list-item\"><a class=\"header__list-item-url\" href=\"https://tssdk.elma365.com/latest/\" target=\"_blank\">SDK</a></li><li class=\"header__list-item header__list-item-latest\"><a class=\"header__list-item-url header__list-item-last\" href=\"https://elma365.com/ru/\" target=\"_blank\">Сайт ELMA365</a></li></ul>\n<div class=\"hero-wrap\" style=\"display: flex; align-items: center;\">\n<div class=\"hero__search\" style=\"display: flex; justify-content: space-between; width: 100%; padding-left: 0;\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img alt=\"header logo\" src=\"./logo.svg\"/>\n</a>\n<button class=\"hero__search-icon\" id=\"search-icon\">\n<img alt=\"search string\" src=\"search-icon-white.svg\"/>\n</button>\n<div class=\"hero__search-form\" id=\"search-panel\"><form class=\"search-form\"><label class=\"search-form__label\"><span class=\"search__icon\" id=\"reset-search\" src=\"Union.svg\"></span><input class=\"search-form__input\" type=\"text\"/></label><input class=\"search-form__submit\" type=\"submit\" value=\"Submit\"/></form></div>\n</div>\n</div>\n</div>\n</div>\n<a class=\"hero__side-icon\" href=\"#\" id=\"side-menu-icon\">\n<img alt=\"side menu\" src=\"side_menu.svg\"/>\n</a>\n</div>\n</div>\n</header>\n<main class=\"main container\">\n<aside class=\"sidebar\" id=\"sidebar\">\n<div class=\"sidebar__header\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img src=\"./logo-light.svg\"/>\n</a>\n<span class=\"sidebar__close elma-365-close\" id=\"close\"></span>\n</div>\n<div class=\"sidebar__wrapper\" id=\"side-menu\">\n</div>\n</aside>\n<article class=\"article\" id=\"article\">\n<div class=\"article-inner\">\n<div class=\"content\">\n<header class=\"article__header\">\n<div class=\"article__bread\" style=\"display:flex; gap:8px;\">\n<span class=\"search-res__item-category search-res__item-category_subcategory subcategory article__badge\" id=\"subcategory\"></span>\n<nav class=\"topic__breadcrumbs\">\n<p><a href=\"360024498352.html\">Модули расширения системы</a> &gt; <a href=\"extentions.html\">Пользовательские модули</a> &gt; <a href=\"extention-activities.html\">Действия в бизнес-процессах</a> / Скрипт</p>\n</nav>\n</div>\n<div class=\"topic__title\"><h1 class=\"p_Heading1\"><span class=\"f_Heading1\">Скрипт</span></h1>\n</div>\n</header>\n<section class=\"article__content\">\n<div class=\"scroll-top-inner\">\n<a class=\"scroll-top\" href=\"#h1-article\"></a>\n</div>\n<!-- Placeholder for topic body. -->\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-size: 15px; font-family: Inter;\">Действие типа </span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Скрипт</span> можно использовать для создания интеграций, например, для отправки запросов во внешнюю систему. Настройки действия выполняются на трёх вкладках: <span style=\"font-weight: bold;\">Настройки</span>, <span style=\"font-weight: bold;\">Контекст</span>, <span style=\"font-weight: bold;\">Скрипты</span>.</p>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Вкладка «Настройки»</span></h2>\n<p class=\"p_Normal\">На вкладке <span style=\"font-weight: bold;\">Настройки</span> укажите:</p>\n<p style=\"background: #ffffff; margin: 14px 0 0 0;\"><img alt=\"exten_8\" height=\"421\" src=\"exten_8.png\" style=\"margin:0;width:628px;height:421px;border:none\" width=\"628\"/></p>\n<ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\"><span style=\"font-weight: bold;\">Название</span> — наименование действия;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Название по умолчанию</span> — наименование, отображающееся на блоке действия при добавлении его на схему бизнес‑процесса;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Цвет блока</span> — цвет, в который будет окрашен блок действия на схеме процесса;</li><li class=\"p_Normal\"><a class=\"hmanchor\" id=\"description\"></a><span style=\"font-weight: bold;\">Описание</span> — описание функциональных возможностей действия и его особенностей;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Устаревшее</span> — опция позволяет скрыть элемент из дизайнера бизнес-процессов, чтобы пользователи не смогли добавлять его на схемы новых процессов. Устаревшие действия продолжат работать без изменений в уже созданных процессах. Например, можно включить опцию для блока после обновления модуля;</li><li class=\"p_Normal\"><a class=\"hmanchor\" id=\"execution-model\"></a><span style=\"font-weight: bold;\">Модель выполнения</span> — способ выполнения действия:<ul style=\"list-style-type:circle\">\n<li class=\"p_Normal\"><span style=\"font-weight: bold;\">Синхронное</span> — простое выполнение заданного в действии скрипта, то есть синхронное исполнение функции <code><b>action()</b></code>. Действие с синхронным выполнением можно вызвать как функцию из других скриптов. Подробнее читайте в разделе <a class=\"topiclink\" href=\"script-activity.html#call-actions-in-scripts\">«Вызов действий в скриптах»</a>;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Запрос результата</span> — после выполнения заданного скрипта во внешний сервис отправится запрос о значении статуса. Для реализации такого подхода в действии нужно определить функцию проверки результата <code><b>check()</b></code>. Бизнес‑процесс продолжится только после того, как функция <code><b>check()</b></code> вернёт ответ <code><b>true</b></code>;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Обратный вызов</span> — в обращении к внешнему сервису передаётся URL, на который необходимо вернуть результат. То есть в параметрах вызова передаётся адрес, который будет вызван после выполнения задачи внешним сервисом, и на который будут отправлены результаты выполнения. URL ответа передаётся как входной аргумент функции <code><b>action()</b></code>. Любой запрос на данный URL передаётся в функцию <code><b>callback()</b></code>. После этого выполнение процесса продолжится;</li></ul>\n</li><li class=\"p_Normal\"><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Период проверки результата</span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold; color: #ff0000;\">* </span><span style=\"font-size: 15px; font-family: Inter;\">— задайте частоту вызова функции </span><code><b>check()</b></code><span style=\"font-size: 15px; font-family: Inter;\">. Опция используется для модели выполнения </span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Запрос результата</span><span style=\"font-size: 15px; font-family: Inter;\">;</span></li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Количество повторов при ошибке</span> — укажите количество попыток выполнения действия;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Пауза между повторами при ошибке (сек)</span><span style=\"font-weight: bold; color: #ff0000;\">*</span> — определите частоту попыток.</li></ul>\n<h2 class=\"p_Heading2\"><a class=\"hmanchor\" id=\"context\"></a><span class=\"f_Heading2\">Вкладка «Контекст»</span></h2>\n<p style=\"background: #ffffff; margin: 14px 0 0 0;\"><span style=\"color: #394149;\">На вкладке </span><span style=\"font-weight: bold; color: #394149;\">Контекст</span><span style=\"color: #394149;\"> вы можете добавить переменные, </span><span style=\"font-size: 15px; font-family: Inter;\">с помощью которых передаются данные между действием и процессом или приложением. Для этого нажмите </span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">+ Добавить</span><span style=\"font-size: 15px; font-family: Inter;\"> и настройте переменную в зависимости от её </span><span style=\"font-size: 15px; font-family: Inter; color: #0563c1;\"><a class=\"topiclink\" href=\"360009707032.html\">типа</a></span><span style=\"font-size: 15px; font-family: Inter;\">. Затем определите, какие переменные являются входными и выходными, и укажите обязательность их заполнения.</span></p>\n<p style=\"background: #ffffff; margin: 14px 0 0 0;\"><img alt=\"script-activity-2\" height=\"369\" src=\"script-activity-2.png\" style=\"margin:0;width:964px;height:369px;border:none\" width=\"964\"/></p>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-size: 15px; font-family: Inter;\">Для действия типа </span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Скрипт</span><span style=\"font-size: 15px; font-family: Inter;\"> также можно настроить </span><span style=\"font-size: 15px; font-family: Inter; color: #0563c1;\"><a class=\"topiclink\" href=\"activities-features.html#script\">динамическое создание переменных с помощью скрипта</a></span><span style=\"font-size: 15px; font-family: Inter;\">. В этом случае набор переменных не задаётся в настройках действия, а формируется при открытии формы сопоставления. Например, это удобно для интеграции с внешними сервисами, в которых набор полей может изменяться. </span></p>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-size: 15px; font-family: Inter;\">Кроме того, вы можете настроить пользовательскую форму сопоставления, например, чтобы сотрудник увидел информационный блок с подсказками.</span></p>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-size: 15px; font-family: Inter;\">Подробнее о настройке и сопоставлении переменных читайте в статье </span><span style=\"font-size: 15px; font-family: Inter; color: #0563c1;\"><a class=\"topiclink\" href=\"activities-features.html\">«Биндинг переменных для действий в бизнес‑процессах»</a></span><span style=\"font-size: 15px; font-family: Inter;\">.</span></p>\n<h2 class=\"p_Heading2\"><a class=\"hmanchor\" id=\"scripts-tab\"></a><span class=\"f_Heading2\">Вкладка «Скрипты»</span></h2>\n<p style=\"background: #ffffff; margin: 14px 0 0 0;\"><span style=\"color: #394149;\">На вкладке </span><span style=\"font-weight: bold; color: #394149;\">Скрипты</span><span style=\"color: #394149;\"> создаётся скрипт действия. </span><span style=\"font-size: 13px; color: #394149; background-color: #ffffff;\">Для написания скриптов используется язык программирования </span><span style=\"font-size: 13px; background-color: #ffffff;\"><a class=\"weblink\" href=\"https://www.typescriptlang.org/\" target=\"_blank\">TypeScript</a></span><span style=\"font-size: 13px; color: #394149; background-color: #ffffff;\">. Подробнее о принципах написания скриптов в ELMA365 вы можете прочитать в <a class=\"weblink\" href=\"https://tssdk.elma365.com/ru/latest/index.html\" target=\"_blank\">справке ELMA365 TS SDK</a>.</span><span style=\"font-family: 'Times New Roman',Times,Georgia,serif;\"> </span></p>\n<p style=\"background: #ffffff; margin: 14px 0 0 0;\"><span style=\"font-size: 15px; font-family: Inter;\">По умолчанию в скрипте действия можно обращаться только к свойствам, процессам, методам API из модуля, на уровне которого действие настроено. Вы можете предоставить доступ к другим объектам системы в скрипте, используя </span><span style=\"font-size: 15px; font-family: Inter; color: #0563c1;\"><a class=\"topiclink\" href=\"global-constants.html\">глобальные константы</a></span><span style=\"font-size: 15px; font-family: Inter;\">. Для этого на верхней панели нажмите </span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Настройки</span><span style=\"font-size: 15px; font-family: Inter;\">.</span></p>\n<p style=\"background: #ffffff; margin: 14px 0 0 0;\"><img alt=\"api-2\" height=\"306\" src=\"api-2.png\" style=\"margin:0;width:873px;height:306px;border:none\" width=\"873\"/></p>\n<p style=\"page-break-after: avoid; background: #ffffff; margin: 14px 0 0 0;\"><span style=\"font-size: 15px; font-family: Inter;\">Вы можете использовать опции:</span></p>\n<ul style=\"list-style-type:disc\">\n<li style=\"background: #ffffff; margin-top: 14px; margin-right: 0; margin-bottom: 0;\"><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Глобальные константы</span><span style=\"font-size: 15px; font-family: Inter;\"> — установите флажок напротив опции </span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Global</span><span style=\"font-size: 15px; font-family: Inter;\">, чтобы получить возможность обращаться к объектам из всех разделов системы и к глобальным параметрам. Для этого применяется константа </span><span style=\"font-size: 15px; font-family: Inter; color: #0563c1;\"><a class=\"weblink\" href=\"https://tssdk.elma365.com/ru/latest/pages/quick-start/intro_globals.html#global\" target=\"_blank\">Global</a></span><span style=\"font-size: 15px; font-family: Inter;\">;</span></li></ul>\n<p class=\"p_CodeExample\" style=\"page-break-inside: avoid;\"><span class=\"f_CodeExample\">начало внимание</span></p>\n<p style=\"background: #ffffff; margin: 14px 0 0 0;\"><span style=\"font-size: 15px; font-family: Inter;\">При использовании константы </span><code><b>Global</b></code><span style=\"font-size: 15px; font-family: Inter;\"> в скрипте действия модуль с этим действием нельзя </span><span style=\"font-size: 15px; font-family: Inter; color: #0563c1;\"><a class=\"topiclink\" href=\"export_extention.html\">экспортировать</a></span><span style=\"font-size: 15px; font-family: Inter;\">.</span></p>\n<p class=\"p_CodeExample\" style=\"page-break-inside: avoid;\"><span class=\"f_CodeExample\">конец внимание</span></p>\n<ul style=\"list-style-type:disc\">\n<li style=\"background: #ffffff; margin-top: 14px; margin-right: 0; margin-bottom: 0;\"><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Опциональные зависимости (доступны в объекте Imports) </span><span style=\"font-size: 15px; font-family: Inter;\">— выберите разделы или пользовательские модули, чтобы установить от них </span><span style=\"font-size: 15px; font-family: Inter; color: #0000ff;\"><a class=\"topiclink\" href=\"optional-dependencies.html\">опциональные зависимости</a></span><span style=\"font-size: 15px; font-family: Inter;\">. После этого к ним можно обращаться через константу </span><span style=\"font-size: 15px; font-family: Inter; color: #0563c1;\"><a class=\"topiclink\" href=\"optional-dependencies.html#use-imports\">Imports</a></span><span style=\"font-size: 15px; font-family: Inter;\">. При использовании опциональных зависимостей модуль можно экспортировать без ограничений.</span></li></ul>\n<p style=\"background: #ffffff; margin: 14px 0 0 34px;\"><span style=\"font-size: 15px; font-family: Inter;\">Чтобы создать зависимость, нажмите </span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">+ Добавить раздел</span><span style=\"font-size: 15px; font-family: Inter;\"> и выберите компонент системы. Затем в колонке </span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Псевдоним</span><span style=\"font-size: 15px; font-family: Inter;\"> задайте для него уникальное имя, которое будет использоваться в скрипте. Допустимы латинские буквы и цифры, для разделения слов можно использовать знак подчёркивания. По умолчанию используется код раздела или ID модуля.</span></p>\n<p style=\"margin: 7px 0 7px 0;\"><span style=\"font-size: 13px; color: #394149;\">После внесения данных о действии нажмите на верхней панели </span><span style=\"font-size: 13px; font-weight: bold; color: #394149;\">Сохранить</span><span style=\"font-size: 13px; color: #394149;\"> и </span><span style=\"font-size: 13px; font-weight: bold; color: #394149;\">Опубликовать</span><span style=\"font-size: 13px; color: #394149;\">.</span></p>\n<p style=\"margin: 7px 0 7px 0;\">При включённом модуле действие <span style=\"color: #394149;\">будет доступно </span><span style=\"font-family: 'Times New Roman',Times,Georgia,serif;\">в <a class=\"topiclink\" href=\"360012265552.html#process-page\">дизайнере бизнес-процессов</a>, на панели инструментов справа от поля для моделирования, на вкладке </span><span style=\"font-family: 'Times New Roman',Times,Georgia,serif; font-weight: bold;\">Интеграции</span><span style=\"font-family: 'Times New Roman',Times,Georgia,serif;\">. Блок можно добавить на схему процесса и <a class=\"topiclink\" href=\"module-action.html\">задать настройки для его выполнения</a>.</span></p>\n<h2 class=\"p_Heading2\"><a class=\"hmanchor\" id=\"tracing\"></a><span class=\"f_Heading2\">Трассировка скрипта действия</span></h2>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-size: 15px; font-family: Inter;\">Когда действие опубликовано, вы можете собирать информацию о выполнении его скрипта. Это позволяет оценить продолжительность отдельных запросов, оптимизировать код и выявить причины ошибок.</span></p>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-size: 15px; font-family: Inter;\">Для этого в разделе </span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Администрирование &gt; Инструменты разработчика</span><span style=\"font-size: 15px; font-family: Inter;\"> включите трассировку по действию. После этого вы сможете посмотреть собранные данные, выбрав в настройках действия на верхней панели опцию </span><span style=\"font-size: 15px; font-family: Inter; font-weight: bold;\">Трассировка</span><span style=\"font-size: 15px; font-family: Inter;\">.</span></p>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-size: 15px; font-family: Inter;\">Подробнее о включении трассировки и информации в трейсе читайте в статье </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; color: #0563c1;\"><a class=\"topiclink\" href=\"server-script-tracing.html\">«Трассировка серверных скриптов»</a></span><span style=\"font-size: 15px; font-family: Inter;\">.</span></p>\n<h2 class=\"p_Heading2\"><a class=\"hmanchor\" id=\"call-actions-in-scripts\"></a><span class=\"f_Heading2\">Вызов действий в скриптах</span></h2>\n<p style=\"margin: 7px 0 7px 0;\"><span style=\"font-family: Inter;\">С помощью действий в бизнес-процессах можно создать в модуле пользовательскую библиотеку функций. В отличие от методов API, в действиях задаются входные и выходные переменные, для которых указывается определённый </span><span style=\"font-family: Inter; color: #0563c1;\"><a class=\"topiclink\" href=\"360009707032.html\">тип</a></span><span style=\"font-family: Inter;\">. Это позволяет при написании скрипта чётко понимать, данные каких типов нужно передавать при вызове действия и каким будет результат его выполнения.</span></p>\n<p style=\"margin: 7px 0 7px 0;\"><span style=\"font-family: Inter;\">В скриптах можно вызывать только действия типа </span><span style=\"font-family: Inter; font-weight: bold;\">Скрипт</span><span style=\"font-family: Inter;\"> с моделью выполнения </span><span style=\"font-family: Inter; color: #0000ff;\"><a class=\"topiclink\" href=\"script-activity.html#execution-model\">Синхронное</a></span><span style=\"font-family: Inter;\">.</span></p>\n<p style=\"margin: 7px 0 7px 0;\"><span style=\"font-family: Inter;\">Действие можно использовать:</span></p>\n<ul style=\"list-style-type:disc\">\n<li style=\"margin-top: 7px; margin-right: 0; margin-bottom: 7px;\"><span style=\"font-family: Inter;\">внутри модуля, на уровне которого оно настроено: в скриптах других действий, методов API, бизнес‑процессов, обработчиков событий;</span></li><li style=\"margin-top: 7px; margin-right: 0; margin-bottom: 7px;\"><span style=\"font-family: Inter;\">в скриптах других компонентов системы, в которых установлена </span><span style=\"font-family: Inter; color: #0563c1;\"><a class=\"topiclink\" href=\"optional-dependencies.html\">опциональная зависимость</a></span><span style=\"font-family: Inter;\"> от модуля с данным действием.</span></li></ul>\n<p style=\"margin: 7px 0 7px 0;\"><span style=\"font-family: Inter;\">Для обращения к действию используется свойство </span><code><b>action</b></code><span style=\"font-family: Inter;\">, которое доступно, если в модуле опубликовано подходящее действие. Для вызова применяется метод </span><code><b>call()</b></code><span style=\"font-family: Inter;\">, в качестве параметра которого передаётся объект с входными переменными действия.</span></p>\n<p style=\"margin: 7px 0 7px 0;\"><span style=\"font-family: Inter;\">При обращении к свойству </span><code><b>action</b></code><span style=\"font-family: Inter;\"> и действию используется оператор </span><code><b>?.</b></code><span style=\"font-size: 13px;\"> —</span><span style=\"font-family: Inter;\"> </span><span style=\"font-family: Inter; color: #0563c1;\"><a class=\"weblink\" href=\"https://tssdk.elma365.com/ru/latest/index.html#elvis-operator-\" target=\"_blank\">оператор опциональной последовательности</a></span><span style=\"font-family: Inter;\">. Это необходимо, чтобы в случае удаления действия обращение к модулю обрабатывалось корректно.</span></p>\n<p style=\"margin: 7px 0 7px 0;\"><span style=\"font-family: Inter;\">Обратите внимание, если входная переменная действия обязательна и имеет значение по умолчанию, во входной структуре метода </span><code><b>call()</b></code><span style=\"font-family: Inter;\"> она становится необязательной. В выходной структуре метода, вне зависимости от обязательности выходной переменной, она также становится необязательной.</span></p>\n<p style=\"margin: 16px 0 7px 0;\"><span style=\"font-family: Inter;\">В качестве примера рассмотрим действие, которое позволяет получить курсы валют ЦБ РФ. У действия есть входные переменные — код валюты (тип </span><span style=\"font-family: Inter; color: #0563c1;\"><a class=\"weblink\" href=\"https://tssdk.elma365.com/ru/latest/modules/_02_types_.html#tstring\" target=\"_blank\">Строка</a></span><span style=\"font-family: Inter;\">) и текущая дата (тип </span><span style=\"font-family: Inter; color: #0563c1;\"><a class=\"weblink\" href=\"https://tssdk.elma365.com/ru/latest/interfaces/_02_types_.tdate.html\" target=\"_blank\">Дата</a></span><span style=\"font-family: Inter;\">), а также выходная переменная — курс валюты (тип </span><span style=\"font-family: Inter; color: #0563c1;\"><a class=\"weblink\" href=\"https://tssdk.elma365.com/ru/latest/modules/_02_types_.html#tfloat\" target=\"_blank\">Число</a></span><span style=\"font-family: Inter;\">).</span></p>\n<p style=\"margin: 16px 0 7px 0;\"><span style=\"font-family: Inter;\">В скриптах модуля действие можно вызвать следующим образом:</span></p>\n<p class=\"p_CodeExample\" style=\"white-space: normal; page-break-inside: avoid;\"><span class=\"f_CodeExample\">// Создание объекта, в который передаются параметры для выполнения действия — код валюты и текущая дата</span><br/>\n<span class=\"f_CodeExample\">let input: {</span><br/>\n<span class=\"f_CodeExample\">    currency_code: TString;</span><br/>\n<span class=\"f_CodeExample\">    date: TDate;</span><br/>\n<span class=\"f_CodeExample\">};</span><br/>\n<span class=\"f_CodeExample\"> </span><br/>\n<span class=\"f_CodeExample\">// Создание объекта, в который будет записываться результат выполнения действия — курс валюты</span><br/>\n<span class=\"f_CodeExample\">let output: {</span><br/>\n<span class=\"f_CodeExample\">    currency_rate?: TFloat;</span><br/>\n<span class=\"f_CodeExample\">}</span><br/>\n<span class=\"f_CodeExample\"> </span><br/>\n<span class=\"f_CodeExample\">// Запись кода валюты из контекста и текущей даты, чтобы передать данные во входные переменные действия</span><br/>\n<span class=\"f_CodeExample\">input = {</span><br/>\n<span class=\"f_CodeExample\">    currency_code: Context.data.currency_code,</span><br/>\n<span class=\"f_CodeExample\">    date: new TDate(),</span><br/>\n<span class=\"f_CodeExample\">};</span><br/>\n<span class=\"f_CodeExample\"> </span><br/>\n<span class=\"f_CodeExample\">// Вызов действия для получения курса валюты, настроенного внутри модуля</span><br/>\n<span class=\"f_CodeExample\">output = await Namespace.action?.get_currency_rate?.call(input);</span><br/>\n<span class=\"f_CodeExample\"> </span><br/>\n<span class=\"f_CodeExample\">// Проверка, что результат выполнения действия получен</span><br/>\n<span class=\"f_CodeExample\">if (output) {</span><br/>\n<span class=\"f_CodeExample\">    // Получение данных из объекта, в который записан результат </span><br/>\n<span class=\"f_CodeExample\">    Context.data.current_currency_rate = output.currency_rate;</span><br/>\n<span class=\"f_CodeExample\">}</span></p>\n<p style=\"margin: 32px 0 7px 0;\"><span style=\"font-family: Inter;\">Действие также можно вызвать из скрипта компонента, который не является частью модуля. Например, из виджета на уровне раздела или из обработчика событий на уровне другого модуля. Для этого в настройках скриптов компонента нужно установить опциональную зависимость от модуля с данным действием. После этого к действию можно обратиться с помощью глобальной константы </span><code><b>Imports</b></code><span style=\"font-family: Inter;\">. Подробнее читайте в статье </span><span style=\"font-family: Inter; color: #0563c1;\"><a class=\"topiclink\" href=\"optional-dependencies.html\">«Опциональные зависимости»</a></span><span style=\"font-family: Inter;\">.</span></p>\n<p style=\"margin: 7px 0 7px 0;\"><span style=\"font-family: Inter;\">Допустим, в скрипте бизнес-процесса на уровне раздела установлена опциональная зависимость от модуля, в котором настроено действие для получения курса валют. Для модуля в настройках зависимостей установлено уникальное имя </span><code><b>currency_module</b></code><span style=\"font-family: Inter;\">. Вызвать действие из скрипта процесса можно следующим образом:</span></p>\n<p class=\"p_CodeExample\" style=\"white-space: normal; page-break-inside: avoid;\"><span class=\"f_CodeExample\">// Вызов действия `get_currency`, настроенного в модуле</span><br/>\n<span class=\"f_CodeExample\">// Во входные переменные действия передаются код валюты и текущая дата</span><br/>\n<span class=\"f_CodeExample\">const output = await Imports?.currency_module?.action?.get_currency_rate?.call({</span><br/>\n<span class=\"f_CodeExample\">    currency_code: Context.data.currency_code,</span><br/>\n<span class=\"f_CodeExample\">    date: new TDate(),</span><br/>\n<span class=\"f_CodeExample\">});</span><br/>\n<span class=\"f_CodeExample\"> </span><br/>\n<span class=\"f_CodeExample\">// Проверка, что результат выполнения действия получен</span><br/>\n<span class=\"f_CodeExample\">if (output) {</span><br/>\n<span class=\"f_CodeExample\">    // Запись курса валюты, полученного с помощью модуля, в переменную из контекста процесса</span><br/>\n<span class=\"f_CodeExample\">    Context.data.current_currency_rate = output.currency_rate;</span><br/>\n<span class=\"f_CodeExample\">}</span></p>\n<div class=\"bottom-nav\">\n<a class=\"topic__navi_prev\" href=\"extention-activities.html\" id=\"prev-link\">\n<span class=\"bottom-nav__arrow bottom-nav__arrow--prev\"></span> <span class=\"bottom-nav__link\">extention-activities.html</span>\n</a>\n<a class=\"topic__navi_next\" href=\"call-process-activity.html\" id=\"next-link\">\n<span class=\"bottom-nav__link\">call-process-activity.html</span> <span class=\"bottom-nav__arrow bottom-nav__arrow--next\"></span>\n</a>\n</div>\n<!-- добавляет на страницу строку блок Была ли статья полезной?  -->\n<div class=\"feedback-wrap\"><div class=\"feedback\" id=\"feedback\"><span><b>Была ли статья полезной?</b></span><form action=\"\" class=\"feedback-form\" id=\"feedback-form\" method=\"POST\"><div class=\"feedback__popup feedback__popup-response\" id=\"feedback__popup_thx\">Спасибо за ваш отзыв!</div><div id=\"feedback-success-popup\"><div class=\"wrap\"><button class=\"feedback-popup-close\" type=\"button\">×</button><svg fill=\"none\" height=\"44\" viewbox=\"0 0 44 44\" width=\"44\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#clip0_212_2187)\"><path d=\"M22 0.6875C10.2294 0.6875 0.6875 10.2294 0.6875 22C0.6875 33.7706 10.2294 43.3125 22 43.3125C33.7706 43.3125 43.3125 33.7706 43.3125 22C43.3125 10.2294 33.7706 0.6875 22 0.6875ZM22 40.5625C11.8023 40.5625 3.4375 32.3078 3.4375 22C3.4375 11.8024 11.6922 3.4375 22 3.4375C32.1977 3.4375 40.5625 11.6922 40.5625 22C40.5625 32.1976 32.3078 40.5625 22 40.5625ZM34.1713 16.933L18.6613 32.3186C18.257 32.7197 17.604 32.7171 17.203 32.3128L9.82283 24.873C9.42176 24.4686 9.42434 23.8157 9.82867 23.4146L10.5609 22.6884C10.9652 22.2873 11.6181 22.2899 12.0192 22.6942L17.9468 28.6697L31.9926 14.7366C32.3969 14.3356 33.0498 14.3382 33.4509 14.7425L34.1772 15.4747C34.5783 15.879 34.5757 16.532 34.1713 16.933Z\" fill=\"#27AE60\"></path></g><defs><clippath id=\"clip0_212_2187\"><rect fill=\"white\" height=\"44\" width=\"44\"></rect></clippath></defs></svg><p>Ваш отзыв успешно отправлен!</p><span>Спасибо за обратную связь.</span></div></div><div class=\"feedback__popup\" id=\"feedback__popup_why\"><button class=\"feedback-popup-close\" type=\"button\">×</button><div class=\"feedback__popup-header\">Уточните, почему:</div><input id=\"bad_recommendation\" name=\"category\" type=\"radio\" value=\"bad_recommendation\"/><label for=\"bad_recommendation\">Рекомендации не помогли</label><input id=\"difficult_text\" name=\"category\" type=\"radio\" value=\"difficult_text\"/><label for=\"difficult_text\">Текст трудно понять</label><input id=\"no_answer\" name=\"category\" type=\"radio\" value=\"no_answer\"/><label for=\"no_answer\">Нет ответа на мой вопрос</label><input id=\"bad_header\" name=\"category\" type=\"radio\" value=\"bad_header\"/><label for=\"bad_header\">Содержание статьи не соответствует заголовку</label><input id=\"other_reason\" name=\"category\" type=\"radio\" value=\"other_reason\"/><label for=\"other_reason\">Другая причина</label></div><div class=\"feedback__popup\" id=\"feedback__popup-other\"><button class=\"feedback-popup-close\" type=\"button\">×</button> <div class=\"feedback__popup-header\">Расскажите, что вам не понравилось в статье:</div><textarea class=\"feedback__textarea\" id=\"\" name=\"other\"></textarea><input class=\"feedback__other-btn\" type=\"submit\" value=\"Отправить\"/></div><div class=\"feedback-form__btn-group\"><input id=\"feedback__useful_yes\" name=\"useful\" type=\"radio\" value=\"true\"/><label for=\"feedback__useful_yes\"><img src=\"like.svg\"/><span class=\"feedback-form__btn-group_yes-btn\">Да</span></label><input id=\"feedback__useful_no\" name=\"useful\" type=\"radio\" value=\"false\"/><label for=\"feedback__useful_no\"><img src=\"dislike.svg\"/><span class=\"feedback-form__btn-group_no-btn\">Нет</span></label></div><select name=\"category\"><option disabled=\"\">Выберите вариант</option><option selected=\"\" value=\"bad_recommendation\">Рекомендации не помогли</option><option value=\"difficult_text\">Текст трудно понять</option><option value=\"no_answer\">Нет ответа на мой вопрос</option><option value=\"bad_header\">Содержание статьи не соответствует заголовку</option><option value=\"other_reason\">Другая причина</option></select><input type=\"submit\"/></form></div></div>\n</section>\n</div>\n<aside class=\"article__sidebar\" style=\"display:none\">\n<input type=\"checkbox\"/>\n<div class=\"article__arrow\"></div>\n<div class=\"table-of-contents elma365-right\" id=\"toc2Content\">\n<h3 class=\"h3-toc\">В этой статье</h3>\n<nav id=\"toc2\"></nav>\n</div>\n</aside>\n</div>\n</article>\n</main>\n<footer class=\"footer\">\n<div class=\"footer-container\">\n<div class=\"footer-mobile\">\n<ul class=\"footer-mobile__list\"><li><a href=\"https://api.elma365.com/ru/\" target=\"_blank\">API</a></li><li><a href=\"https://tssdk.elma365.com/\" target=\"_blank\">TS SDK</a></li><li><a href=\"https://community.elma365.com/\" target=\"_blank\">Community</a></li><li><a href=\"https://elma-academy.com/ru/elma365\" target=\"_blank\">Академия</a></li></ul><ul class=\"footer-mobile__list\"><li><a href=\"https://elma365.com/ru/help/platform/get-trial.html\">Платформа</a></li><li><a href=\"https://elma365.com/ru/help/ecm/ecm-functions.html\">ECM</a></li><li><a href=\"https://elma365.com/ru/help/service/service-functions.html\">Service</a></li><li><a href=\"https://elma365.com/ru/help/projects/projects-functions.html\">Проекты</a></li></ul>\n</div>\n<div class=\"container\">\n<div class=\"footer-wrap\">\n<div><span class=\"mobile-question-popup\">Отправить фидбэк</span><form action=\"\" class=\"question__popup question-xs\" id=\"question__popup\" method=\"POST\"><div class=\"question-wrap\"><span class=\"close\"></span><span class=\"title\">Задать вопрос</span><label for=\"help_question\" style=\"display: none;\"></label><textarea id=\"help_question\" name=\"help_question\"></textarea><input type=\"submit\" value=\"Отправить\"/></div></form><div class=\"hidden fade-in question-success-xs\">Ваш фидбэк отправлен.</div></div>\n<div class=\"footer-flex-b\">\n<div class=\"footer-top\">\n<span class=\"footer-copy\">© 2025 \n              ELMA365\n            \n            \n          </span>\n<a class=\"sk-img\" href=\"https://navigator.sk.ru/orn/1122971\" target=\"_blank\">\n<img alt=\"sk icon\" class=\"footer-img\" height=\"34\" src=\"sk-resident.svg\" width=\"117\"/>\n</a>\n</div>\n<div class=\"footer-line\">\n<div class=\"footer-line-copy\">\n<span class=\"footer-copy\">© 2025 \n                  ELMA365\n                \n                \n              </span>\n</div>\n<ul class=\"footer-list\">\n<li class=\"footer-item footer-url-elma\"><a class=\"footer-link footer-url-link-elma\" href=\"https://elma365.com/ru/\" style=\"color: #0D4A75;\" target=\"_blank\"><img alt=\"browse icon\" class=\"footer-img footer-img-elma-url\" src=\"browse.svg\"/>elma365.com</a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://vkvideo.ru/@elma_bpm\" target=\"_blank\"><img alt=\"vk-video icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"vk-video.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://vk.com/elma_bpm\" target=\"_blank\"><img alt=\"vk icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"vk.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://t.me/elmaday\" target=\"_blank\"><img alt=\"telegram icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"telegram.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://dzen.ru/elma\" target=\"_blank\"><img alt=\"dzen icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"social_dzen.svg\" width=\"20\"/></a></li>\n<li class=\"footer-item sk-footer-img\">\n<a class=\"sk-img\" href=\"https://navigator.sk.ru/orn/1122971\" target=\"_blank\">\n<img alt=\"sk icon\" class=\"footer-img\" height=\"34\" src=\"sk-resident.svg\" width=\"117\"/>\n</a>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<a class=\"arrow-top\" href=\"#\"></a>\n</div>\n</footer>\n<!--    <script type=\"text/javascript\" src=\"jquery1.min.js\"></script>-->\n<iframe name=\"hmnavigation\" style=\"display:none!important\"></iframe>\n<!--<script src=\"./jquery-ui.js\"></script> -->\n<script src=\"./jquery-ui.min.js\"></script>\n<!--script src=\"//cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script-->\n<script src=\"./jquery.tocify.min.js\"></script>\n<script src=\"./TypoReporter.min.js\"></script>\n<script src=\"./google-search.js\"></script>\n<script src=\"./main.js\"></script>\n</body>\n</html>\n",
  "plain_text": "Скрипт ﻿ Платформа CSP CRM+CX Проекты Service КЭДО Бизнес-решения Academy Community API SDK Сайт ELMA365 Модули расширения системы > Пользовательские модули > Действия в бизнес-процессах / Скрипт Скрипт Действие типа Скрипт можно использовать для создания интеграций, например, для отправки запросов во внешнюю систему. Настройки действия выполняются на трёх вкладках: Настройки , Контекст , Скрипты . Вкладка «Настройки» На вкладке Настройки укажите: Название — наименование действия; Название по умолчанию — наименование, отображающееся на блоке действия при добавлении его на схему бизнес‑процесса; Цвет блока — цвет, в который будет окрашен блок действия на схеме процесса; Описание — описание функциональных возможностей действия и его особенностей; Устаревшее — опция позволяет скрыть элемент из дизайнера бизнес-процессов, чтобы пользователи не смогли добавлять его на схемы новых процессов. Устаревшие действия продолжат работать без изменений в уже созданных процессах. Например, можно включить опцию для блока после обновления модуля; Модель выполнения — способ выполнения действия: Синхронное — простое выполнение заданного в действии скрипта, то есть синхронное исполнение функции action() . Действие с синхронным выполнением можно вызвать как функцию из других скриптов. Подробнее читайте в разделе «Вызов действий в скриптах» ; Запрос результата — после выполнения заданного скрипта во внешний сервис отправится запрос о значении статуса. Для реализации такого подхода в действии нужно определить функцию проверки результата check() . Бизнес‑процесс продолжится только после того, как функция check() вернёт ответ true ; Обратный вызов — в обращении к внешнему сервису передаётся URL, на который необходимо вернуть результат. То есть в параметрах вызова передаётся адрес, который будет вызван после выполнения задачи внешним сервисом, и на который будут отправлены результаты выполнения. URL ответа передаётся как входной аргумент функции action() . Любой запрос на данный URL передаётся в функцию callback() . После этого выполнение процесса продолжится; Период проверки результата * — задайте частоту вызова функции check() . Опция используется для модели выполнения Запрос результата ; Количество повторов при ошибке — укажите количество попыток выполнения действия; Пауза между повторами при ошибке (сек) * — определите частоту попыток. Вкладка «Контекст» На вкладке Контекст вы можете добавить переменные, с помощью которых передаются данные между действием и процессом или приложением. Для этого нажмите + Добавить и настройте переменную в зависимости от её типа . Затем определите, какие переменные являются входными и выходными, и укажите обязательность их заполнения. Для действия типа Скрипт также можно настроить динамическое создание переменных с помощью скрипта . В этом случае набор переменных не задаётся в настройках действия, а формируется при открытии формы сопоставления. Например, это удобно для интеграции с внешними сервисами, в которых набор полей может изменяться. Кроме того, вы можете настроить пользовательскую форму сопоставления, например, чтобы сотрудник увидел информационный блок с подсказками. Подробнее о настройке и сопоставлении переменных читайте в статье «Биндинг переменных для действий в бизнес‑процессах» . Вкладка «Скрипты» На вкладке Скрипты создаётся скрипт действия. Для написания скриптов используется язык программирования TypeScript . Подробнее о принципах написания скриптов в ELMA365 вы можете прочитать в справке ELMA365 TS SDK . По умолчанию в скрипте действия можно обращаться только к свойствам, процессам, методам API из модуля, на уровне которого действие настроено. Вы можете предоставить доступ к другим объектам системы в скрипте, используя глобальные константы . Для этого на верхней панели нажмите Настройки . Вы можете использовать опции: Глобальные константы — установите флажок напротив опции Global , чтобы получить возможность обращаться к объектам из всех разделов системы и к глобальным параметрам. Для этого применяется константа Global ; начало внимание При использовании константы Global в скрипте действия модуль с этим действием нельзя экспортировать . конец внимание Опциональные зависимости (доступны в объекте Imports) — выберите разделы или пользовательские модули, чтобы установить от них опциональные зависимости . После этого к ним можно обращаться через константу Imports . При использовании опциональных зависимостей модуль можно экспортировать без ограничений. Чтобы создать зависимость, нажмите + Добавить раздел и выберите компонент системы. Затем в колонке Псевдоним задайте для него уникальное имя, которое будет использоваться в скрипте. Допустимы латинские буквы и цифры, для разделения слов можно использовать знак подчёркивания. По умолчанию используется код раздела или ID модуля. После внесения данных о действии нажмите на верхней панели Сохранить и Опубликовать . При включённом модуле действие будет доступно в дизайнере бизнес-процессов , на панели инструментов справа от поля для моделирования, на вкладке Интеграции . Блок можно добавить на схему процесса и задать настройки для его выполнения . Трассировка скрипта действия Когда действие опубликовано, вы можете собирать информацию о выполнении его скрипта. Это позволяет оценить продолжительность отдельных запросов, оптимизировать код и выявить причины ошибок. Для этого в разделе Администрирование > Инструменты разработчика включите трассировку по действию. После этого вы сможете посмотреть собранные данные, выбрав в настройках действия на верхней панели опцию Трассировка . Подробнее о включении трассировки и информации в трейсе читайте в статье «Трассировка серверных скриптов» . Вызов действий в скриптах С помощью действий в бизнес-процессах можно создать в модуле пользовательскую библиотеку функций. В отличие от методов API, в действиях задаются входные и выходные переменные, для которых указывается определённый тип . Это позволяет при написании скрипта чётко понимать, данные каких типов нужно передавать при вызове действия и каким будет результат его выполнения. В скриптах можно вызывать только действия типа Скрипт с моделью выполнения Синхронное . Действие можно использовать: внутри модуля, на уровне которого оно настроено: в скриптах других действий, методов API, бизнес‑процессов, обработчиков событий; в скриптах других компонентов системы, в которых установлена опциональная зависимость от модуля с данным действием. Для обращения к действию используется свойство action , которое доступно, если в модуле опубликовано подходящее действие. Для вызова применяется метод call() , в качестве параметра которого передаётся объект с входными переменными действия. При обращении к свойству action и действию используется оператор ?. — оператор опциональной последовательности . Это необходимо, чтобы в случае удаления действия обращение к модулю обрабатывалось корректно. Обратите внимание, если входная переменная действия обязательна и имеет значение по умолчанию, во входной структуре метода call() она становится необязательной. В выходной структуре метода, вне зависимости от обязательности выходной переменной, она также становится необязательной. В качестве примера рассмотрим действие, которое позволяет получить курсы валют ЦБ РФ. У действия есть входные переменные — код валюты (тип Строка ) и текущая дата (тип Дата ), а также выходная переменная — курс валюты (тип Число ). В скриптах модуля действие можно вызвать следующим образом: // Создание объекта, в который передаются параметры для выполнения действия — код валюты и текущая дата let input: { currency_code: TString; date: TDate; }; // Создание объекта, в который будет записываться результат выполнения действия — курс валюты let output: { currency_rate?: TFloat; } // Запись кода валюты из контекста и текущей даты, чтобы передать данные во входные переменные действия input = { currency_code: Context.data.currency_code, date: new TDate(), }; // Вызов действия для получения курса валюты, настроенного внутри модуля output = await Namespace.action?.get_currency_rate?.call(input); // Проверка, что результат выполнения действия получен if (output) { // Получение данных из объекта, в который записан результат Context.data.current_currency_rate = output.currency_rate; } Действие также можно вызвать из скрипта компонента, который не является частью модуля. Например, из виджета на уровне раздела или из обработчика событий на уровне другого модуля. Для этого в настройках скриптов компонента нужно установить опциональную зависимость от модуля с данным действием. После этого к действию можно обратиться с помощью глобальной константы Imports . Подробнее читайте в статье «Опциональные зависимости» . Допустим, в скрипте бизнес-процесса на уровне раздела установлена опциональная зависимость от модуля, в котором настроено действие для получения курса валют. Для модуля в настройках зависимостей установлено уникальное имя currency_module . Вызвать действие из скрипта процесса можно следующим образом: // Вызов действия `get_currency`, настроенного в модуле // Во входные переменные действия передаются код валюты и текущая дата const output = await Imports?.currency_module?.action?.get_currency_rate?.call({ currency_code: Context.data.currency_code, date: new TDate(), }); // Проверка, что результат выполнения действия получен if (output) { // Запись курса валюты, полученного с помощью модуля, в переменную из контекста процесса Context.data.current_currency_rate = output.currency_rate; } extention-activities.html call-process-activity.html Была ли статья полезной? Спасибо за ваш отзыв! × Ваш отзыв успешно отправлен! Спасибо за обратную связь. × Уточните, почему: Рекомендации не помогли Текст трудно понять Нет ответа на мой вопрос Содержание статьи не соответствует заголовку Другая причина × Расскажите, что вам не понравилось в статье: Да Нет Выберите вариант Рекомендации не помогли Текст трудно понять Нет ответа на мой вопрос Содержание статьи не соответствует заголовку Другая причина В этой статье API TS SDK Community Академия Платформа ECM Service Проекты Отправить фидбэк Задать вопрос Ваш фидбэк отправлен. © 2025 ELMA365 © 2025 ELMA365 elma365.com",
  "links": [
    "https://elma365.com/ru/help",
    "https://elma365.com/ru/help/platform/get-trial.html",
    "https://elma365.com/ru/help/ecm/ecm-functions.html",
    "https://elma365.com/ru/help/crm/crm-functions.html",
    "https://elma365.com/ru/help/projects/projects-functions.html",
    "https://elma365.com/ru/help/service/service-functions.html",
    "https://elma365.com/ru/help/kedo/kedo.html",
    "https://elma365.com/ru/help/business_solutions/-elma365-store.html",
    "https://elma-academy.com/ru/",
    "https://community.elma365.com/ru/",
    "https://api.elma365.com/ru/",
    "https://tssdk.elma365.com/latest/",
    "https://elma365.com/ru/",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/360024498352.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/extentions.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/extention-activities.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/script-activity.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/360009707032.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/activities-features.html",
    "https://www.typescriptlang.org/",
    "https://tssdk.elma365.com/ru/latest/index.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/global-constants.html",
    "https://tssdk.elma365.com/ru/latest/pages/quick-start/intro_globals.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/export_extention.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/optional-dependencies.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/360012265552.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/module-action.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/server-script-tracing.html",
    "https://tssdk.elma365.com/ru/latest/modules/_02_types_.html",
    "https://tssdk.elma365.com/ru/latest/interfaces/_02_types_.tdate.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/call-process-activity.html",
    "https://tssdk.elma365.com/",
    "https://community.elma365.com/",
    "https://elma-academy.com/ru/elma365",
    "https://navigator.sk.ru/orn/1122971",
    "https://vkvideo.ru/@elma_bpm",
    "https://vk.com/elma_bpm",
    "https://t.me/elmaday",
    "https://dzen.ru/elma"
  ],
  "last_crawled": "2025-11-29T22:03:47.701949",
  "metadata": {
    "depth": 10,
    "saved_at": "2025-11-29T22:03:47.957830"
  }
}