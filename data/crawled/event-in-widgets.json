{
  "doc_id": "event-in-widgets",
  "url": "https://elma365.com/ru/help/crm/ru/help/business_solutions/event-in-widgets.html",
  "title": "Передать событие из дочернего в родительский виджет",
  "breadcrumbs": [
    "Создание интерфейсов",
    "Скрипты в виджетах"
  ],
  "section": "Создание интерфейсов > Скрипты в виджетах | [crm]",
  "html": "<!DOCTYPE html>\n<html lang=\"ru\">\n<head>\n<title>Передать событие из дочернего в родительский виджет</title>\n<meta content=\"Help+Manual\" name=\"generator\"/>\n<meta content=\"\" name=\"keywords\"/>\n<meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>\n<meta content=\"IE=edge\" http-equiv=\"X-UA-Compatible\"/>\n<meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"/>\n<meta content=\"В ELMA365 вы можете создать пользовательское событие в виджете и передать его в другой виджет. Событиями могут быть нажатие кнопки, ввод данных в поле и т. д. Чтобы...\" name=\"description\"/>\n<meta content=\"\" name=\"picture\"/>\n<meta content=\"website\" property=\"og:type\"/>\n<meta content=\"Cправка по Low-code платформе ELMA365\" property=\"og:title\"/>\n<meta content=\"https://elma365.com/ru/help\" property=\"og:url\"/>\n<meta content=\"\" property=\"og:image\"/>\n<meta content=\"ELMA365\" property=\"og:site_name\"/>\n<link href=\"favicon.png\" rel=\"icon\" type=\"image/png\"/>\n<link href=\"https://elma365.com/ru/help/platform/event-in-widgets.html\" rel=\"canonical\"/>\n<link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap\" rel=\"stylesheet\"/>\n<link href=\"./jquery-ui.min.css\" rel=\"stylesheet\"/>\n<link href=\"default.css\" rel=\"stylesheet\"/>\n<link href=\"./search-yandex.css\" rel=\"stylesheet\"/>\n<link href=\"./article.css\" rel=\"stylesheet\"/>\n<link href=\"./glossary.css\" rel=\"stylesheet\"/>\n<link href=\"./theme.css\" rel=\"stylesheet\"/>\n<link href=\"./tooltipster.bundle.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n<script src=\"jquery.js\" type=\"text/javascript\"></script>\n<script src=\"./tooltipster.bundle.min.js\" type=\"text/javascript\"></script>\n<script type=\"text/javascript\">\n        $(document).ready($('.tooltip').tooltipster({\n            contentCloning: true,\n            theme: 'tooltipster-borderless',\n        }));\n    </script>\n<script src=\"helpman_settings.js\" type=\"text/javascript\"></script>\n<script src=\"helpman_topicinit.js\" type=\"text/javascript\"></script>\n<script src=\"highlight.js\" type=\"text/javascript\"></script>\n<script type=\"text/javascript\">\n     $(document).ready(function(){highlight();});\n   </script>\n</head>\n<body>\n<script async=\"\" src=\"https://www.googletagmanager.com/gtag/js?id=G-M6ETBEC1R9\"></script><script>window.dataLayer=window.dataLayer || []; function gtag(){dataLayer.push(arguments);}gtag('js', new Date()); gtag('config', 'G-M6ETBEC1R9');</script>\n<script>!function(e,t,c,n,r,a,m){e.ym=e.ym||function(){(e.ym.a=e.ym.a||[]).push(arguments)},e.ym.l=1*new Date;for(var s=0;s<document.scripts.length;s++)if(document.scripts[s].src===n)return;a=t.createElement(c),m=t.getElementsByTagName(c)[0],a.async=1,a.src=n,m.parentNode.insertBefore(a,m)}(window,document,\"script\",\"https://mc.yandex.ru/metrika/tag.js\"),ym(83179930,\"init\",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})</script><noscript><div><img alt=\"\" src=\"https://mc.yandex.ru/watch/83179930\" style=\"position:absolute;left:-9999px\"/></div></noscript> \n    \n    ﻿<header class=\"header elma-365\">\n<div class=\"container\">\n<div class=\"nav-container\">\n<div class=\"nav-wrap\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img alt=\"header logo\" src=\"./logo.svg\"/>\n</a>\n<div class=\"header__navi\">\n<ul class=\"header__list\"><li><span class=\"solution-select\"><span class=\"solution-select__selected\"></span><svg fill=\"none\" height=\"4\" viewbox=\"0 0 7 4\" width=\"7\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1 1L3.5 3.5L6 1\" stroke=\"white\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg><ul class=\"solution-select__list\"><li class=\"header__list-item\"><a class=\"project-link\" href=\"https://elma365.com/ru/help/platform/get-trial.html\">Платформа</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/ecm/ecm-functions.html\">CSP</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/crm/crm-functions.html\">CRM+CX</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/projects/projects-functions.html\">Проекты</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/service/service-functions.html\">Service</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/kedo/kedo.html\">КЭДО</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/business_solutions/-elma365-store.html\">Бизнес-решения</a></li><ul class=\"social-links-header\"><li class=\"social-link-header\"><a class=\"project-link\" href=\"https://elma-academy.com/ru/\" target=\"_blank\">Academy</a></li><li class=\"social-link-header\"><a class=\"project-link\" href=\"https://community.elma365.com/ru/\" target=\"_blank\">Community</a></li><li></li></ul></ul></span></li><li class=\"header__list-item\"><a class=\"header__list-item-url\" href=\"https://api.elma365.com/ru/\" target=\"_blank\">API</a></li><li class=\"header__list-item\"><a class=\"header__list-item-url\" href=\"https://tssdk.elma365.com/latest/\" target=\"_blank\">SDK</a></li><li class=\"header__list-item header__list-item-latest\"><a class=\"header__list-item-url header__list-item-last\" href=\"https://elma365.com/ru/\" target=\"_blank\">Сайт ELMA365</a></li></ul>\n<div class=\"hero-wrap\" style=\"display: flex; align-items: center;\">\n<div class=\"hero__search\" style=\"display: flex; justify-content: space-between; width: 100%; padding-left: 0;\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img alt=\"header logo\" src=\"./logo.svg\"/>\n</a>\n<button class=\"hero__search-icon\" id=\"search-icon\">\n<img alt=\"search string\" src=\"search-icon-white.svg\"/>\n</button>\n<div class=\"hero__search-form\" id=\"search-panel\"><form class=\"search-form\"><label class=\"search-form__label\"><span class=\"search__icon\" id=\"reset-search\" src=\"Union.svg\"></span><input class=\"search-form__input\" type=\"text\"/></label><input class=\"search-form__submit\" type=\"submit\" value=\"Submit\"/></form></div>\n</div>\n</div>\n</div>\n</div>\n<a class=\"hero__side-icon\" href=\"#\" id=\"side-menu-icon\">\n<img alt=\"side menu\" src=\"side_menu.svg\"/>\n</a>\n</div>\n</div>\n</header>\n<main class=\"main container\">\n<aside class=\"sidebar\" id=\"sidebar\">\n<div class=\"sidebar__header\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img src=\"./logo-light.svg\"/>\n</a>\n<span class=\"sidebar__close elma-365-close\" id=\"close\"></span>\n</div>\n<div class=\"sidebar__wrapper\" id=\"side-menu\">\n</div>\n</aside>\n<article class=\"article\" id=\"article\">\n<div class=\"article-inner\">\n<div class=\"content\">\n<header class=\"article__header\">\n<div class=\"article__bread\" style=\"display:flex; gap:8px;\">\n<span class=\"search-res__item-category search-res__item-category_subcategory subcategory article__badge\" id=\"subcategory\"></span>\n<nav class=\"topic__breadcrumbs\">\n<p>Low-code дизайнер &gt; <a href=\"interface_settings.html\">Создание интерфейсов</a> &gt; <a href=\"client_server_scripts.html\">Скрипты в виджетах</a> / Передать событие из дочернего в родительский виджет</p>\n</nav>\n</div>\n<div class=\"topic__title\"><h1 class=\"p_Heading1\"><span class=\"f_Heading1\">Передать событие из дочернего в родительский виджет</span></h1>\n</div>\n</header>\n<section class=\"article__content\">\n<div class=\"scroll-top-inner\">\n<a class=\"scroll-top\" href=\"#h1-article\"></a>\n</div>\n<!-- Placeholder for topic body. -->\n<p class=\"p_Normal\">В ELMA365 вы можете создать пользовательское событие в виджете и передать его в другой виджет. Событиями могут быть нажатие кнопки, ввод данных в поле и т. д. Чтобы зафиксировать его, в контексте виджета добавляется поле типа <span style=\"font-weight: bold;\">Событие</span>. При размещении виджета на форме или странице пользовательское событие отображается в настройках виджета на вкладке <a class=\"topiclink\" href=\"common_widget_settings.html#event\">События</a>. Вы можете работать с ним так же, как и с системными событиями, доступными по умолчанию.</p>\n<p class=\"p_Normal\">Рассмотрим примеры использования переменной данного типа:</p>\n<ol style=\"list-style-type:decimal\">\n<li class=\"p_Normal\" value=\"1\">Передача события из дочернего виджета в родительский — в дочернем виджете создаётся переменная типа <span style=\"font-weight: bold;\">Событие</span>, а в родительском — к ней привязывается скрипт. Рассмотрим пример в данной статье.</li><li class=\"p_Normal\" value=\"2\">Передача события между дочерними виджетами, которые расположены на одном родительском. Комплексный пример с использованием различных функций и дополнительных переменных. Подробнее о нём читайте в статье <a class=\"topiclink\" href=\"child-widget-event.html\">«Передать событие между двумя дочерними виджетами»</a>.</li></ol>\n<p class=\"p_Normal\">Предположим, что в системе создана страница <span style=\"font-weight: bold;\">Оптовые продажи</span> со списком задач. Для быстрого поиска договоров на ней также размещён дочерний виджет <span style=\"font-weight: bold;\">Фильтр данных</span>. Когда пользователь указывает значения в полях виджета и нажимает кнопку <span style=\"font-weight: bold;\">Найти</span>, на странице выполняется поиск по введённым параметрам и отображаются его результаты.</p>\n<p class=\"p_Normal\">Действие фильтрации данных выполняется в дочернем виджете. После его исполнения событие о нём передаётся по нажатию кнопки в родительский виджет, т. е. страницу. Таким образом на странице пользователь сможет увидеть результаты поиска.</p>\n<p class=\"p_Normal\"><img alt=\"event-in-widgets-1\" height=\"543\" src=\"event-in-widgets-1.png\" style=\"margin:0;width:992px;height:543px;border:none\" width=\"992\"/></p>\n<p class=\"p_Normal\">Рассмотрим подробнее, как выполнить настройку такой передачи данных.</p>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Шаг 1. Создать виджет «Фильтр данных» и настроить передачу события из него</span></h2>\n<p class=\"p_Normal\">Начните настройку с создания дочернего виджета. В нём нужно:</p>\n<ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\">добавить свойства для поиска;</li><li class=\"p_Normal\">создать переменную типа <span style=\"font-weight: bold;\">Событие</span>, к которой в родительском виджете нужно привязать скрипт для выполнения поиска;</li><li class=\"p_Normal\">разместить кнопку <span style=\"font-weight: bold;\">Найти</span>, чтобы при её нажатии передать событие в родительский виджет.</li></ul>\n<p class=\"p_Normal\">Для этого:</p>\n<ol style=\"list-style-type:upper-roman\">\n<li class=\"p_Normal\" value=\"1\"><a class=\"topiclink\" href=\"interface_settings.html#create-widget\">Создайте виджет</a> <span style=\"font-weight: bold;\">Фильтр данных</span> со следующими переменными:</li></ol>\n<ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\"><span style=\"font-weight: bold;\">При поиске</span> — служебная переменная типа <a class=\"topiclink\" href=\"360009707032.html#event\">Событие</a>. Она будет использована в скрипте, который передаст событие, произошедшее в виджете;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Строка поиска</span> — переменная типа <a class=\"topiclink\" href=\"360009707032.html#string\">Строка</a>. В этом поле пользователь укажет название нужного договора;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Созданы после</span> — переменная типа <a class=\"topiclink\" href=\"360009707032.html#date-time\">Дата/время</a>. Здесь можно указать дату создания договора для его поиска.<img alt=\"event-in-widgets-2\" height=\"232\" src=\"event-in-widgets-2.png\" style=\"margin:0;width:862px;height:232px;border:none\" width=\"862\"/></li></ul>\n<ol start=\"2\" style=\"list-style-type:upper-roman\">\n<li style=\"line-height: 1.28; margin-top: 0; margin-right: 0; margin-bottom: 11px;\" value=\"2\"><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">Вынесите на шаблон свойства </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Строка поиска </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">и</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\"> Созданы после</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">. Также добавьте виджет </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; color: #0563c1;\"><a class=\"topiclink\" href=\"button_widget.html\">Кнопка</a></span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\"> с названием </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Найти</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">.</span><img alt=\"event-in-widgets-3\" height=\"266\" src=\"event-in-widgets-3.png\" style=\"margin:0;width:859px;height:266px;border:none\" width=\"859\"/></li><li style=\"line-height: 1.28; margin-top: 0; margin-right: 0; margin-bottom: 11px;\" value=\"3\"><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">В настройках виджета </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Кнопка</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\"> укажите скрипт с переменной типа </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Событие</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">, чтобы передать событие, когда пользователь нажмёт </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Найти</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">.</span><img alt=\"event-in-widgets-4\" height=\"370\" src=\"event-in-widgets-4.png\" style=\"margin:0;width:845px;height:370px;border:none\" width=\"845\"/></li></ol>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\">Для этого справа от поля <span style=\"font-weight: bold;\">Выполняемый скрипт</span> нажмите <span style=\"font-weight: bold;\">Создать</span>, введите название функции <span style=\"font-weight: bold;\">search</span> и выберите <span style=\"font-weight: bold;\">Сохранить</span>, а затем — <span style=\"font-weight: bold;\">Открыть</span>. На вкладке <span style=\"font-weight: bold;\">Скрипты</span> создастся асинхронная функция. Добавьте в неё следующий скрипт:</p>\n<p class=\"p_CodeExample\" style=\"page-break-inside: avoid;\"><span class=\"f_CodeExample\">async function search(): Promise&lt;void&gt; {</span><br/>\n<span class=\"f_CodeExample\">    Context.data.onSearch!.emit();</span><br/>\n<span class=\"f_CodeExample\">}</span></p>\n<ol start=\"4\" style=\"list-style-type:upper-roman\">\n<li style=\"line-height: 1.28; margin-top: 0; margin-right: 0; margin-bottom: 11px;\" value=\"4\"><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">Сохраните и опубликуйте виджет </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Фильтр данных</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">.</span></li></ol>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">Теперь его можно использовать в других виджетах как дочерний для настройки быстрого поиска элементов любых приложений.</span></p>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Шаг 2. Разместить виджет на странице и настроить скрипт при получении события</span></h2>\n<p class=\"p_Normal\">На готовую страницу <span style=\"font-weight: bold;\">Оптовые продажи</span> со списком задач добавьте созданный виджет. Страница станет для него родительским виджетом. Для этого нужно:</p>\n<ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\">создать в её контексте переменные, чтобы записать данные фильтрации и найти договоры;</li><li class=\"p_Normal\">разместить на ней созданный на первом шаге виджет и поле для отображения результатов поиска;</li><li class=\"p_Normal\">в настройках добавленного виджета указать скрипт в пользовательском событии, чтобы находить нужные элементы при получении события о нажатии кнопки <span style=\"font-weight: bold;\">Найти</span>.</li></ul>\n<p class=\"p_Normal\">Выполните эти действия:</p>\n<ol style=\"list-style-type:upper-roman\">\n<li class=\"p_Normal\" value=\"1\">Откройте настройки страницы <span style=\"font-weight: bold;\">Оптовые продажи</span> и перейдите в <a class=\"topiclink\" href=\"360027211631.html#setting-in-designer\">дизайнер интерфейсов</a>, нажав опцию <span style=\"font-weight: bold;\">Конструктор</span>. </li><li class=\"p_Normal\" value=\"2\">На вкладке <span style=\"font-weight: bold;\">Контекст</span> создайте переменные:</li></ol>\n<ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\"><span style=\"font-weight: bold;\">Результаты поиска</span> — переменная типа <a class=\"topiclink\" href=\"360009707032.html#app\">Приложение</a> с опцией <span style=\"font-weight: bold;\">Несколько</span>. Выберите приложение <span style=\"font-weight: bold;\">Договоры</span>. Здесь пользователь увидит найденные элементы, когда нажмёт кнопку <span style=\"font-weight: bold;\">Найти</span>;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Поиск</span> — служебная переменная типа <span style=\"font-weight: bold;\">Строка</span>;</li><li class=\"p_Normal\"><span style=\"font-weight: bold;\">Дата создания</span> — служебная переменная типа <span style=\"font-weight: bold;\">Дата/время</span>.</li></ul>\n<p class=\"p_Normal\" style=\"margin: 0 0 0 12px;\">В переменные <span style=\"font-weight: bold;\">Поиск</span> и <span style=\"font-weight: bold;\">Дата создания</span> будут записаны значения соответствующих полей из виджета <span style=\"font-weight: bold;\">Фильтр данных</span>, когда пользователь в нём нажмёт кнопку <span style=\"font-weight: bold;\">Найти</span>.</p>\n<p class=\"p_Normal\" style=\"margin: 0 0 0 10px;\"><img alt=\"event-in-widgets-5\" height=\"230\" src=\"event-in-widgets-5.png\" style=\"margin:0;width:858px;height:230px;border:none\" width=\"858\"/></p>\n<ol start=\"3\" style=\"list-style-type:upper-roman\">\n<li class=\"p_Normal\" value=\"3\">На вкладке <span style=\"font-weight: bold;\">Шаблон</span> вынесите созданные ранее:</li></ol>\n<ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\">виджет <span style=\"font-weight: bold;\">Фильтр данных</span> с боковой панели <span style=\"font-weight: bold;\">Виджеты</span>;</li><li class=\"p_Normal\">свойство <span style=\"font-weight: bold;\">Результаты поиска</span>.<br/>\n<img alt=\"event-in-widgets-6\" height=\"369\" src=\"event-in-widgets-6.png\" style=\"margin:0;width:808px;height:369px;border:none\" width=\"808\"/></li></ul>\n<ol start=\"4\" style=\"list-style-type:upper-roman\">\n<li style=\"line-height: 1.28; margin-top: 0; margin-right: 0; margin-bottom: 11px;\" value=\"4\"><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">Откройте настройки виджета </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Фильтр данных</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">. На вкладке </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Основные</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\"> свяжите поля виджета с переменными из контекста страницы. </span><span style=\"font-size: 13px; font-family: Inter; color: #394149;\">Теперь значения, которые пользователь введёт для поиска договоров, запишутся в контекст страницы.</span><img alt=\"event-in-widgets-7\" height=\"277\" src=\"event-in-widgets-7.png\" style=\"margin:0;width:568px;height:277px;border:none\" width=\"568\"/></li></ol>\n<ol start=\"5\" style=\"list-style-type:upper-roman\">\n<li style=\"line-height: 1.28; margin-top: 0; margin-right: 0; margin-bottom: 11px;\" value=\"5\"><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">На вкладке </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">События</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\"> отобразится созданная ранее переменная </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">При поиске</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\"> типа </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Событие</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">. К ней привяжите скрипт, который выполнит фильтрацию данных приложения </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Договоры</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">, когда пользователь нажмёт кнопку </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Найти</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\"> в виджете </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Фильтр данных</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">.</span><br/>\n<img alt=\"event-in-widgets-8\" height=\"356\" src=\"event-in-widgets-8.png\" style=\"margin:0;width:862px;height:356px;border:none\" width=\"862\"/></li></ol>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span class=\"f_ImageCaption\"><a class=\"dropdown-toggle\" href=\"javascript:HMToggle('toggle','TOGGLE0186A1')\" style=\"font-style: normal; font-weight: bold; color: #000000; background-color: transparent; text-decoration: none;\">Скрипт для фильтрации договоров при наступлении события</a></span></p>\n<div class=\"dropdown-toggle-body\" id=\"TOGGLE0186A1\" style=\"text-align: left; text-indent: 0; line-height: 1.28; padding: 0 0 0 0; margin: 0 0 11px 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_CodeExample\" style=\"white-space: normal; page-break-inside: avoid;\"><span class=\"f_CodeExample\">declare const alert: (msg: string) =&gt; void;</span><br/>\n<span class=\"f_CodeExample\">async function search(): Promise&lt;void&gt; {</span><br/>\n<span class=\"f_CodeExample\">    if (!Context.data.searchString) {</span><br/>\n<span class=\"f_CodeExample\">        alert('Заполните строку поиска');</span><br/>\n<span class=\"f_CodeExample\">        return;</span><br/>\n<span class=\"f_CodeExample\">    }</span><br/>\n<span class=\"f_CodeExample\">    Context.data.items = await Global.ns.contracts.app.outcoming_contracts.search().where((f, g) =&gt; {</span><br/>\n<span class=\"f_CodeExample\">        const fts = g.fts(Context.data.searchString!);</span><br/>\n<span class=\"f_CodeExample\">        if (!Context.data.sozdany_posle) {</span><br/>\n<span class=\"f_CodeExample\">            return fts;</span><br/>\n<span class=\"f_CodeExample\">        }</span><br/>\n<span class=\"f_CodeExample\">        return g.and(fts, f.__createdAt.gt(Context.data.sozdany_posle));</span><br/>\n<span class=\"f_CodeExample\">    }).all();</span><br/>\n<span class=\"f_CodeExample\">}</span></p>\n<p class=\"p_Normal\"> </p>\n</td>\n</tr>\n</table>\n</div>\n<ol start=\"6\" style=\"list-style-type:upper-roman\">\n<li style=\"line-height: 1.28; margin-top: 0; margin-right: 0; margin-bottom: 11px;\" value=\"6\"><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">Сохраните и опубликуйте страницу.</span></li></ol>\n<p style=\"line-height: 1.28; margin: 0 0 11px 0;\"><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\">Теперь на ней можно находить элементы приложения </span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif; font-weight: bold;\">Договоры</span><span style=\"font-size: 15px; font-family: Calibri,Vectora,'Droid Sans','Open Sans',Frutiger,sans-serif;\"> по названию и дате создания.</span></p>\n<div class=\"bottom-nav\">\n<a class=\"topic__navi_prev\" href=\"widget-scripts.html\" id=\"prev-link\">\n<span class=\"bottom-nav__arrow bottom-nav__arrow--prev\"></span> <span class=\"bottom-nav__link\">widget-scripts.html</span>\n</a>\n<a class=\"topic__navi_next\" href=\"child-widget-event.html\" id=\"next-link\">\n<span class=\"bottom-nav__link\">child-widget-event.html</span> <span class=\"bottom-nav__arrow bottom-nav__arrow--next\"></span>\n</a>\n</div>\n<!-- добавляет на страницу строку блок Была ли статья полезной?  -->\n<div class=\"feedback-wrap\"><div class=\"feedback\" id=\"feedback\"><span><b>Была ли статья полезной?</b></span><form action=\"\" class=\"feedback-form\" id=\"feedback-form\" method=\"POST\"><div class=\"feedback__popup feedback__popup-response\" id=\"feedback__popup_thx\">Спасибо за ваш отзыв!</div><div id=\"feedback-success-popup\"><div class=\"wrap\"><button class=\"feedback-popup-close\" type=\"button\">×</button><svg fill=\"none\" height=\"44\" viewbox=\"0 0 44 44\" width=\"44\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#clip0_212_2187)\"><path d=\"M22 0.6875C10.2294 0.6875 0.6875 10.2294 0.6875 22C0.6875 33.7706 10.2294 43.3125 22 43.3125C33.7706 43.3125 43.3125 33.7706 43.3125 22C43.3125 10.2294 33.7706 0.6875 22 0.6875ZM22 40.5625C11.8023 40.5625 3.4375 32.3078 3.4375 22C3.4375 11.8024 11.6922 3.4375 22 3.4375C32.1977 3.4375 40.5625 11.6922 40.5625 22C40.5625 32.1976 32.3078 40.5625 22 40.5625ZM34.1713 16.933L18.6613 32.3186C18.257 32.7197 17.604 32.7171 17.203 32.3128L9.82283 24.873C9.42176 24.4686 9.42434 23.8157 9.82867 23.4146L10.5609 22.6884C10.9652 22.2873 11.6181 22.2899 12.0192 22.6942L17.9468 28.6697L31.9926 14.7366C32.3969 14.3356 33.0498 14.3382 33.4509 14.7425L34.1772 15.4747C34.5783 15.879 34.5757 16.532 34.1713 16.933Z\" fill=\"#27AE60\"></path></g><defs><clippath id=\"clip0_212_2187\"><rect fill=\"white\" height=\"44\" width=\"44\"></rect></clippath></defs></svg><p>Ваш отзыв успешно отправлен!</p><span>Спасибо за обратную связь.</span></div></div><div class=\"feedback__popup\" id=\"feedback__popup_why\"><button class=\"feedback-popup-close\" type=\"button\">×</button><div class=\"feedback__popup-header\">Уточните, почему:</div><input id=\"bad_recommendation\" name=\"category\" type=\"radio\" value=\"bad_recommendation\"/><label for=\"bad_recommendation\">Рекомендации не помогли</label><input id=\"difficult_text\" name=\"category\" type=\"radio\" value=\"difficult_text\"/><label for=\"difficult_text\">Текст трудно понять</label><input id=\"no_answer\" name=\"category\" type=\"radio\" value=\"no_answer\"/><label for=\"no_answer\">Нет ответа на мой вопрос</label><input id=\"bad_header\" name=\"category\" type=\"radio\" value=\"bad_header\"/><label for=\"bad_header\">Содержание статьи не соответствует заголовку</label><input id=\"other_reason\" name=\"category\" type=\"radio\" value=\"other_reason\"/><label for=\"other_reason\">Другая причина</label></div><div class=\"feedback__popup\" id=\"feedback__popup-other\"><button class=\"feedback-popup-close\" type=\"button\">×</button> <div class=\"feedback__popup-header\">Расскажите, что вам не понравилось в статье:</div><textarea class=\"feedback__textarea\" id=\"\" name=\"other\"></textarea><input class=\"feedback__other-btn\" type=\"submit\" value=\"Отправить\"/></div><div class=\"feedback-form__btn-group\"><input id=\"feedback__useful_yes\" name=\"useful\" type=\"radio\" value=\"true\"/><label for=\"feedback__useful_yes\"><img src=\"like.svg\"/><span class=\"feedback-form__btn-group_yes-btn\">Да</span></label><input id=\"feedback__useful_no\" name=\"useful\" type=\"radio\" value=\"false\"/><label for=\"feedback__useful_no\"><img src=\"dislike.svg\"/><span class=\"feedback-form__btn-group_no-btn\">Нет</span></label></div><select name=\"category\"><option disabled=\"\">Выберите вариант</option><option selected=\"\" value=\"bad_recommendation\">Рекомендации не помогли</option><option value=\"difficult_text\">Текст трудно понять</option><option value=\"no_answer\">Нет ответа на мой вопрос</option><option value=\"bad_header\">Содержание статьи не соответствует заголовку</option><option value=\"other_reason\">Другая причина</option></select><input type=\"submit\"/></form></div></div>\n</section>\n</div>\n<aside class=\"article__sidebar\" style=\"display:none\">\n<input type=\"checkbox\"/>\n<div class=\"article__arrow\"></div>\n<div class=\"table-of-contents elma365-right\" id=\"toc2Content\">\n<h3 class=\"h3-toc\">В этой статье</h3>\n<nav id=\"toc2\"></nav>\n</div>\n</aside>\n</div>\n</article>\n</main>\n<footer class=\"footer\">\n<div class=\"footer-container\">\n<div class=\"footer-mobile\">\n<ul class=\"footer-mobile__list\"><li><a href=\"https://api.elma365.com/ru/\" target=\"_blank\">API</a></li><li><a href=\"https://tssdk.elma365.com/\" target=\"_blank\">TS SDK</a></li><li><a href=\"https://community.elma365.com/\" target=\"_blank\">Community</a></li><li><a href=\"https://elma-academy.com/ru/elma365\" target=\"_blank\">Академия</a></li></ul><ul class=\"footer-mobile__list\"><li><a href=\"https://elma365.com/ru/help/platform/get-trial.html\">Платформа</a></li><li><a href=\"https://elma365.com/ru/help/ecm/ecm-functions.html\">ECM</a></li><li><a href=\"https://elma365.com/ru/help/service/service-functions.html\">Service</a></li><li><a href=\"https://elma365.com/ru/help/projects/projects-functions.html\">Проекты</a></li></ul>\n</div>\n<div class=\"container\">\n<div class=\"footer-wrap\">\n<div><span class=\"mobile-question-popup\">Отправить фидбэк</span><form action=\"\" class=\"question__popup question-xs\" id=\"question__popup\" method=\"POST\"><div class=\"question-wrap\"><span class=\"close\"></span><span class=\"title\">Задать вопрос</span><label for=\"help_question\" style=\"display: none;\"></label><textarea id=\"help_question\" name=\"help_question\"></textarea><input type=\"submit\" value=\"Отправить\"/></div></form><div class=\"hidden fade-in question-success-xs\">Ваш фидбэк отправлен.</div></div>\n<div class=\"footer-flex-b\">\n<div class=\"footer-top\">\n<span class=\"footer-copy\">© 2025 \n              ELMA365\n            \n            \n          </span>\n<a class=\"sk-img\" href=\"https://navigator.sk.ru/orn/1122971\" target=\"_blank\">\n<img alt=\"sk icon\" class=\"footer-img\" height=\"34\" src=\"sk-resident.svg\" width=\"117\"/>\n</a>\n</div>\n<div class=\"footer-line\">\n<div class=\"footer-line-copy\">\n<span class=\"footer-copy\">© 2025 \n                  ELMA365\n                \n                \n              </span>\n</div>\n<ul class=\"footer-list\">\n<li class=\"footer-item footer-url-elma\"><a class=\"footer-link footer-url-link-elma\" href=\"https://elma365.com/ru/\" style=\"color: #0D4A75;\" target=\"_blank\"><img alt=\"browse icon\" class=\"footer-img footer-img-elma-url\" src=\"browse.svg\"/>elma365.com</a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://vkvideo.ru/@elma_bpm\" target=\"_blank\"><img alt=\"vk-video icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"vk-video.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://vk.com/elma_bpm\" target=\"_blank\"><img alt=\"vk icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"vk.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://t.me/elmaday\" target=\"_blank\"><img alt=\"telegram icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"telegram.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://dzen.ru/elma\" target=\"_blank\"><img alt=\"dzen icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"social_dzen.svg\" width=\"20\"/></a></li>\n<li class=\"footer-item sk-footer-img\">\n<a class=\"sk-img\" href=\"https://navigator.sk.ru/orn/1122971\" target=\"_blank\">\n<img alt=\"sk icon\" class=\"footer-img\" height=\"34\" src=\"sk-resident.svg\" width=\"117\"/>\n</a>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<a class=\"arrow-top\" href=\"#\"></a>\n</div>\n</footer>\n<!--    <script type=\"text/javascript\" src=\"jquery1.min.js\"></script>-->\n<iframe name=\"hmnavigation\" style=\"display:none!important\"></iframe>\n<!--<script src=\"./jquery-ui.js\"></script> -->\n<script src=\"./jquery-ui.min.js\"></script>\n<!--script src=\"//cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script-->\n<script src=\"./jquery.tocify.min.js\"></script>\n<script src=\"./TypoReporter.min.js\"></script>\n<script src=\"./google-search.js\"></script>\n<script src=\"./main.js\"></script>\n<script type=\"text/javascript\">\nHMInitToggle('TOGGLE0186A1','hm.type','dropdown','hm.state','0');\n</script>\n</body>\n</html>\n",
  "plain_text": "Передать событие из дочернего в родительский виджет ﻿ Платформа CSP CRM+CX Проекты Service КЭДО Бизнес-решения Academy Community API SDK Сайт ELMA365 Low-code дизайнер > Создание интерфейсов > Скрипты в виджетах / Передать событие из дочернего в родительский виджет Передать событие из дочернего в родительский виджет В ELMA365 вы можете создать пользовательское событие в виджете и передать его в другой виджет. Событиями могут быть нажатие кнопки, ввод данных в поле и т. д. Чтобы зафиксировать его, в контексте виджета добавляется поле типа Событие . При размещении виджета на форме или странице пользовательское событие отображается в настройках виджета на вкладке События . Вы можете работать с ним так же, как и с системными событиями, доступными по умолчанию. Рассмотрим примеры использования переменной данного типа: Передача события из дочернего виджета в родительский — в дочернем виджете создаётся переменная типа Событие , а в родительском — к ней привязывается скрипт. Рассмотрим пример в данной статье. Передача события между дочерними виджетами, которые расположены на одном родительском. Комплексный пример с использованием различных функций и дополнительных переменных. Подробнее о нём читайте в статье «Передать событие между двумя дочерними виджетами» . Предположим, что в системе создана страница Оптовые продажи со списком задач. Для быстрого поиска договоров на ней также размещён дочерний виджет Фильтр данных . Когда пользователь указывает значения в полях виджета и нажимает кнопку Найти , на странице выполняется поиск по введённым параметрам и отображаются его результаты. Действие фильтрации данных выполняется в дочернем виджете. После его исполнения событие о нём передаётся по нажатию кнопки в родительский виджет, т. е. страницу. Таким образом на странице пользователь сможет увидеть результаты поиска. Рассмотрим подробнее, как выполнить настройку такой передачи данных. Шаг 1. Создать виджет «Фильтр данных» и настроить передачу события из него Начните настройку с создания дочернего виджета. В нём нужно: добавить свойства для поиска; создать переменную типа Событие , к которой в родительском виджете нужно привязать скрипт для выполнения поиска; разместить кнопку Найти , чтобы при её нажатии передать событие в родительский виджет. Для этого: Создайте виджет Фильтр данных со следующими переменными: При поиске — служебная переменная типа Событие . Она будет использована в скрипте, который передаст событие, произошедшее в виджете; Строка поиска — переменная типа Строка . В этом поле пользователь укажет название нужного договора; Созданы после — переменная типа Дата/время . Здесь можно указать дату создания договора для его поиска. Вынесите на шаблон свойства Строка поиска и Созданы после . Также добавьте виджет Кнопка с названием Найти . В настройках виджета Кнопка укажите скрипт с переменной типа Событие , чтобы передать событие, когда пользователь нажмёт Найти . Для этого справа от поля Выполняемый скрипт нажмите Создать , введите название функции search и выберите Сохранить , а затем — Открыть . На вкладке Скрипты создастся асинхронная функция. Добавьте в неё следующий скрипт: async function search(): Promise<void> { Context.data.onSearch!.emit(); } Сохраните и опубликуйте виджет Фильтр данных . Теперь его можно использовать в других виджетах как дочерний для настройки быстрого поиска элементов любых приложений. Шаг 2. Разместить виджет на странице и настроить скрипт при получении события На готовую страницу Оптовые продажи со списком задач добавьте созданный виджет. Страница станет для него родительским виджетом. Для этого нужно: создать в её контексте переменные, чтобы записать данные фильтрации и найти договоры; разместить на ней созданный на первом шаге виджет и поле для отображения результатов поиска; в настройках добавленного виджета указать скрипт в пользовательском событии, чтобы находить нужные элементы при получении события о нажатии кнопки Найти . Выполните эти действия: Откройте настройки страницы Оптовые продажи и перейдите в дизайнер интерфейсов , нажав опцию Конструктор . На вкладке Контекст создайте переменные: Результаты поиска — переменная типа Приложение с опцией Несколько . Выберите приложение Договоры . Здесь пользователь увидит найденные элементы, когда нажмёт кнопку Найти ; Поиск — служебная переменная типа Строка ; Дата создания — служебная переменная типа Дата/время . В переменные Поиск и Дата создания будут записаны значения соответствующих полей из виджета Фильтр данных , когда пользователь в нём нажмёт кнопку Найти . На вкладке Шаблон вынесите созданные ранее: виджет Фильтр данных с боковой панели Виджеты ; свойство Результаты поиска . Откройте настройки виджета Фильтр данных . На вкладке Основные свяжите поля виджета с переменными из контекста страницы. Теперь значения, которые пользователь введёт для поиска договоров, запишутся в контекст страницы. На вкладке События отобразится созданная ранее переменная При поиске типа Событие . К ней привяжите скрипт, который выполнит фильтрацию данных приложения Договоры , когда пользователь нажмёт кнопку Найти в виджете Фильтр данных . Скрипт для фильтрации договоров при наступлении события declare const alert: (msg: string) => void; async function search(): Promise<void> { if (!Context.data.searchString) { alert('Заполните строку поиска'); return; } Context.data.items = await Global.ns.contracts.app.outcoming_contracts.search().where((f, g) => { const fts = g.fts(Context.data.searchString!); if (!Context.data.sozdany_posle) { return fts; } return g.and(fts, f.__createdAt.gt(Context.data.sozdany_posle)); }).all(); } Сохраните и опубликуйте страницу. Теперь на ней можно находить элементы приложения Договоры по названию и дате создания. widget-scripts.html child-widget-event.html Была ли статья полезной? Спасибо за ваш отзыв! × Ваш отзыв успешно отправлен! Спасибо за обратную связь. × Уточните, почему: Рекомендации не помогли Текст трудно понять Нет ответа на мой вопрос Содержание статьи не соответствует заголовку Другая причина × Расскажите, что вам не понравилось в статье: Да Нет Выберите вариант Рекомендации не помогли Текст трудно понять Нет ответа на мой вопрос Содержание статьи не соответствует заголовку Другая причина В этой статье API TS SDK Community Академия Платформа ECM Service Проекты Отправить фидбэк Задать вопрос Ваш фидбэк отправлен. © 2025 ELMA365 © 2025 ELMA365 elma365.com",
  "links": [
    "https://elma365.com/ru/help",
    "https://elma365.com/ru/help/platform/get-trial.html",
    "https://elma365.com/ru/help/ecm/ecm-functions.html",
    "https://elma365.com/ru/help/crm/crm-functions.html",
    "https://elma365.com/ru/help/projects/projects-functions.html",
    "https://elma365.com/ru/help/service/service-functions.html",
    "https://elma365.com/ru/help/kedo/kedo.html",
    "https://elma365.com/ru/help/business_solutions/-elma365-store.html",
    "https://elma-academy.com/ru/",
    "https://community.elma365.com/ru/",
    "https://api.elma365.com/ru/",
    "https://tssdk.elma365.com/latest/",
    "https://elma365.com/ru/",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/interface_settings.html",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/client_server_scripts.html",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/common_widget_settings.html",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/child-widget-event.html",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/360009707032.html",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/button_widget.html",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/360027211631.html",
    "https://elma365.com/ru/help/crm/ru/help/business_solutions/widget-scripts.html",
    "https://tssdk.elma365.com/",
    "https://community.elma365.com/",
    "https://elma-academy.com/ru/elma365",
    "https://navigator.sk.ru/orn/1122971",
    "https://vkvideo.ru/@elma_bpm",
    "https://vk.com/elma_bpm",
    "https://t.me/elmaday",
    "https://dzen.ru/elma"
  ],
  "last_crawled": "2025-11-29T21:58:31.360288",
  "metadata": {
    "depth": 10,
    "saved_at": "2025-11-29T21:58:31.435784"
  }
}