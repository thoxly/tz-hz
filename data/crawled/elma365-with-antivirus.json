{
  "doc_id": "elma365-with-antivirus",
  "url": "https://elma365.com/ru/help/business_solutions/ru/help/crm/elma365-with-antivirus.html",
  "title": "Работа ELMA365 с антивирусным ПО",
  "breadcrumbs": [],
  "section": "[business_solutions]",
  "html": "<!DOCTYPE html>\n<html lang=\"ru\">\n<head>\n<title>Работа ELMA365 с антивирусным ПО</title>\n<meta content=\"Help+Manual\" name=\"generator\"/>\n<meta content=\"\" name=\"keywords\"/>\n<meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/>\n<meta content=\"IE=edge\" http-equiv=\"X-UA-Compatible\"/>\n<meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\"/>\n<meta content=\"Для обеспечения максимальной производительности и безопасности системы ELMA365 важно правильно настроить файерволл и разместить ключевые компоненты, такие как приложение...\" name=\"description\"/>\n<meta content=\"\" name=\"picture\"/>\n<meta content=\"website\" property=\"og:type\"/>\n<meta content=\"Cправка по Low-code платформе ELMA365\" property=\"og:title\"/>\n<meta content=\"https://elma365.com/ru/help\" property=\"og:url\"/>\n<meta content=\"\" property=\"og:image\"/>\n<meta content=\"ELMA365\" property=\"og:site_name\"/>\n<link href=\"favicon.png\" rel=\"icon\" type=\"image/png\"/>\n<link href=\"https://elma365.com/ru/help/platform/elma365-with-antivirus.html\" rel=\"canonical\"/>\n<link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap\" rel=\"stylesheet\"/>\n<link href=\"./jquery-ui.min.css\" rel=\"stylesheet\"/>\n<link href=\"default.css\" rel=\"stylesheet\"/>\n<link href=\"./search-yandex.css\" rel=\"stylesheet\"/>\n<link href=\"./article.css\" rel=\"stylesheet\"/>\n<link href=\"./glossary.css\" rel=\"stylesheet\"/>\n<link href=\"./theme.css\" rel=\"stylesheet\"/>\n<link href=\"./tooltipster.bundle.min.css\" rel=\"stylesheet\" type=\"text/css\"/>\n<script src=\"jquery.js\" type=\"text/javascript\"></script>\n<script src=\"./tooltipster.bundle.min.js\" type=\"text/javascript\"></script>\n<script type=\"text/javascript\">\n        $(document).ready($('.tooltip').tooltipster({\n            contentCloning: true,\n            theme: 'tooltipster-borderless',\n        }));\n    </script>\n<script src=\"helpman_settings.js\" type=\"text/javascript\"></script>\n<script src=\"helpman_topicinit.js\" type=\"text/javascript\"></script>\n<script src=\"highlight.js\" type=\"text/javascript\"></script>\n<script type=\"text/javascript\">\n     $(document).ready(function(){highlight();});\n   </script>\n</head>\n<body>\n<script async=\"\" src=\"https://www.googletagmanager.com/gtag/js?id=G-M6ETBEC1R9\"></script><script>window.dataLayer=window.dataLayer || []; function gtag(){dataLayer.push(arguments);}gtag('js', new Date()); gtag('config', 'G-M6ETBEC1R9');</script>\n<script>!function(e,t,c,n,r,a,m){e.ym=e.ym||function(){(e.ym.a=e.ym.a||[]).push(arguments)},e.ym.l=1*new Date;for(var s=0;s<document.scripts.length;s++)if(document.scripts[s].src===n)return;a=t.createElement(c),m=t.getElementsByTagName(c)[0],a.async=1,a.src=n,m.parentNode.insertBefore(a,m)}(window,document,\"script\",\"https://mc.yandex.ru/metrika/tag.js\"),ym(83179930,\"init\",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})</script><noscript><div><img alt=\"\" src=\"https://mc.yandex.ru/watch/83179930\" style=\"position:absolute;left:-9999px\"/></div></noscript> \n    \n    ﻿<header class=\"header elma-365\">\n<div class=\"container\">\n<div class=\"nav-container\">\n<div class=\"nav-wrap\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img alt=\"header logo\" src=\"./logo.svg\"/>\n</a>\n<div class=\"header__navi\">\n<ul class=\"header__list\"><li><span class=\"solution-select\"><span class=\"solution-select__selected\"></span><svg fill=\"none\" height=\"4\" viewbox=\"0 0 7 4\" width=\"7\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1 1L3.5 3.5L6 1\" stroke=\"white\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg><ul class=\"solution-select__list\"><li class=\"header__list-item\"><a class=\"project-link\" href=\"https://elma365.com/ru/help/platform/get-trial.html\">Платформа</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/ecm/ecm-functions.html\">CSP</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/crm/crm-functions.html\">CRM+CX</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/projects/projects-functions.html\">Проекты</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/service/service-functions.html\">Service</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/kedo/kedo.html\">КЭДО</a></li><li><a class=\"project-link\" href=\"https://elma365.com/ru/help/business_solutions/-elma365-store.html\">Бизнес-решения</a></li><ul class=\"social-links-header\"><li class=\"social-link-header\"><a class=\"project-link\" href=\"https://elma-academy.com/ru/\" target=\"_blank\">Academy</a></li><li class=\"social-link-header\"><a class=\"project-link\" href=\"https://community.elma365.com/ru/\" target=\"_blank\">Community</a></li><li></li></ul></ul></span></li><li class=\"header__list-item\"><a class=\"header__list-item-url\" href=\"https://api.elma365.com/ru/\" target=\"_blank\">API</a></li><li class=\"header__list-item\"><a class=\"header__list-item-url\" href=\"https://tssdk.elma365.com/latest/\" target=\"_blank\">SDK</a></li><li class=\"header__list-item header__list-item-latest\"><a class=\"header__list-item-url header__list-item-last\" href=\"https://elma365.com/ru/\" target=\"_blank\">Сайт ELMA365</a></li></ul>\n<div class=\"hero-wrap\" style=\"display: flex; align-items: center;\">\n<div class=\"hero__search\" style=\"display: flex; justify-content: space-between; width: 100%; padding-left: 0;\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img alt=\"header logo\" src=\"./logo.svg\"/>\n</a>\n<button class=\"hero__search-icon\" id=\"search-icon\">\n<img alt=\"search string\" src=\"search-icon-white.svg\"/>\n</button>\n<div class=\"hero__search-form\" id=\"search-panel\"><form class=\"search-form\"><label class=\"search-form__label\"><span class=\"search__icon\" id=\"reset-search\" src=\"Union.svg\"></span><input class=\"search-form__input\" type=\"text\"/></label><input class=\"search-form__submit\" type=\"submit\" value=\"Submit\"/></form></div>\n</div>\n</div>\n</div>\n</div>\n<a class=\"hero__side-icon\" href=\"#\" id=\"side-menu-icon\">\n<img alt=\"side menu\" src=\"side_menu.svg\"/>\n</a>\n</div>\n</div>\n</header>\n<main class=\"main container\">\n<aside class=\"sidebar\" id=\"sidebar\">\n<div class=\"sidebar__header\">\n<a class=\"header__logo\" href=\"https://elma365.com/ru/help\">\n<img src=\"./logo-light.svg\"/>\n</a>\n<span class=\"sidebar__close elma-365-close\" id=\"close\"></span>\n</div>\n<div class=\"sidebar__wrapper\" id=\"side-menu\">\n</div>\n</aside>\n<article class=\"article\" id=\"article\">\n<div class=\"article-inner\">\n<div class=\"content\">\n<header class=\"article__header\">\n<div class=\"article__bread\" style=\"display:flex; gap:8px;\">\n<span class=\"search-res__item-category search-res__item-category_subcategory subcategory article__badge\" id=\"subcategory\"></span>\n<nav class=\"topic__breadcrumbs\">\n<p>Архитектура и системные требования / Работа ELMA365 с антивирусным ПО</p>\n</nav>\n</div>\n<div class=\"topic__title\"><h1 class=\"p_Heading1\"><span class=\"f_Heading1\">Работа ELMA365 с антивирусным ПО</span></h1>\n</div>\n</header>\n<section class=\"article__content\">\n<div class=\"scroll-top-inner\">\n<a class=\"scroll-top\" href=\"#h1-article\"></a>\n</div>\n<!-- Placeholder for topic body. -->\n<p class=\"p_Normal\">Для обеспечения максимальной производительности и безопасности системы ELMA365 важно правильно настроить файерволл и разместить ключевые компоненты, такие как приложение ELMA365 и СУБД. </p>\n<p class=\"p_Normal\">ELMA365 является микросервисным решением, использующим технологии Golang, NodeJS, Angular, PostgreSQL, MongoDB, RabbitMQ, Valkey или Redis, Docker, Kubernetes и S3 MinIO для хранения файлов. </p>\n<p class=\"p_Normal\">В статье рассматриваются основные аспекты, которые помогут оптимизировать и обезопасить работу приложения.</p>\n<ol style=\"list-style-type:upper-roman\">\n<li class=\"p_Normal\" value=\"1\">Размещение приложения ELMA365 и СУБД в DMZ (Demilitarized Zone — изолированная зона сети) минимизирует риски несанкционированного доступа к внутренним ресурсам. </li></ol>\n<p class=\"p_Normal\" style=\"text-indent: 1px; margin: 0 0 0 35px;\">Доступ должен строго контролироваться с помощью файерволла. Так вы ограничите доступ к внутренней сети и снизите риски атак. Взаимодействие между приложением и СУБД должно осуществляться через защищённые каналы связи.</p>\n<p class=\"p_Normal\" style=\"text-indent: 1px; margin: 0 0 0 36px;\"><img alt=\"elma365-with-antivirus\" height=\"895\" src=\"elma365-with-antivirus.png\" style=\"margin:0;width:1454px;height:895px;border:none\" width=\"1454\"/></p>\n<ol style=\"list-style-type:upper-roman\">\n<li class=\"p_Normal\" value=\"2\">Настройка файерволла, контролирующего входящий и исходящий трафик, блокируя потенциально опасные соединения. Для ELMA365 рекомендуется настроить файерволл следующим образом:</li></ol>\n<ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\">открывайте только те порты, которые нужны для работы системы. Например: порт 443 (HTTPS) для взаимодействия с пользователями, внутренние порты для взаимодействия между микросервисами (например, RabbitMQ, Valkey, MinIO);</li><li class=\"p_Normal\">закройте все порты, которые не используются системой, чтобы минимизировать поверхность атаки;</li><li class=\"p_Normal\">ограничьте доступ к DMZ только с определённых IP-адресов или подсетей, используя правила ограничения или VPN. Это поможет предотвратить несанкционированный доступ к приложению;</li><li class=\"p_Normal\">добавьте в исключения порты 443 для доступа к registry (<code><b>hub.elma365.tech</b></code>) и репозиторию (<code><b>repo.elma365.tech</b></code>).</li></ul>\n<ol style=\"list-style-type:upper-roman\">\n<li class=\"p_Normal\" value=\"3\">Антивирусное программное обеспечение может негативно влиять на производительность системы, особенно если оно проверяет трафик между контейнерами и СУБД. Для минимизации этого влияния рекомендуется:</li></ol>\n<ul style=\"list-style-type:disc\">\n<li class=\"p_Normal\">установить антивирус на обратном прокси. Это позволит проверять только входящий и исходящий трафик на границе DMZ, не затрагивая внутренние коммуникации между приложением и СУБД;</li><li class=\"p_Normal\">исключить внутренние порты из проверки. Добавьте в исключения антивируса порты, используемые для взаимодействия между микросервисами (например, порты RabbitMQ, Valkey, MinIO). Это ускорит обмен данными внутри системы;</li><li class=\"p_Normal\">исключите файлы СУБД из проверки. Поскольку файлы базы данных не содержат вредоносного кода, их проверка антивирусом не приносит пользы и замедляет работу СУБД.</li></ul>\n<ol style=\"list-style-type:upper-roman\">\n<li class=\"p_Normal\" value=\"4\">Для повышения безопасности, производительности и управляемости системы рекомендуем использовать Linkerd — lightweight service mesh (легковесный сервис-меш). Он добавляет в Kubernetes такие функции, как прозрачное шифрование трафика, балансировка нагрузки и управление трафиком. Linkerd автоматически шифрует весь трафик между микросервисами с помощью mTLS (mutual TLS). Это обеспечивает защиту данных при передаче между контейнерами внутри кластера Kubernetes.</li><li class=\"p_Normal\" value=\"5\">Чтобы обеспечить отказоустойчивость системы, настройте регулярное резервное копирование данных.</li></ol>\n<p class=\"p_Normal\">Для сетевого взаимодействия между серверами на уровне инфраструктуры откройте перечисленные ниже порты. Подробнее читайте в <a class=\"weblink\" href=\"https://deckhouse.ru/products/kubernetes-platform/documentation/v1/network_security_setup.html\" target=\"_blank\">официальной документации Deckhouse</a>.</p>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Трафик между master-узлами</span></h2>\n<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Порт</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Протокол</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Назначение</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">2379, 2380</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Репликация <span style=\"font-weight: bold;\">etcd</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4200</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Вебхук-обработчик Cluster API</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4201</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Вебхук-обработчик для cloud-провайдера VMware Cloud Director</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4223</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Вебхук-обработчик контроллера Deckhouse</p>\n</td>\n</tr>\n</table>\n</div>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Трафик от master-узлов к узлам</span></h2>\n<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Порт</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Протокол</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Назначение</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">22</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">SSH для первичной настройки узлов статичным провайдером</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">10250</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">kubelet</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4221</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">apiserver bashible</span> для доставки конфигурации на узлы</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4227</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Вебхук-обработчик компонента <span style=\"font-weight: bold;\">runtime-audit-engine</span></p>\n</td>\n</tr>\n</table>\n</div>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Трафик от узлов к master-узлам</span></h2>\n<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Порт</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Протокол</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Назначение</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4234</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">UDP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">NTP для синхронизации времени между узлами</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">6443</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">kube-apiserver</span> для контроллеров, работающих в сетевом пространстве имён узла</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4203</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики компонента <span style=\"font-weight: bold;\">machine-controller-manager</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4219</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Прокси для пакетов registry <span style=\"font-weight: bold;\">registry-packages-proxy</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4222</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики контроллера Deckhouse</p>\n</td>\n</tr>\n</table>\n</div>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Трафик между узлами</span></h2>\n<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Порт</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Протокол</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Назначение</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><br/>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">ICMP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">ICMP для мониторинга связности между узлами</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">7000–7999</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Репликация DRBD для <span style=\"font-weight: bold;\">sds-replicated-volume</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">8469, 8472, 4299, 4298</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">UDP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">VXLAN для инкапсуляции трафика между подами</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4204</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Debug для контроллера Deckhouse</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4205</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики модуля <span style=\"font-weight: bold;\">ebpf-exporter</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4206</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики модуля <span style=\"font-weight: bold;\">node-exporter</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4207, 4208</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики контроллера <span style=\"font-weight: bold;\">ingress-nginx</span> для инлета <span style=\"font-weight: bold;\">HostWithFailover</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4209</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики управляющего слоя Kubernetes</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4210</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики <span style=\"font-weight: bold;\">kube-proxy</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4211</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики Cluster API</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4212</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики модуля <span style=\"font-weight: bold;\">runtime-audit-engine</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4213</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики <span style=\"font-weight: bold;\">kube-router</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">9695</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики агента <span style=\"font-weight: bold;\">sds-node-configurator</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">3367</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">API агента модуля <span style=\"font-weight: bold;\">sds-replicated-volume</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">9942</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики агента <span style=\"font-weight: bold;\">sds-replicated-volume</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">49152, 49153</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Живая миграция ВМ в Deckhouse Virtualization Platform</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4218, 4225</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Синхронизация через протокол <code><b>memberlist</b></code> для компонентов <span style=\"font-weight: bold;\">speaker</span> модулей <span style=\"font-weight: bold;\">metallb</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4218, 4225</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">UDP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Синхронизация через протокол <code><b>memberlist</b></code> для компонентов <span style=\"font-weight: bold;\">speaker</span> модулей <span style=\"font-weight: bold;\">metallb</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4220, 4226</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики компонентов <span style=\"font-weight: bold;\">speaker</span> модулей <span style=\"font-weight: bold;\">metallb</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4224</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики <span style=\"font-weight: bold;\">node-local-dns</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4240</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Порт для процедуры healthcheck соседних узлов в CNI Cilium</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4241</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики агентов CNI Cilium</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4242</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Метрики оператора CNI Cilium</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">4244</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">API для модуля <span style=\"font-weight: bold;\">cilium-hubble</span></p>\n</td>\n</tr>\n</table>\n</div>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Внешний трафик к master-узлам</span></h2>\n<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Порт</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Протокол</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Назначение</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">22, 22322</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">SSH для инициализации Deckhouse Kubernetes Platform</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">6443</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Прямой доступ к <span style=\"font-weight: bold;\">apiserver</span></p>\n</td>\n</tr>\n</table>\n</div>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Внешний трафик к фронтенд-узлам</span></h2>\n<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Порт</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Протокол</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Назначение</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">80, 443</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Прикладные порты для запросов к Ingress-контроллеру по протоколам HTTP и HTTPS. Обратите внимание, что эти порты настраиваются в ресурсе <span style=\"font-weight: bold;\">IngressNginxController</span> и могут отличаться в разных инсталляциях</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">5416</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">UDP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">OpenVPN</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">5416</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">OpenVPN</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">10256</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">healthcheck-порт для внешних балансировщиков</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">30000–32767</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Диапазон портов NodePort</p>\n</td>\n</tr>\n</table>\n</div>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Внешний трафик для всех узлов</span></h2>\n<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Порт</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Протокол</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Назначение</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">53</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">UDP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">DNS</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">53</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">DNS</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">123</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">UDP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">NTP для синхронизации с внешними серверами точного времени</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">443</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Container registry</p>\n</td>\n</tr>\n</table>\n</div>\n<h2 class=\"p_Heading2\"><span class=\"f_Heading2\">Взаимодействия с БД</span></h2>\n<div style=\"text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;\"><table style=\"border:none; border-spacing:0;\">\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Порт</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Протокол</span></p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\"><span style=\"font-weight: bold;\">Назначение</span></p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">5432</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для подключения к базам данных PostgreSQL</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">5000</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для взаимодействия с мастер-узлом в кластере Patroni</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">5001</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для взаимодействия с slave-узлом в кластере Patroni</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">8008</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для доступа к REST API Patroni, используемому для управления кластером </p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">27017</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для подключения к базам данных MongoDB</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">6379</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для подключения к базам данных Valkey или Redis</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">26379</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для подключения к базам данных Valkey Sentinel или Redis Sentinel</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">5672</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для протокола AMQP (Advanced Message Queuing Protocol), используемого RabbitMQ для передачи сообщений между приложениями</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">5671</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для протокола AMQP, защищённая версия порта 5672, используемая для AMQP с шифрованием через TLS/SSL</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">15672</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для веб-интерфейса управления RabbitMQ</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">15671</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт, защищённая  версия порта 15672, используемая для веб-интерфейса RabbitMQ с шифрованием через TLS/SSL</p>\n</td>\n</tr>\n<tr>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">9000</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">TCP</p>\n</td>\n<td style=\"vertical-align:top; padding:0; border:none\"><p class=\"p_Normal\">Стандартный порт для подключения к S3-совместимому объектному хранилищу Minio</p>\n</td>\n</tr>\n</table>\n</div>\n<p class=\"p_Normal\">В исключения необходимо внести директории<span style=\"font-weight: bold;\"> </span><code><b>/opt/elma365/</b></code><span style=\"font-weight: bold;\"> </span>и <code><b>/var/lib/docker/overlay2/</b></code>, а также следующие БД и процессы:</p>\n<ol style=\"list-style-type:decimal\">\n<li class=\"p_Normal\" value=\"1\"><span style=\"font-weight: bold;\">Базы данных приложения ELMA365</span>:</li></ol>\n<ul style=\"\">\n<li class=\"p_Normal\">/opt/bitnami/postgresql/bin/postgres;</li><li class=\"p_Normal\">/opt/bitnami/mongodb/bin/mongod;</li><li class=\"p_Normal\">/opt/bitnami/mongodb/bin/mongo;</li><li class=\"p_Normal\">redis-server;</li><li class=\"p_Normal\">/opt/bitnami/redis/bin/redis-server;</li><li class=\"p_Normal\">/opt/bitnami/erlang/lib/erlang/erts-12.3.1/bin/beam.smp;</li><li class=\"p_Normal\">/opt/bitnami/rabbitmq/sbin/rabbitmq-server;</li><li class=\"p_Normal\">minio;</li><li class=\"p_Normal\">/opt/bitnami/minio/bin/minio server.</li></ul>\n<ol style=\"list-style-type:decimal\">\n<li class=\"p_Normal\" value=\"2\"><span style=\"font-weight: bold;\">Процессы приложения ELMA365</span>:</li></ol>\n<ul style=\"\">\n<li class=\"p_Normal\">/bin/sh;</li><li class=\"p_Normal\">/coredns;</li><li class=\"p_Normal\">/hostpath-provisioner;</li><li class=\"p_Normal\">/nginx-ingress-controller;</li><li class=\"p_Normal\">/opt/bitnami/erlang/lib/erlang/erts-12.3.1/bin/epmd;</li><li class=\"p_Normal\">/sbin/dinit;</li><li class=\"p_Normal\">/snap/microk8s/3410/bin/containerd;</li><li class=\"p_Normal\">/snap/microk8s/3410/bin/containerd-shim-runc-v1;</li><li class=\"p_Normal\">/snap/microk8s/3410/kubelite;</li><li class=\"p_Normal\">/srv/elma365ctl-server;</li><li class=\"p_Normal\">/usr/bin/dumb-init;</li><li class=\"p_Normal\">/usr/bin/kube-controllers;</li><li class=\"p_Normal\">/usr/libexec/git-core/git-daemon;</li><li class=\"p_Normal\">/usr/local/bin/node;</li><li class=\"p_Normal\">/usr/local/bin/runsvdir;</li><li class=\"p_Normal\">calico-node;</li><li class=\"p_Normal\">git daemon;</li><li class=\"p_Normal\">gpg-agent;</li><li class=\"p_Normal\">nginx: cache manager process;</li><li class=\"p_Normal\">nginx: master process;</li><li class=\"p_Normal\">nginx: worker process;</li><li class=\"p_Normal\">runsv;</li><li class=\"p_Normal\">sh; </li><li class=\"p_Normal\">внутренние процессы ELMA365.</li></ul>\n<div class=\"bottom-nav\">\n<a class=\"topic__navi_prev\" href=\"data-protection.html\" id=\"prev-link\">\n<span class=\"bottom-nav__arrow bottom-nav__arrow--prev\"></span> <span class=\"bottom-nav__link\">data-protection.html</span>\n</a>\n<a class=\"topic__navi_next\" href=\"elma365-on-premises.html\" id=\"next-link\">\n<span class=\"bottom-nav__link\">elma365-on-premises.html</span> <span class=\"bottom-nav__arrow bottom-nav__arrow--next\"></span>\n</a>\n</div>\n<!-- добавляет на страницу строку блок Была ли статья полезной?  -->\n<div class=\"feedback-wrap\"><div class=\"feedback\" id=\"feedback\"><span><b>Была ли статья полезной?</b></span><form action=\"\" class=\"feedback-form\" id=\"feedback-form\" method=\"POST\"><div class=\"feedback__popup feedback__popup-response\" id=\"feedback__popup_thx\">Спасибо за ваш отзыв!</div><div id=\"feedback-success-popup\"><div class=\"wrap\"><button class=\"feedback-popup-close\" type=\"button\">×</button><svg fill=\"none\" height=\"44\" viewbox=\"0 0 44 44\" width=\"44\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#clip0_212_2187)\"><path d=\"M22 0.6875C10.2294 0.6875 0.6875 10.2294 0.6875 22C0.6875 33.7706 10.2294 43.3125 22 43.3125C33.7706 43.3125 43.3125 33.7706 43.3125 22C43.3125 10.2294 33.7706 0.6875 22 0.6875ZM22 40.5625C11.8023 40.5625 3.4375 32.3078 3.4375 22C3.4375 11.8024 11.6922 3.4375 22 3.4375C32.1977 3.4375 40.5625 11.6922 40.5625 22C40.5625 32.1976 32.3078 40.5625 22 40.5625ZM34.1713 16.933L18.6613 32.3186C18.257 32.7197 17.604 32.7171 17.203 32.3128L9.82283 24.873C9.42176 24.4686 9.42434 23.8157 9.82867 23.4146L10.5609 22.6884C10.9652 22.2873 11.6181 22.2899 12.0192 22.6942L17.9468 28.6697L31.9926 14.7366C32.3969 14.3356 33.0498 14.3382 33.4509 14.7425L34.1772 15.4747C34.5783 15.879 34.5757 16.532 34.1713 16.933Z\" fill=\"#27AE60\"></path></g><defs><clippath id=\"clip0_212_2187\"><rect fill=\"white\" height=\"44\" width=\"44\"></rect></clippath></defs></svg><p>Ваш отзыв успешно отправлен!</p><span>Спасибо за обратную связь.</span></div></div><div class=\"feedback__popup\" id=\"feedback__popup_why\"><button class=\"feedback-popup-close\" type=\"button\">×</button><div class=\"feedback__popup-header\">Уточните, почему:</div><input id=\"bad_recommendation\" name=\"category\" type=\"radio\" value=\"bad_recommendation\"/><label for=\"bad_recommendation\">Рекомендации не помогли</label><input id=\"difficult_text\" name=\"category\" type=\"radio\" value=\"difficult_text\"/><label for=\"difficult_text\">Текст трудно понять</label><input id=\"no_answer\" name=\"category\" type=\"radio\" value=\"no_answer\"/><label for=\"no_answer\">Нет ответа на мой вопрос</label><input id=\"bad_header\" name=\"category\" type=\"radio\" value=\"bad_header\"/><label for=\"bad_header\">Содержание статьи не соответствует заголовку</label><input id=\"other_reason\" name=\"category\" type=\"radio\" value=\"other_reason\"/><label for=\"other_reason\">Другая причина</label></div><div class=\"feedback__popup\" id=\"feedback__popup-other\"><button class=\"feedback-popup-close\" type=\"button\">×</button> <div class=\"feedback__popup-header\">Расскажите, что вам не понравилось в статье:</div><textarea class=\"feedback__textarea\" id=\"\" name=\"other\"></textarea><input class=\"feedback__other-btn\" type=\"submit\" value=\"Отправить\"/></div><div class=\"feedback-form__btn-group\"><input id=\"feedback__useful_yes\" name=\"useful\" type=\"radio\" value=\"true\"/><label for=\"feedback__useful_yes\"><img src=\"like.svg\"/><span class=\"feedback-form__btn-group_yes-btn\">Да</span></label><input id=\"feedback__useful_no\" name=\"useful\" type=\"radio\" value=\"false\"/><label for=\"feedback__useful_no\"><img src=\"dislike.svg\"/><span class=\"feedback-form__btn-group_no-btn\">Нет</span></label></div><select name=\"category\"><option disabled=\"\">Выберите вариант</option><option selected=\"\" value=\"bad_recommendation\">Рекомендации не помогли</option><option value=\"difficult_text\">Текст трудно понять</option><option value=\"no_answer\">Нет ответа на мой вопрос</option><option value=\"bad_header\">Содержание статьи не соответствует заголовку</option><option value=\"other_reason\">Другая причина</option></select><input type=\"submit\"/></form></div></div>\n</section>\n</div>\n<aside class=\"article__sidebar\" style=\"display:none\">\n<input type=\"checkbox\"/>\n<div class=\"article__arrow\"></div>\n<div class=\"table-of-contents elma365-right\" id=\"toc2Content\">\n<h3 class=\"h3-toc\">В этой статье</h3>\n<nav id=\"toc2\"></nav>\n</div>\n</aside>\n</div>\n</article>\n</main>\n<footer class=\"footer\">\n<div class=\"footer-container\">\n<div class=\"footer-mobile\">\n<ul class=\"footer-mobile__list\"><li><a href=\"https://api.elma365.com/ru/\" target=\"_blank\">API</a></li><li><a href=\"https://tssdk.elma365.com/\" target=\"_blank\">TS SDK</a></li><li><a href=\"https://community.elma365.com/\" target=\"_blank\">Community</a></li><li><a href=\"https://elma-academy.com/ru/elma365\" target=\"_blank\">Академия</a></li></ul><ul class=\"footer-mobile__list\"><li><a href=\"https://elma365.com/ru/help/platform/get-trial.html\">Платформа</a></li><li><a href=\"https://elma365.com/ru/help/ecm/ecm-functions.html\">ECM</a></li><li><a href=\"https://elma365.com/ru/help/service/service-functions.html\">Service</a></li><li><a href=\"https://elma365.com/ru/help/projects/projects-functions.html\">Проекты</a></li></ul>\n</div>\n<div class=\"container\">\n<div class=\"footer-wrap\">\n<div><span class=\"mobile-question-popup\">Отправить фидбэк</span><form action=\"\" class=\"question__popup question-xs\" id=\"question__popup\" method=\"POST\"><div class=\"question-wrap\"><span class=\"close\"></span><span class=\"title\">Задать вопрос</span><label for=\"help_question\" style=\"display: none;\"></label><textarea id=\"help_question\" name=\"help_question\"></textarea><input type=\"submit\" value=\"Отправить\"/></div></form><div class=\"hidden fade-in question-success-xs\">Ваш фидбэк отправлен.</div></div>\n<div class=\"footer-flex-b\">\n<div class=\"footer-top\">\n<span class=\"footer-copy\">© 2025 \n              ELMA365\n            \n            \n          </span>\n<a class=\"sk-img\" href=\"https://navigator.sk.ru/orn/1122971\" target=\"_blank\">\n<img alt=\"sk icon\" class=\"footer-img\" height=\"34\" src=\"sk-resident.svg\" width=\"117\"/>\n</a>\n</div>\n<div class=\"footer-line\">\n<div class=\"footer-line-copy\">\n<span class=\"footer-copy\">© 2025 \n                  ELMA365\n                \n                \n              </span>\n</div>\n<ul class=\"footer-list\">\n<li class=\"footer-item footer-url-elma\"><a class=\"footer-link footer-url-link-elma\" href=\"https://elma365.com/ru/\" style=\"color: #0D4A75;\" target=\"_blank\"><img alt=\"browse icon\" class=\"footer-img footer-img-elma-url\" src=\"browse.svg\"/>elma365.com</a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://vkvideo.ru/@elma_bpm\" target=\"_blank\"><img alt=\"vk-video icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"vk-video.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://vk.com/elma_bpm\" target=\"_blank\"><img alt=\"vk icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"vk.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://t.me/elmaday\" target=\"_blank\"><img alt=\"telegram icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"telegram.svg\" width=\"20\"/></a></li><li class=\"footer-item\"><a class=\"footer-link\" href=\"https://dzen.ru/elma\" target=\"_blank\"><img alt=\"dzen icon\" class=\"footer-img social-footer-img\" height=\"20\" src=\"social_dzen.svg\" width=\"20\"/></a></li>\n<li class=\"footer-item sk-footer-img\">\n<a class=\"sk-img\" href=\"https://navigator.sk.ru/orn/1122971\" target=\"_blank\">\n<img alt=\"sk icon\" class=\"footer-img\" height=\"34\" src=\"sk-resident.svg\" width=\"117\"/>\n</a>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<a class=\"arrow-top\" href=\"#\"></a>\n</div>\n</footer>\n<!--    <script type=\"text/javascript\" src=\"jquery1.min.js\"></script>-->\n<iframe name=\"hmnavigation\" style=\"display:none!important\"></iframe>\n<!--<script src=\"./jquery-ui.js\"></script> -->\n<script src=\"./jquery-ui.min.js\"></script>\n<!--script src=\"//cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script-->\n<script src=\"./jquery.tocify.min.js\"></script>\n<script src=\"./TypoReporter.min.js\"></script>\n<script src=\"./google-search.js\"></script>\n<script src=\"./main.js\"></script>\n</body>\n</html>\n",
  "plain_text": "Работа ELMA365 с антивирусным ПО ﻿ Платформа CSP CRM+CX Проекты Service КЭДО Бизнес-решения Academy Community API SDK Сайт ELMA365 Архитектура и системные требования / Работа ELMA365 с антивирусным ПО Работа ELMA365 с антивирусным ПО Для обеспечения максимальной производительности и безопасности системы ELMA365 важно правильно настроить файерволл и разместить ключевые компоненты, такие как приложение ELMA365 и СУБД. ELMA365 является микросервисным решением, использующим технологии Golang, NodeJS, Angular, PostgreSQL, MongoDB, RabbitMQ, Valkey или Redis, Docker, Kubernetes и S3 MinIO для хранения файлов. В статье рассматриваются основные аспекты, которые помогут оптимизировать и обезопасить работу приложения. Размещение приложения ELMA365 и СУБД в DMZ (Demilitarized Zone — изолированная зона сети) минимизирует риски несанкционированного доступа к внутренним ресурсам. Доступ должен строго контролироваться с помощью файерволла. Так вы ограничите доступ к внутренней сети и снизите риски атак. Взаимодействие между приложением и СУБД должно осуществляться через защищённые каналы связи. Настройка файерволла, контролирующего входящий и исходящий трафик, блокируя потенциально опасные соединения. Для ELMA365 рекомендуется настроить файерволл следующим образом: открывайте только те порты, которые нужны для работы системы. Например: порт 443 (HTTPS) для взаимодействия с пользователями, внутренние порты для взаимодействия между микросервисами (например, RabbitMQ, Valkey, MinIO); закройте все порты, которые не используются системой, чтобы минимизировать поверхность атаки; ограничьте доступ к DMZ только с определённых IP-адресов или подсетей, используя правила ограничения или VPN. Это поможет предотвратить несанкционированный доступ к приложению; добавьте в исключения порты 443 для доступа к registry ( hub.elma365.tech ) и репозиторию ( repo.elma365.tech ). Антивирусное программное обеспечение может негативно влиять на производительность системы, особенно если оно проверяет трафик между контейнерами и СУБД. Для минимизации этого влияния рекомендуется: установить антивирус на обратном прокси. Это позволит проверять только входящий и исходящий трафик на границе DMZ, не затрагивая внутренние коммуникации между приложением и СУБД; исключить внутренние порты из проверки. Добавьте в исключения антивируса порты, используемые для взаимодействия между микросервисами (например, порты RabbitMQ, Valkey, MinIO). Это ускорит обмен данными внутри системы; исключите файлы СУБД из проверки. Поскольку файлы базы данных не содержат вредоносного кода, их проверка антивирусом не приносит пользы и замедляет работу СУБД. Для повышения безопасности, производительности и управляемости системы рекомендуем использовать Linkerd — lightweight service mesh (легковесный сервис-меш). Он добавляет в Kubernetes такие функции, как прозрачное шифрование трафика, балансировка нагрузки и управление трафиком. Linkerd автоматически шифрует весь трафик между микросервисами с помощью mTLS (mutual TLS). Это обеспечивает защиту данных при передаче между контейнерами внутри кластера Kubernetes. Чтобы обеспечить отказоустойчивость системы, настройте регулярное резервное копирование данных. Для сетевого взаимодействия между серверами на уровне инфраструктуры откройте перечисленные ниже порты. Подробнее читайте в официальной документации Deckhouse . Трафик между master-узлами Порт Протокол Назначение 2379, 2380 TCP Репликация etcd 4200 TCP Вебхук-обработчик Cluster API 4201 TCP Вебхук-обработчик для cloud-провайдера VMware Cloud Director 4223 TCP Вебхук-обработчик контроллера Deckhouse Трафик от master-узлов к узлам Порт Протокол Назначение 22 TCP SSH для первичной настройки узлов статичным провайдером 10250 TCP kubelet 4221 TCP apiserver bashible для доставки конфигурации на узлы 4227 TCP Вебхук-обработчик компонента runtime-audit-engine Трафик от узлов к master-узлам Порт Протокол Назначение 4234 UDP NTP для синхронизации времени между узлами 6443 TCP kube-apiserver для контроллеров, работающих в сетевом пространстве имён узла 4203 TCP Метрики компонента machine-controller-manager 4219 TCP Прокси для пакетов registry registry-packages-proxy 4222 TCP Метрики контроллера Deckhouse Трафик между узлами Порт Протокол Назначение ICMP ICMP для мониторинга связности между узлами 7000–7999 TCP Репликация DRBD для sds-replicated-volume 8469, 8472, 4299, 4298 UDP VXLAN для инкапсуляции трафика между подами 4204 TCP Debug для контроллера Deckhouse 4205 TCP Метрики модуля ebpf-exporter 4206 TCP Метрики модуля node-exporter 4207, 4208 TCP Метрики контроллера ingress-nginx для инлета HostWithFailover 4209 TCP Метрики управляющего слоя Kubernetes 4210 TCP Метрики kube-proxy 4211 TCP Метрики Cluster API 4212 TCP Метрики модуля runtime-audit-engine 4213 TCP Метрики kube-router 9695 TCP Метрики агента sds-node-configurator 3367 TCP API агента модуля sds-replicated-volume 9942 TCP Метрики агента sds-replicated-volume 49152, 49153 TCP Живая миграция ВМ в Deckhouse Virtualization Platform 4218, 4225 TCP Синхронизация через протокол memberlist для компонентов speaker модулей metallb 4218, 4225 UDP Синхронизация через протокол memberlist для компонентов speaker модулей metallb 4220, 4226 TCP Метрики компонентов speaker модулей metallb 4224 TCP Метрики node-local-dns 4240 TCP Порт для процедуры healthcheck соседних узлов в CNI Cilium 4241 TCP Метрики агентов CNI Cilium 4242 TCP Метрики оператора CNI Cilium 4244 TCP API для модуля cilium-hubble Внешний трафик к master-узлам Порт Протокол Назначение 22, 22322 TCP SSH для инициализации Deckhouse Kubernetes Platform 6443 TCP Прямой доступ к apiserver Внешний трафик к фронтенд-узлам Порт Протокол Назначение 80, 443 TCP Прикладные порты для запросов к Ingress-контроллеру по протоколам HTTP и HTTPS. Обратите внимание, что эти порты настраиваются в ресурсе IngressNginxController и могут отличаться в разных инсталляциях 5416 UDP OpenVPN 5416 TCP OpenVPN 10256 TCP healthcheck-порт для внешних балансировщиков 30000–32767 TCP Диапазон портов NodePort Внешний трафик для всех узлов Порт Протокол Назначение 53 UDP DNS 53 TCP DNS 123 UDP NTP для синхронизации с внешними серверами точного времени 443 TCP Container registry Взаимодействия с БД Порт Протокол Назначение 5432 TCP Стандартный порт для подключения к базам данных PostgreSQL 5000 TCP Стандартный порт для взаимодействия с мастер-узлом в кластере Patroni 5001 TCP Стандартный порт для взаимодействия с slave-узлом в кластере Patroni 8008 TCP Стандартный порт для доступа к REST API Patroni, используемому для управления кластером 27017 TCP Стандартный порт для подключения к базам данных MongoDB 6379 TCP Стандартный порт для подключения к базам данных Valkey или Redis 26379 TCP Стандартный порт для подключения к базам данных Valkey Sentinel или Redis Sentinel 5672 TCP Стандартный порт для протокола AMQP (Advanced Message Queuing Protocol), используемого RabbitMQ для передачи сообщений между приложениями 5671 TCP Стандартный порт для протокола AMQP, защищённая версия порта 5672, используемая для AMQP с шифрованием через TLS/SSL 15672 TCP Стандартный порт для веб-интерфейса управления RabbitMQ 15671 TCP Стандартный порт, защищённая версия порта 15672, используемая для веб-интерфейса RabbitMQ с шифрованием через TLS/SSL 9000 TCP Стандартный порт для подключения к S3-совместимому объектному хранилищу Minio В исключения необходимо внести директории /opt/elma365/ и /var/lib/docker/overlay2/ , а также следующие БД и процессы: Базы данных приложения ELMA365 : /opt/bitnami/postgresql/bin/postgres; /opt/bitnami/mongodb/bin/mongod; /opt/bitnami/mongodb/bin/mongo; redis-server; /opt/bitnami/redis/bin/redis-server; /opt/bitnami/erlang/lib/erlang/erts-12.3.1/bin/beam.smp; /opt/bitnami/rabbitmq/sbin/rabbitmq-server; minio; /opt/bitnami/minio/bin/minio server. Процессы приложения ELMA365 : /bin/sh; /coredns; /hostpath-provisioner; /nginx-ingress-controller; /opt/bitnami/erlang/lib/erlang/erts-12.3.1/bin/epmd; /sbin/dinit; /snap/microk8s/3410/bin/containerd; /snap/microk8s/3410/bin/containerd-shim-runc-v1; /snap/microk8s/3410/kubelite; /srv/elma365ctl-server; /usr/bin/dumb-init; /usr/bin/kube-controllers; /usr/libexec/git-core/git-daemon; /usr/local/bin/node; /usr/local/bin/runsvdir; calico-node; git daemon; gpg-agent; nginx: cache manager process; nginx: master process; nginx: worker process; runsv; sh; внутренние процессы ELMA365. data-protection.html elma365-on-premises.html Была ли статья полезной? Спасибо за ваш отзыв! × Ваш отзыв успешно отправлен! Спасибо за обратную связь. × Уточните, почему: Рекомендации не помогли Текст трудно понять Нет ответа на мой вопрос Содержание статьи не соответствует заголовку Другая причина × Расскажите, что вам не понравилось в статье: Да Нет Выберите вариант Рекомендации не помогли Текст трудно понять Нет ответа на мой вопрос Содержание статьи не соответствует заголовку Другая причина В этой статье API TS SDK Community Академия Платформа ECM Service Проекты Отправить фидбэк Задать вопрос Ваш фидбэк отправлен. © 2025 ELMA365 © 2025 ELMA365 elma365.com",
  "links": [
    "https://elma365.com/ru/help",
    "https://elma365.com/ru/help/platform/get-trial.html",
    "https://elma365.com/ru/help/ecm/ecm-functions.html",
    "https://elma365.com/ru/help/crm/crm-functions.html",
    "https://elma365.com/ru/help/projects/projects-functions.html",
    "https://elma365.com/ru/help/service/service-functions.html",
    "https://elma365.com/ru/help/kedo/kedo.html",
    "https://elma365.com/ru/help/business_solutions/-elma365-store.html",
    "https://elma-academy.com/ru/",
    "https://community.elma365.com/ru/",
    "https://api.elma365.com/ru/",
    "https://tssdk.elma365.com/latest/",
    "https://elma365.com/ru/",
    "https://deckhouse.ru/products/kubernetes-platform/documentation/v1/network_security_setup.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/data-protection.html",
    "https://elma365.com/ru/help/business_solutions/ru/help/crm/elma365-on-premises.html",
    "https://tssdk.elma365.com/",
    "https://community.elma365.com/",
    "https://elma-academy.com/ru/elma365",
    "https://navigator.sk.ru/orn/1122971",
    "https://vkvideo.ru/@elma_bpm",
    "https://vk.com/elma_bpm",
    "https://t.me/elmaday",
    "https://dzen.ru/elma"
  ],
  "last_crawled": "2025-11-29T22:03:54.721669",
  "metadata": {
    "depth": 10,
    "saved_at": "2025-11-29T22:03:54.834695"
  }
}